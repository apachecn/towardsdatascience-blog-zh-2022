<html>
<head>
<title>13 Tips for using PyTest</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨ PyTest çš„ 13 ä¸ªæŠ€å·§</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://towardsdatascience.com/13-tips-for-using-pytest-5341e3366d2d#2022-11-28">https://towardsdatascience.com/13-tips-for-using-pytest-5341e3366d2d#2022-11-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/8414cd2adfe9b667e9c42eede23b33a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B6oWzUw7FJZifK2E_pWPeA.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/s/photos/python?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Š<a class="ae kf" href="https://unsplash.com/@altumcode?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> AltumCode </a>æ‹æ‘„çš„ç…§ç‰‡</p></figure><p id="9b02" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">å•å…ƒæµ‹è¯•å¯¹äºè½¯ä»¶å¼€å‘æ¥è¯´æ˜¯ä¸€é¡¹éå¸¸é‡è¦çš„æŠ€èƒ½ã€‚æœ‰ä¸€äº›å¾ˆæ£’çš„ Python åº“å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¼–å†™å’Œè¿è¡Œå•å…ƒæµ‹è¯•ï¼Œæ¯”å¦‚<a class="ae kf" href="https://nose.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> Nose </a>å’Œ<a class="ae kf" href="https://docs.python.org/3/library/unittest.html" rel="noopener ugc nofollow" target="_blank"> Unittest </a>ã€‚ä½†æ˜¯æˆ‘æœ€å–œæ¬¢çš„æ˜¯<a class="ae kf" href="https://docs.pytest.org/en/7.2.x/" rel="noopener ugc nofollow" target="_blank"> PyTest </a>ã€‚</p><p id="f04b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æˆ‘æœ€è¿‘æ›´è¯¦ç»†åœ°é˜…è¯»äº† PyTest çš„æ–‡æ¡£ï¼Œä»¥ä¾¿æ›´æ·±å…¥åœ°äº†è§£å®ƒçš„ç‰¹æ€§ã€‚</p><p id="19b9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä¸‹é¢æ˜¯ä¸€äº›æˆ‘è®¤ä¸ºæœ‰ç”¨çš„æ¨¡ç³Šç‰¹æ€§çš„åˆ—è¡¨ï¼Œæˆ‘å°†å¼€å§‹æŠŠå®ƒä»¬é›†æˆåˆ°æˆ‘è‡ªå·±çš„æµ‹è¯•å·¥ä½œæµç¨‹ä¸­ã€‚æˆ‘å¸Œæœ›è¿™ä¸ªåˆ—è¡¨ä¸­æœ‰ä¸€äº›ä½ ä¸çŸ¥é“çš„æ–°ä¸œè¥¿â€¦</p><blockquote class="le lf lg"><p id="2253" class="kg kh lh ki b kj kk kl km kn ko kp kq li ks kt ku lj kw kx ky lk la lb lc ld im bi translated"><em class="it">ğŸ’»è¿™ç¯‡æ–‡ç« ä¸­çš„æ‰€æœ‰ä»£ç ç‰‡æ®µéƒ½å¯ä»¥åœ¨</em><a class="ae kf" href="https://github.com/julian-west/e4ds-snippets/tree/master/pytest/pytest_tips" rel="noopener ugc nofollow" target="_blank"><em class="it">e4ds-snippets GitHub èµ„æºåº“</em> </a> <em class="it">ä¸­æ‰¾åˆ°ã€‚</em></p></blockquote><h1 id="253e" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">ç¼–å†™æµ‹è¯•çš„ä¸€èˆ¬æç¤ºğŸ‘¨â€ğŸ“</h1><h1 id="71b3" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">1.å¦‚ä½•ç¼–å†™å¥½çš„å•å…ƒæµ‹è¯•</h1><p id="c3cd" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">å¥½äº†ï¼Œè¿™ä¸€æ¡å¹¶ä¸æ˜¯ä¸“é—¨é’ˆå¯¹ PyTest åº“çš„ï¼Œä½†æ˜¯ç¬¬ä¸€æ¡å»ºè®®æ˜¯æµè§ˆä¸€ä¸‹<a class="ae kf" href="https://docs.pytest.org/en/7.1.x/explanation/anatomy.html" rel="noopener ugc nofollow" target="_blank"> PyTest çš„æ–‡æ¡£</a>å…³äºæ„å»ºä½ çš„å•å…ƒæµ‹è¯•ã€‚è¿™å¾ˆå€¼å¾—ä¸€è¯»ã€‚</p><p id="a8c5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä¸€ä¸ªå¥½çš„æµ‹è¯•åº”è¯¥éªŒè¯æŸç§é¢„æœŸçš„è¡Œä¸ºï¼Œå¹¶ä¸”èƒ½å¤Ÿç‹¬ç«‹äºå…¶ä»–ä»£ç è¿è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæµ‹è¯•ä¸­åº”è¯¥åŒ…å«è®¾ç½®å’Œè¿è¡Œè¦æµ‹è¯•çš„è¡Œä¸ºæ‰€éœ€çš„æ‰€æœ‰ä»£ç ã€‚</p><p id="226c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">è¿™å¯ä»¥æ¦‚æ‹¬ä¸ºå››ä¸ªé˜¶æ®µ:</p><ul class=""><li id="9211" class="mo mp it ki b kj kk kn ko kr mq kv mr kz ms ld mt mu mv mw bi translated"><strong class="ki iu">å®‰æ’</strong> â€”æ‰§è¡Œæµ‹è¯•æ‰€éœ€çš„è®¾ç½®ã€‚ä¾‹å¦‚å®šä¹‰è¾“å…¥</li><li id="bfaa" class="mo mp it ki b kj mx kn my kr mz kv na kz nb ld mt mu mv mw bi translated"><strong class="ki iu">åŠ¨ä½œ</strong> â€”è¿è¡Œæ‚¨æƒ³è¦æµ‹è¯•çš„åŠŸèƒ½</li><li id="a1a0" class="mo mp it ki b kj mx kn my kr mz kv na kz nb ld mt mu mv mw bi translated"><strong class="ki iu">æ–­è¨€</strong> â€”éªŒè¯å‡½æ•°çš„è¾“å‡ºæ˜¯å¦ç¬¦åˆé¢„æœŸ</li><li id="147e" class="mo mp it ki b kj mx kn my kr mz kv na kz nb ld mt mu mv mw bi translated"><strong class="ki iu">æ¸…ç†</strong>â€”â€”(å¯é€‰)æ¸…ç†æµ‹è¯•ä¸­äº§ç”Ÿçš„ä»»ä½•å·¥ä»¶ã€‚ä¾‹å¦‚è¾“å‡ºæ–‡ä»¶ã€‚</li></ul><p id="53de" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä¾‹å¦‚:</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="9e81" class="nl lm it nh b be nm nn l no np"># example function<br/>def sum_list(my_list):<br/>    return sum(my_list)</span></pre><pre class="nq ng nh ni bn nj nk bi"><span id="b75f" class="nl lm it nh b be nm nn l no np"># example test case<br/>def test_sum_list():<br/>    # arrange<br/>    test_list = [1, 2, 3]<br/>    # act<br/>    answer = sum_list(test_list)<br/>    # Assert<br/>    assert answer == 6</span></pre><p id="6845" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">è™½ç„¶è¿™æ˜¯ä¸€ä¸ªå¾®ä¸è¶³é“çš„ä¾‹å­ï¼Œä½†æ˜¯è®©æ‰€æœ‰çš„æµ‹è¯•éƒ½æœ‰ä¸€ä¸ªé€šç”¨çš„ç»“æ„æœ‰åŠ©äºæé«˜å¯è¯»æ€§ï¼Œç¼–å†™æ›´å¥½çš„æµ‹è¯•ã€‚</p><p id="9afa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://docs.pytest.org/en/7.1.x/explanation/anatomy.html" rel="noopener ugc nofollow" target="_blank">https://docs.pytest.org/en/7.1.x/explanation/anatomy.html</a></p><h1 id="f835" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">2.æµ‹è¯•å¼‚å¸¸</h1><p id="59e8" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">é€šå¸¸ï¼Œæˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„æµ‹è¯•æ˜¯å‡½æ•°æˆåŠŸè¿è¡Œæ—¶çš„é¢„æœŸè¾“å‡ºã€‚</p><p id="b3bf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä½†æ˜¯ï¼Œå½“å‡½æ•°å¼•å‘å¼‚å¸¸æ—¶ï¼ŒéªŒè¯å‡½æ•°çš„è¡Œä¸ºä¹Ÿå¾ˆé‡è¦ã€‚å°¤å…¶æ˜¯å½“æ‚¨çŸ¥é“å“ªç§ç±»å‹çš„è¾“å…¥ä¼šå¼•å‘æŸäº›å¼‚å¸¸æ—¶ã€‚</p><p id="afd3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æ‚¨å¯ä»¥ä½¿ç”¨<code class="fe nr ns nt nh b">pytest.raises</code>ä¸Šä¸‹æ–‡ç®¡ç†å™¨<a class="ae kf" href="https://docs.pytest.org/en/7.1.x/how-to/assert.html#assertions-about-expected-exceptions" rel="noopener ugc nofollow" target="_blank">æµ‹è¯•å¼‚å¸¸</a>ã€‚</p><p id="44ab" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä¾‹å¦‚:</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="e755" class="nl lm it nh b be nm nn l no np">import pytest<br/><br/>def divide(a, b):<br/>    """Divide to numbers"""<br/>    return a/b<br/><br/>def test_zero_division():<br/>    with pytest.raises(ZeroDivisionError):<br/>        divide(1,0)<br/>def test_type_error():<br/>    with pytest.raises(TypeError):<br/>        divide("abc",10)</span></pre><p id="dcff" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://docs.pytest.org/en/7.1.x/how-to/assert.html#assertions-about-expected-exceptions" rel="noopener ugc nofollow" target="_blank">https://docs . pytest . org/en/7.1 . x/how-to/assert . html # assertions-about-expected-exceptions</a></p><h1 id="4def" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">3.æµ‹è¯•è®°å½•/æ‰“å°</h1><p id="44ae" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">PyTest å…è®¸æ‚¨æµ‹è¯•ä»£ç ä¸­çš„æ‰“å°å’Œæ—¥å¿—è®°å½•è¯­å¥ã€‚</p><p id="4c14" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æœ‰ä¸¤ä¸ªå†…ç½®çš„ PyTest fixturesï¼Œ<a class="ae kf" href="https://docs.pytest.org/en/6.2.x/reference.html#std-fixture-capsys" rel="noopener ugc nofollow" target="_blank"> capsys </a>å’Œ<a class="ae kf" href="https://docs.pytest.org/en/6.2.x/reference.html#std-fixture-caplog" rel="noopener ugc nofollow" target="_blank"> caplog </a>ï¼Œå¯ç”¨äºè·Ÿè¸ªåŠŸèƒ½æ‰“å°åˆ°ç»ˆç«¯çš„ä¿¡æ¯ã€‚</p><h2 id="8e84" class="nu lm it bd ln nv nw dn lr nx ny dp lv kr nz oa lz kv ob oc md kz od oe mh of bi translated">æµ‹è¯•æ‰“å°è¾“å‡º</h2><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="85df" class="nl lm it nh b be nm nn l no np">def printing_func(name):<br/>    print(f"Hello {name}")</span></pre><pre class="nq ng nh ni bn nj nk bi"><span id="c583" class="nl lm it nh b be nm nn l no np">def test_printing_func(capsys):<br/>    printing_func(name="John")<br/>    # use the capsys fixture to record terminal output<br/>    output = capsys.readouterr()<br/>    assert output.out == "Hello John\n"</span></pre><p id="e379" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://docs.pytest.org/en/6.2.x/reference.html#std-fixture-capsys" rel="noopener ugc nofollow" target="_blank">https://docs . py test . org/en/6.2 . x/reference . html # STD-fixture-cap sys</a></p><h2 id="b529" class="nu lm it bd ln nv nw dn lr nx ny dp lv kr nz oa lz kv ob oc md kz od oe mh of bi translated">æµ‹è¯•æ—¥å¿—è¾“å‡º</h2><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="49ec" class="nl lm it nh b be nm nn l no np">import logging<br/><br/>def logging_func():<br/>    logging.info("Running important function")<br/>    # some more code...<br/>    logging.info("Function completed")<br/><br/><br/>def test_logging_func(caplog):<br/>    # use the caplog fixture to record logging records<br/>    caplog.set_level(logging.INFO)<br/>    logging_func()<br/>    records = caplog.records<br/>    # first message<br/>    assert records[0].levelname == 'INFO'<br/>    assert records[0].message == "Running important function"<br/>    # second message<br/>    assert records[1].levelname == 'INFO'<br/>    assert records[1].message == "Function completed"</span></pre><p id="0d78" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://docs.pytest.org/en/6.2.x/reference.html#std-fixture-caplog" rel="noopener ugc nofollow" target="_blank">https://docs . pytest . org/en/6.2 . x/reference . html # STD-fixture-cap log</a></p><h1 id="82e2" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">4.æµ‹è¯•å½©è½¦</h1><p id="abeb" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">æ¶‰åŠæµ®ç‚¹è¿ç®—çš„ç®—æ³•ä¼šåœ¨ Python ä¸­å¼•èµ·é—®é¢˜ã€‚</p><p id="8a1e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä¾‹å¦‚ï¼Œè¿™ä¸ªç®€å•çš„å‡½æ•°ä¼šå¯¼è‡´ä¸€ä¸ªå¥‡æ€ªçš„é”™è¯¯:</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="02a1" class="nl lm it nh b be nm nn l no np">def subtract_floats(a,b):<br/>    return a - b<br/><br/><br/>def test_substract_floats():<br/>    assert subtract_floats(1.2, 1.0) == 0.2</span></pre><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi og"><img src="../Images/af2d8f8ef5fc8870e23c33d7e410b3b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ME3PNI8y6yHUR1UK.png"/></div></div></figure><p id="df1d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">é¢„æœŸçš„è¾“å‡ºåº”è¯¥æ˜¯<code class="fe nr ns nt nh b">0.2</code>ï¼Œä½†æ˜¯ Python è¿”å›äº†<code class="fe nr ns nt nh b">0.19999999999999996</code>ã€‚</p><p id="ddfb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">è¿™ä¸ªå‡½æ•°çš„é€»è¾‘æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œå®ƒåº”è¯¥ä¸ä¼šåœ¨è¿™ä¸ªæµ‹è¯•ç”¨ä¾‹ä¸­å¤±è´¥ã€‚</p><p id="10a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä¸ºäº†æ¶ˆé™¤æµ‹è¯•ä¸­çš„æµ®ç‚¹èˆå…¥è¯¯å·®ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<a class="ae kf" href="https://docs.pytest.org/en/7.1.x/reference/reference.html#pytest-approx" rel="noopener ugc nofollow" target="_blank">è¿‘ä¼¼å‡½æ•°</a></p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="5c1b" class="nl lm it nh b be nm nn l no np">import pytest<br/><br/>def test_substract_floats():<br/>    assert subtract_floats(1.2, 1.0) == pytest.approx(0.2)</span></pre><p id="c549" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æµ‹è¯•ç°åœ¨é€šè¿‡äº†ã€‚</p><p id="3e39" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æ³¨æ„ï¼Œæ‚¨ä¹Ÿå¯ä»¥å°†<code class="fe nr ns nt nh b">approx</code>å‡½æ•°åº”ç”¨äº numpy æ•°ç»„ã€‚è¿™åœ¨æ¯”è¾ƒæ•°ç»„å’Œæ•°æ®å¸§æ—¶å¾ˆæœ‰ç”¨ã€‚</p><p id="82bd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä¾‹å¦‚:</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="a3ee" class="nl lm it nh b be nm nn l no np">import pytest<br/>import numpy as np<br/><br/>np.array([0.1, 0.2]) + np.array([0.2, 0.4]) == pytest.approx(np.array([0.3, 0.6]))                                                          </span></pre><p id="c5da" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://docs.pytest.org/en/7.1.x/reference/reference.html#pytest-approx" rel="noopener ugc nofollow" target="_blank">https://docs . py test . org/en/7.1 . x/reference/reference . html # py test-approx</a></p><h1 id="f5b4" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">èŠ‚çœæ‚¨æ—¶é—´çš„æç¤ºâ³</h1><h1 id="d7fb" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">5.é€šè¿‡åªè¿è¡ŒæŸäº›æµ‹è¯•æ¥èŠ‚çœæ—¶é—´</h1><p id="5add" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">è¿è¡Œæµ‹è¯•åº”è¯¥æœ‰åŠ©äºæ‚¨çš„å·¥ä½œæµç¨‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªéšœç¢ã€‚é•¿æ—¶é—´è¿è¡Œçš„æµ‹è¯•å¥—ä»¶ä¼šé™ä½æ‚¨çš„é€Ÿåº¦ï¼Œè®©æ‚¨æ— æ³•å®šæœŸè¿è¡Œæµ‹è¯•ã€‚</p><p id="26dc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">é€šå¸¸ï¼Œæ‚¨ä¸éœ€è¦åœ¨æ¯æ¬¡è¿›è¡Œæ›´æ”¹æ—¶éƒ½è¿è¡Œæ•´ä¸ªæµ‹è¯•å¥—ä»¶ï¼Œå°¤å…¶æ˜¯å½“æ‚¨åªå¤„ç†ä»£ç åº“çš„ä¸€å°éƒ¨åˆ†æ—¶ã€‚</p><p id="d167" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">å› æ­¤ï¼Œèƒ½å¤Ÿè¿è¡Œä¸æ‚¨æ­£åœ¨å¤„ç†çš„ä»£ç ç›¸å…³çš„æµ‹è¯•å­é›†æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚</p><p id="97dc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">PyTest æä¾›äº†ä¸€äº›é€‰é¡¹æ¥é€‰æ‹©è¦è¿è¡Œçš„æµ‹è¯•:</p><h2 id="3130" class="nu lm it bd ln nv nw dn lr nx ny dp lv kr nz oa lz kv ob oc md kz od oe mh of bi translated">ä½¿ç”¨<code class="fe nr ns nt nh b">-k</code>æ ‡å¿—</h2><p id="7e9d" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">åœ¨è¿è¡Œ PyTest æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code class="fe nr ns nt nh b">-k</code>æ ‡å¿—æ¥åªè¿è¡ŒåŒ¹é…ç»™å®šå­ä¸²çš„æµ‹è¯•ã€‚</p><p id="3dec" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰ä»¥ä¸‹æµ‹è¯•:</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="46c5" class="nl lm it nh b be nm nn l no np">def test_preprocess_categorical_columns():<br/>    ...<br/><br/>def test_preprocess_numerical_columns():<br/>    ...<br/><br/>def test_preprocess_text():<br/>    ...<br/><br/>def test_train_model():<br/>    ...</span></pre><p id="3246" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åªè¿è¡ŒåŒ…å«å­å­—ç¬¦ä¸²' categorical 'çš„ç¬¬ä¸€ä¸ªæµ‹è¯•:</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="187d" class="nl lm it nh b be nm nn l no np"># run first test only<br/>pytest -k categorical</span></pre><p id="9da3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æ‚¨å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåªè¿è¡ŒåŒ…å«åç§°â€œé¢„å¤„ç†â€çš„æµ‹è¯•(å‰ä¸‰ä¸ªæµ‹è¯•):</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="318e" class="nl lm it nh b be nm nn l no np"># run first three tests only<br/>pytest -k preprocess</span></pre><p id="5b37" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">é€»è¾‘è¡¨è¾¾å¼ä¹Ÿæ˜¯å…è®¸çš„ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢å°†è¿è¡ŒåŒ…å«â€œé¢„å¤„ç†â€çš„æµ‹è¯•ï¼Œä½†æ’é™¤åŒ…å«â€œæ–‡æœ¬â€çš„æµ‹è¯•ã€‚è¿™å°†è¿è¡Œå‰ä¸¤ä¸ªæµ‹è¯•ï¼Œä½†ä¸ä¼šè¿è¡Œç¬¬ä¸‰ä¸ª:</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="9882" class="nl lm it nh b be nm nn l no np"># run first two tests only<br/>pytest -k "preprocess and not text"</span></pre><p id="500b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">å‘½ä»¤è¡Œæ ‡å¿—æ–‡æ¡£ä¸­æä¾›äº†å¯¹<code class="fe nr ns nt nh b">-k</code>æ ‡å¿—çš„æœ‰æ•ˆçŸ­è¯­çš„å®Œæ•´è§£é‡Š:<a class="ae kf" href="https://docs.pytest.org/en/7.2.x/reference/reference.html#command-line-flags" rel="noopener ugc nofollow" target="_blank">https://docs . pytest . org/en/7.2 . x/reference/reference . html #å‘½ä»¤è¡Œæ ‡å¿—</a></p><h2 id="9e07" class="nu lm it bd ln nv nw dn lr nx ny dp lv kr nz oa lz kv ob oc md kz od oe mh of bi translated">åœ¨å•ä¸ªæµ‹è¯•æ–‡ä»¶ä¸­è¿è¡Œæµ‹è¯•</h2><p id="9bd9" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">å¦‚æœæ‚¨çš„æµ‹è¯•è¢«æ‹†åˆ†åˆ°å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨è¿è¡Œ PyTest æ—¶æ˜¾å¼ä¼ é€’æ–‡ä»¶åæ¥ä»å•ä¸ªæ–‡ä»¶ä¸­è¿è¡Œæµ‹è¯•:</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="77ee" class="nl lm it nh b be nm nn l no np"># only run tests defined in 'tests/test_file1.py' file<br/>pytest tests/test_file1.py</span></pre><h2 id="4a38" class="nu lm it bd ln nv nw dn lr nx ny dp lv kr nz oa lz kv ob oc md kz od oe mh of bi translated">ä½¿ç”¨æ ‡è®°</h2><p id="d09c" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ pytestâ€œæ ‡è®°â€æ¥æ ‡è®°æŸäº›æµ‹è¯•ã€‚è¿™å¯¹äºæ ‡è®°â€œæ…¢â€æµ‹è¯•å¾ˆæœ‰ç”¨ï¼Œç„¶åæ‚¨å¯ä»¥ç”¨<code class="fe nr ns nt nh b">-m</code>æ ‡å¿—å°†å…¶æ’é™¤ã€‚</p><p id="0ff6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æ¯”å¦‚è¯´ã€‚</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="3ab5" class="nl lm it nh b be nm nn l no np">import time<br/>import pytest<br/><br/>def my_slow_func():<br/>    # some long running code...<br/>    time.sleep(5)<br/>    return True<br/><br/>@pytest.mark.slow<br/>def test_my_slow_func():<br/>    assert my_slow_func()</span></pre><p id="c775" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe nr ns nt nh b">my_slow_func</code>å°†æ¯”å…¶ä»–æµ‹è¯•èŠ±è´¹æ›´é•¿çš„æ—¶é—´ã€‚</p><p id="3d53" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">åœ¨ä½¿ç”¨äº†<code class="fe nr ns nt nh b">@pytest.mark.slow</code>è£…é¥°å™¨ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="fe nr ns nt nh b">-m</code>æ ‡å¿—æ¥æ’é™¤æ¯æ¬¡è¿è¡Œè¿™ä¸ªæµ‹è¯•:</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="6051" class="nl lm it nh b be nm nn l no np"># exclude running tests marked as slow<br/>pytest -m "not slow"</span></pre><p id="355f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">å¦‚æœä½ åœ¨æŸäº›æƒ…å†µä¸‹éœ€è¦è·³è¿‡æµ‹è¯•ï¼Œæ ‡è®°ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„ CI æ„å»ºä½¿ç”¨å¤šä¸ªç‰ˆæœ¬çš„ Python è¿è¡Œæµ‹è¯•ï¼Œå¹¶ä¸”æ‚¨çŸ¥é“æŸä¸ªæµ‹è¯•å°†ä¼šåœ¨æŸä¸ªç‰ˆæœ¬çš„ Python ä¸Šå¤±è´¥ã€‚</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="0b4c" class="nl lm it nh b be nm nn l no np">import sys<br/><br/>@pytest.mark.skipif(sys.version_info &lt; (3, 10), reason="requires python3.10 or higher")<br/>def test_function():<br/>    ...</span></pre><p id="58c8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://docs.pytest.org/en/7.1.x/example/markers.html" rel="noopener ugc nofollow" target="_blank">https://docs.pytest.org/en/7.1.x/example/markers.html</a>T12<a class="ae kf" href="https://docs.pytest.org/en/7.1.x/how-to/skipping.html" rel="noopener ugc nofollow" target="_blank">https://docs.pytest.org/en/7.1.x/how-to/skipping.html</a></p><h1 id="f8d0" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">6.ä»…é‡æ–°è¿è¡Œå¤±è´¥çš„æµ‹è¯•</h1><p id="e68e" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">å½“æ‚¨è¿è¡Œæ•´ä¸ªæµ‹è¯•å¥—ä»¶æ—¶ï¼Œæ‚¨å¯èƒ½ä¼šå‘ç°å°‘æ•°æµ‹è¯•å¤±è´¥äº†ã€‚</p><p id="624d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä¸€æ—¦æ‚¨è°ƒè¯•äº†é—®é¢˜å¹¶æ›´æ–°äº†ä»£ç ï¼Œè€Œä¸æ˜¯å†æ¬¡è¿è¡Œæ•´ä¸ªæµ‹è¯•å¥—ä»¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code class="fe nr ns nt nh b">--lf</code>æ ‡å¿—åªè¿è¡Œä¸Šæ¬¡è¿è¡Œå¤±è´¥çš„æµ‹è¯•ã€‚</p><p id="be47" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">åœ¨å†æ¬¡è¿è¡Œæ•´ä¸ªæµ‹è¯•å¥—ä»¶ä¹‹å‰ï¼Œæ‚¨å¯ä»¥éªŒè¯æ›´æ–°çš„ä»£ç æ˜¯å¦é€šè¿‡äº†è¿™äº›æµ‹è¯•ã€‚</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="43f7" class="nl lm it nh b be nm nn l no np"># only run tests which failed on last run<br/>pytest --lf</span></pre><p id="1e3d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æˆ–è€…ï¼Œæ‚¨ä»ç„¶å¯ä»¥è¿è¡Œæ•´ä¸ªæµ‹è¯•å¥—ä»¶ï¼Œä½†æ˜¯ä½¿ç”¨<code class="fe nr ns nt nh b">--ff</code>æ ‡å¿—ä»ä¸Šæ¬¡å¤±è´¥çš„æµ‹è¯•å¼€å§‹ã€‚</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="1bde" class="nl lm it nh b be nm nn l no np"># run all tests but run failed tests first<br/>pytest --ff</span></pre><p id="a38e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://docs.pytest.org/en/7.1.x/how-to/cache.html#rerunning-only-failures-or-failures-first" rel="noopener ugc nofollow" target="_blank">https://docs . pytest . org/en/7.1 . x/how-to/cache . html # re running-only-failures-or-failures-first</a></p><h1 id="fa47" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">èŠ‚çœæ‚¨ç¼–å†™ä»£ç çš„æŠ€å·§ğŸš€</h1><h1 id="2fad" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">7.å‚æ•°åŒ–æµ‹è¯•</h1><p id="aa36" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">å½“æ‚¨æƒ³è¦æµ‹è¯•ç‰¹å®šå‡½æ•°çš„å¤šä¸ªä¸åŒè¾“å…¥æ—¶ï¼Œäººä»¬é€šå¸¸ä¼šåœ¨æµ‹è¯•å‡½æ•°ä¸­ç¼–å†™å¤šä¸ª assert è¯­å¥ã€‚ä¾‹å¦‚:</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="c460" class="nl lm it nh b be nm nn l no np">def remove_special_characters(input_string):<br/>    return re.sub(r"[^A-Za-z0-9]+", "", input_string)<br/><br/><br/>def test_remove_special_characters():<br/>    assert remove_special_characters("hi*?.") == "hi"<br/>    assert remove_special_characters("f*()oo") == "foo"<br/>    assert remove_special_characters("1234bar") == "bar"<br/>    assert remove_special_characters("") == ""</span></pre><p id="83e5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">åœ¨ PyTest ä¸­ä½¿ç”¨â€œå‚æ•°åŒ–æµ‹è¯•â€æœ‰ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•:</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="fa62" class="nl lm it nh b be nm nn l no np">import pytest<br/><br/>@pytest.mark.parametrize(<br/>    "input_string,expected",<br/>    [<br/>        ("hi*?.", "hi"),<br/>        ("f*()oo", "foo"),<br/>        ("1234bar", "1234bar"),<br/>        ("", ""),<br/>    ],<br/>)<br/>def test_remove_special_characters(input_string, expected):<br/>    assert remove_special_characters(input_string) == expected</span></pre><p id="6ade" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">è¿™æœ‰åˆ©äºå‡å°‘é‡å¤ä»£ç ã€‚æ­¤å¤–ï¼ŒPyTest ä¸ºæ¯ä¸ªå‚æ•°åŒ–çš„è¾“å…¥è¿è¡Œå•ç‹¬çš„æµ‹è¯•ã€‚å› æ­¤ï¼Œå¦‚æœå…¶ä¸­ä¸€é¡¹æµ‹è¯•å¤±è´¥ï¼Œå°†æ›´å®¹æ˜“è¯†åˆ«ã€‚ç„¶è€Œï¼Œåœ¨ä½¿ç”¨å¤šä¸ª assert è¯­å¥çš„åŸå§‹å®ç°ä¸­ï¼ŒPyTest å°†å…¶ä½œä¸ºå•ä¸ªæµ‹è¯•è¿è¡Œã€‚å¦‚æœä»»ä½•æ–­è¨€è¯­å¥å¤±è´¥ï¼Œæ•´ä¸ªæµ‹è¯•å°†â€œå¤±è´¥â€ã€‚</p><h1 id="c3bb" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">8.ä»æ–‡æ¡£å­—ç¬¦ä¸²è¿è¡Œæµ‹è¯•</h1><p id="0f57" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">å¦ä¸€ä¸ªå¾ˆé…·çš„æŠ€å·§æ˜¯ç›´æ¥ä» docstrings å®šä¹‰å’Œè¿è¡Œæµ‹è¯•ã€‚</p><p id="37af" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æ‚¨å¯ä»¥å¦‚ä¸‹å®šä¹‰æ–‡æ¡£å­—ç¬¦ä¸²ä¸­çš„æµ‹è¯•ç”¨ä¾‹:</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="7c20" class="nl lm it nh b be nm nn l no np">def add(a, b):<br/>    """Add two numbers<br/><br/>    &gt;&gt;&gt; add(2,2)<br/>    4<br/>    """<br/>    return a + b</span></pre><p id="d6cc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ç„¶åï¼Œåœ¨è¿è¡Œ<code class="fe nr ns nt nh b">pytest</code>å‘½ä»¤æ—¶ï¼Œé€šè¿‡æ·»åŠ <code class="fe nr ns nt nh b">--doctest-modules</code>æ ‡å¿—ï¼Œæ‚¨å¯ä»¥å°† docstring æµ‹è¯•åŒ…å«åˆ°æ‚¨çš„æµ‹è¯•å¥—ä»¶ä¸­ã€‚</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="03c7" class="nl lm it nh b be nm nn l no np">pytest --doctest-modules</span></pre><p id="9c32" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">åœ¨ docstrings ä¸­å®šä¹‰æµ‹è¯•å¯¹ä½¿ç”¨æ‚¨çš„ä»£ç çš„å…¶ä»–å¼€å‘äººå‘˜éå¸¸æœ‰å¸®åŠ©ï¼Œå› ä¸ºå®ƒåœ¨å‡½æ•°å®šä¹‰ä¸­æ˜ç¡®æ˜¾ç¤ºäº†å‡½æ•°çš„é¢„æœŸè¾“å…¥å’Œè¾“å‡ºã€‚</p><p id="d8f8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æˆ‘å‘ç°è¿™å¯¹äºä½¿ç”¨â€œç®€å•â€æ•°æ®ç»“æ„ä½œä¸ºè¾“å…¥å’Œè¾“å‡ºçš„å‡½æ•°éå¸¸æœ‰æ•ˆã€‚è€Œä¸æ˜¯ç¼–å†™å‘æµ‹è¯•å¥—ä»¶æ·»åŠ æ›´å¤šä»£ç çš„å…¨é¢æµ‹è¯•ã€‚</p><p id="7610" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://docs.pytest.org/en/7.1.x/how-to/doctest.html#how-to-run-doctests" rel="noopener ugc nofollow" target="_blank">https://docs . pytest . org/en/7.1 . x/how-to/doctest . html # how-to-run-doc tests</a></p><h1 id="9171" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">9.å†…ç½® pytest å¤¹å…·</h1><p id="806a" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">PyTest åŒ…æ‹¬è®¸å¤šéå¸¸æœ‰ç”¨çš„å†…ç½®è£…ç½®ã€‚</p><p id="fb85" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æˆ‘ä»¬åœ¨æŠ€å·§ 3 ä¸­ç®€è¦ä»‹ç»äº†å…¶ä¸­çš„ä¸€äº›è£…ç½®â€”â€”capsys å’Œ cap logâ€”â€”ä½†æ˜¯å®Œæ•´çš„åˆ—è¡¨å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°:<a class="ae kf" href="https://docs.pytest.org/en/stable/reference/fixtures.html#built-in-fixtures" rel="noopener ugc nofollow" target="_blank">https://docs . pytest . org/en/stable/reference/fixtures . html # built-in-fixtures</a></p><p id="8211" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æ‚¨çš„æµ‹è¯•å¯ä»¥é€šè¿‡ç®€å•åœ°å°†å®ƒä»¬ä½œä¸ºå‚æ•°æ·»åŠ åˆ°æµ‹è¯•å‡½æ•°ä¸­æ¥è®¿é—®è¿™äº›è£…ç½®ã€‚</p><p id="d678" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">åœ¨æˆ‘çœ‹æ¥ï¼Œä¸¤ä¸ªæœ€æœ‰ç”¨çš„å†…ç½®å¤¹å…·æ˜¯<code class="fe nr ns nt nh b">request</code>å¤¹å…·å’Œ<code class="fe nr ns nt nh b">tmp_path_factory</code>å¤¹å…·ã€‚</p><p id="d9f4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹æˆ‘å…³äºä½¿ç”¨<code class="fe nr ns nt nh b">request</code>å¤¹å…·åœ¨å‚æ•°åŒ–æµ‹è¯•ä¸­ä½¿ç”¨<a class="ae kf" href="https://engineeringfordatascience.com/posts/pytest_fixtures_with_parameterize/" rel="noopener ugc nofollow" target="_blank">å¤¹å…·çš„æ–‡ç« ã€‚</a></p><p id="7f20" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe nr ns nt nh b">tmp_path_factory</code> fixture å¯ä»¥ç”¨æ¥åˆ›å»ºè¿è¡Œæµ‹è¯•çš„ä¸´æ—¶ç›®å½•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ­£åœ¨æµ‹è¯•ä¸€ä¸ªéœ€è¦å°†æ–‡ä»¶ä¿å­˜åˆ°æŸä¸ªç›®å½•çš„å‡½æ•°ã€‚</p><p id="0fce" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://docs.pytest.org/en/stable/reference/fixtures.html#built-in-fixtures" rel="noopener ugc nofollow" target="_blank">https://docs . pytest . org/en/stable/reference/fixtures . html #å†…ç½®å›ºå®šè£…ç½®</a><br/><a class="ae kf" href="https://docs.pytest.org/en/7.1.x/how-to/tmp_path.html#the-tmp-path-factory-fixture" rel="noopener ugc nofollow" target="_blank">https://docs . pytest . org/en/7.1 . x/how-to/tmp _ path . html # the-tmp-path-factory-fixture</a></p><h1 id="dfce" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">å¸®åŠ©è°ƒè¯•çš„æç¤º</h1><h1 id="0e8c" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">10.å¢åŠ æµ‹è¯•çš„å†—é•¿åº¦</h1><p id="9ef3" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">PyTest çš„é»˜è®¤è¾“å‡ºå¯èƒ½éå¸¸å°ã€‚å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œå¢åŠ ç»ˆç«¯è¾“å‡ºä¸­æä¾›çš„ä¿¡æ¯é‡ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚</p><p id="8954" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨è¯¦ç»†æ ‡å¿—<code class="fe nr ns nt nh b">-vv</code>æ¥æ·»åŠ </p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="af24" class="nl lm it nh b be nm nn l no np"># increase the amount of information provided by PyTest in the terminal output<br/>pytest -vv</span></pre><p id="cb1e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://docs.pytest.org/en/7.2.x/reference/reference.html#command-line-flags" rel="noopener ugc nofollow" target="_blank">https://docs . py test . org/en/7.2 . x/reference/reference . html #å‘½ä»¤è¡Œæ ‡å¿—</a></p><h1 id="d489" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">11.æ˜¾ç¤ºæµ‹è¯•æŒç»­æ—¶é—´</h1><p id="73f9" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">å¦‚æœæ‚¨çš„æµ‹è¯•å¥—ä»¶éœ€è¦å¾ˆé•¿æ—¶é—´æ¥è¿è¡Œï¼Œæ‚¨å¯èƒ½æƒ³è¦äº†è§£å“ªäº›æµ‹è¯•è¿è¡Œçš„æ—¶é—´æœ€é•¿ã€‚ç„¶åï¼Œä½ å¯ä»¥å°è¯•ä¼˜åŒ–è¿™äº›æµ‹è¯•ï¼Œæˆ–è€…ä½¿ç”¨æ ‡è®°æ¥æ’é™¤å®ƒä»¬ï¼Œå¦‚ä¸Šæ‰€ç¤ºã€‚</p><p id="f9c5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æ‚¨å¯ä»¥ä½¿ç”¨<code class="fe nr ns nt nh b">--durations</code>æ ‡å¿—æ‰¾å‡ºå“ªäº›æµ‹è¯•è¿è¡Œæ—¶é—´æœ€é•¿ã€‚</p><p id="2334" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æ‚¨è¿˜éœ€è¦ä¼ é€’ verbosity æ ‡å¿—æ¥æ˜¾ç¤ºå®Œæ•´çš„æŒç»­æ—¶é—´æŠ¥å‘Šã€‚</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="6859" class="nl lm it nh b be nm nn l no np"># show top 5 longest running tests<br/>pytest --durations=5 -vv</span></pre><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi og"><img src="../Images/a0ccb8d2254f369ffd4cea723b25d189.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*L1k5laNitxtGpT75.png"/></div></div></figure><p id="1a2b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://docs.pytest.org/en/7.2.x/reference/reference.html#command-line-flags" rel="noopener ugc nofollow" target="_blank">https://docs . py test . org/en/7.2 . x/reference/reference . html #å‘½ä»¤è¡Œæ ‡å¿—</a></p><h1 id="a7c3" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">12.åœ¨ä»£ç ä¸­æ˜¾ç¤º print è¯­å¥çš„è¾“å‡º</h1><p id="6c99" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">æœ‰æ—¶ï¼Œæ‚¨ä¼šåœ¨æºä»£ç ä¸­ä½¿ç”¨ print è¯­å¥æ¥å¸®åŠ©è°ƒè¯•å‡½æ•°ã€‚</p><p id="db15" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæµ‹è¯•é€šè¿‡ï¼ŒPytest ä¸ä¼šæ˜¾ç¤ºè¿™äº›æ‰“å°è¯­å¥çš„è¾“å‡ºã€‚</p><p id="3eba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨<code class="fe nr ns nt nh b">-rP</code>æ ‡å¿—æ¥è¦†ç›–è¿™ç§è¡Œä¸ºã€‚</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="49c1" class="nl lm it nh b be nm nn l no np">def my_function_with_print_statements():<br/>    print("foo")<br/>    print("bar")<br/>    return True<br/><br/><br/>def test_my_function_with_print_statements():<br/>    assert my_function_with_print_statements()<br/></span></pre><pre class="nq ng nh ni bn nj nk bi"><span id="8024" class="nl lm it nh b be nm nn l no np"># run tests but show all printed output of passing tests<br/>pytest -rP</span></pre><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi og"><img src="../Images/90af7177302009ebcec4e18015ff0f4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*c50HBfvybCKQdcPg.png"/></div></div></figure><p id="0753" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://docs.pytest.org/en/7.2.x/reference/reference.html#command-line-flags" rel="noopener ugc nofollow" target="_blank">https://docs . py test . org/en/7.2 . x/reference/reference . html #å‘½ä»¤è¡Œæ ‡å¿—</a></p><h1 id="bf67" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">13.ä¸ºå‚æ•°åŒ–æµ‹è¯•åˆ†é… id</h1><p id="eea2" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">è¿è¡Œå‚æ•°åŒ–æµ‹è¯•çš„ä¸€ä¸ªæ½œåœ¨é—®é¢˜æ˜¯ï¼Œå®ƒä»¬åœ¨ç»ˆç«¯è¾“å‡ºä¸­ä»¥ç›¸åŒçš„åç§°å‡ºç°ã€‚å³ä½¿ä»–ä»¬åœ¨æŠ€æœ¯ä¸Šæµ‹è¯•ä¸åŒçš„è¡Œä¸ºã€‚</p><p id="1994" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æ‚¨å¯ä»¥å°† id æ·»åŠ åˆ°æ‚¨çš„å‚æ•°åŒ–æµ‹è¯•ä¸­ï¼Œä¸ºæ¯ä¸ªå‚æ•°åŒ–æµ‹è¯•èµ‹äºˆä¸€ä¸ªå”¯ä¸€çš„åç§°ï¼Œä»¥å¸®åŠ©è¯†åˆ«å®ƒã€‚å®ƒè¿˜å¢åŠ äº†æµ‹è¯•çš„å¯è¯»æ€§ï¼Œå› ä¸ºä½ å¯ä»¥æ¸…æ¥šåœ°çŸ¥é“ä½ è¦æµ‹è¯•ä»€ä¹ˆã€‚</p><p id="1782" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">è¿™é‡Œæœ‰ä¸¤ä¸ªå‘æµ‹è¯•ä¸­æ·»åŠ  id çš„é€‰é¡¹:</p><h2 id="4be1" class="nu lm it bd ln nv nw dn lr nx ny dp lv kr nz oa lz kv ob oc md kz od oe mh of bi translated">é€‰é¡¹ 1:<code class="fe nr ns nt nh b">id</code>å‚æ•°</h2><p id="25f2" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">é‡ç”¨æŠ€å·§ 7 ä¸­çš„å‚æ•°åŒ–ç¤ºä¾‹:</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="9e65" class="nl lm it nh b be nm nn l no np">@pytest.mark.parametrize(<br/>    "input_string,expected",<br/>    [<br/>        ("hi*?.", "hi"),<br/>        ("f*()oo", "foo"),<br/>        ("1234bar", "1234bar"),<br/>        ("", ""),<br/>    ],<br/>    ids=[<br/>        "remove_special_chars_from_end",<br/>        "remove_special_chars_from_middle",<br/>        "ignore_numbers",<br/>        "no_input",<br/>    ],<br/>)<br/>def test_remove_special_characters(input_string, expected):<br/>    assert remove_special_characters(input_string) == expected</span></pre><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oh"><img src="../Images/61c693248af61ad0d339872c13295b17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Q0iI16z8TV6ByVdI.png"/></div></div></figure><h2 id="fe03" class="nu lm it bd ln nv nw dn lr nx ny dp lv kr nz oa lz kv ob oc md kz od oe mh of bi translated">é€‰é¡¹ 2:ä½¿ç”¨<code class="fe nr ns nt nh b">pytest.param</code></h2><p id="4447" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">æˆ–è€…ä½¿ç”¨<code class="fe nr ns nt nh b">pytest.param</code>åŒ…è£…:</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="7561" class="nl lm it nh b be nm nn l no np">@pytest.mark.parametrize(<br/>    "input_string,expected",<br/>    [<br/>        pytest.param("hi*?.", "hi", id="remove_special_chars_from_end"),<br/>        pytest.param("f*()oo", "foo", id="remove_special_chars_from_middle"),<br/>        pytest.param("1234bar", "1234bar", id="ignore_numbers"),<br/>        pytest.param("", "", id="no_input"),<br/>    ],<br/>)<br/>def test_remove_special_characters(input_string, expected):<br/>    assert remove_special_characters(input_string) == expected</span></pre><p id="2035" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘æ›´å–œæ¬¢ä½¿ç”¨é€‰é¡¹ 1ï¼Œå› ä¸ºæˆ‘è®¤ä¸ºå®ƒæ›´æ•´æ´ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨æ­£åœ¨è¿è¡ŒåŒ…å«è®¸å¤šè¡Œçš„å¤§é‡å‚æ•°åŒ–è¾“å…¥ï¼Œé‚£ä¹ˆä½¿ç”¨é€‰é¡¹ 2 å¯èƒ½æ›´å…·å¯è¯»æ€§ã€‚</p><p id="f655" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://docs.pytest.org/en/stable/example/parametrize.html#different-options-for-test-ids" rel="noopener ugc nofollow" target="_blank">https://docs . py test . org/en/stable/example/parameter ize . html # different-options-for-test-ids</a></p><h1 id="e356" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">ç»“è®º</h1><p id="5494" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">PyTest æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„æµ‹è¯•æ¡†æ¶ï¼Œæœ‰å¾ˆå¤šæœ‰ç”¨çš„ç‰¹æ€§ã€‚æ–‡æ¡£é€šå¸¸éå¸¸å¥½ï¼Œæˆ‘å¼ºçƒˆæ¨èæµè§ˆæ›´å¤šä¿¡æ¯å’Œå…¶ä»–ä¼˜ç§€ç‰¹æ€§ã€‚</p><p id="127c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æˆ‘å¸Œæœ›æ‚¨å­¦åˆ°äº†ä¸€äº›æ–°ä¸œè¥¿â€”â€”æˆ‘å¾ˆæƒ³çŸ¥é“æ‚¨è¿˜æœ‰å“ªäº›ä½¿ç”¨ PyTest çš„æŠ€å·§ã€‚</p><p id="d104" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æµ‹è¯•æ„‰å¿«ï¼</p><blockquote class="le lf lg"><p id="240b" class="kg kh lh ki b kj kk kl km kn ko kp kq li ks kt ku lj kw kx ky lk la lb lc ld im bi translated">æœ¬æ–‡æœ€åˆå‘è¡¨äº<a class="ae kf" href="https://engineeringfordatascience.com/posts/tips_for_using_pytest/" rel="noopener ugc nofollow" target="_blank">engineeringfordatascience.com</a></p></blockquote></div></div>    
</body>
</html>