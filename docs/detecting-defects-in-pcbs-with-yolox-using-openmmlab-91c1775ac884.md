# åˆ©ç”¨ OpenMMLab ç”¨ YOLOX æ£€æµ‹ PCB ä¸­çš„ç¼ºé™·

> åŸæ–‡ï¼š<https://towardsdatascience.com/detecting-defects-in-pcbs-with-yolox-using-openmmlab-91c1775ac884>

## ä½¿ç”¨ OpenMMLab å’Œè‘—åçš„ YOLO ç³»åˆ—ä¸­çš„æ–°æ¶æ„ YOLOX è¿›è¡Œå¯¹è±¡æ£€æµ‹ã€‚æˆ‘ä»¬å°†å°è¯•æ£€æµ‹å°åˆ·ç”µè·¯æ¿ä¸­çš„ä¸åŒç¼ºé™·ã€‚

![](img/e6508dbc6d1c3db81119851d63532749.png)

Alexandre DebiÃ¨ve åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šçš„ç…§ç‰‡

# å°åˆ·ç”µè·¯æ¿

æˆ‘çŸ¥é“æˆ‘çŸ¥é“ï¼Œä½ ä¸€å®šä¼šé—®ï¼Œä»€ä¹ˆæ˜¯ PCBï¼Ÿä½ ä¸æ˜¯å—ï¼Ÿå—¯ï¼Œå¯¹äºä¸çŸ¥é“ PCB æ˜¯ä»€ä¹ˆçš„äººæ¥è¯´ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªæ¥è‡ª [*ç»´åŸºç™¾ç§‘*](https://en.wikipedia.org/wiki/Printed_circuit_board) çš„å®šä¹‰:

> ä¸€ä¸ª**å°åˆ·ç”µè·¯æ¿** ( **PCB** )æ˜¯å¯¼ç”µå±‚å’Œç»ç¼˜å±‚çš„å å±‚å¤¹å±‚ç»“æ„ã€‚PCB æœ‰ä¸¤ä¸ªäº’è¡¥çš„åŠŸèƒ½ã€‚ç¬¬ä¸€ç§æ˜¯é€šè¿‡ç„Šæ¥å°†[ç”µå­å…ƒä»¶](https://en.wikipedia.org/wiki/Electronic_component)å›ºå®šåœ¨å¤–å±‚çš„æŒ‡å®šä½ç½®ã€‚ç¬¬äºŒæ˜¯ä»¥å—æ§çš„æ–¹å¼åœ¨å…ƒä»¶çš„ç«¯å­ä¹‹é—´æä¾›å¯é çš„ç”µè¿æ¥(ä»¥åŠå¯é çš„å¼€è·¯),è¿™é€šå¸¸è¢«ç§°ä¸º PCB è®¾è®¡ã€‚

æˆ‘æ•¢æ‰“èµŒï¼Œä½ ä¸€ç”Ÿä¸­è‚¯å®šè‡³å°‘è§è¿‡ä¸€æ¬¡ PCBï¼Œä½†å¯èƒ½æ‡’å¾—çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆã€‚ä½ çœ‹è¿‡ DVD é˜…è¯»å™¨çš„èƒŒé¢å—ï¼Ÿè¿™é‡Œæœ‰ä¸€å¼  DVD é˜…è¯»å™¨ä¸Š PCB çš„å›¾ç‰‡ï¼Œæ¥è‡ª [*ç»´åŸºç™¾ç§‘*](https://en.wikipedia.org/wiki/File:SEG_DVD_430_-_Printed_circuit_board-4276.jpg) *:*

![](img/04cf29d39967c44537a0224ea24667a1.png)

æ¥è‡ª[ç»´åŸºç™¾ç§‘](https://upload.wikimedia.org/wikipedia/commons/a/a4/SEG_DVD_430_-_Printed_circuit_board-4276.jpg)çš„ PCB ç¤ºä¾‹

å¤šæ°¯è”è‹¯éšå¤„å¯è§ã€‚å‡ ä¹æ‰€æœ‰çš„ç”µå­è®¾å¤‡éƒ½æœ‰ä¸€å— PCB éšè—åœ¨å…¶ä¸­ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™äº›å¤šæ°¯è”è‹¯åœ¨è®¾è®¡æ—¶æˆ–ä½¿ç”¨åéƒ½æœ‰ç¼ºé™·ã€‚è¿™é‡Œåˆ—å‡ºäº†ä¸€äº›å¸¸è§çš„ PCB ç¼ºé™·ï¼Œå¦‚äº’è”ç½‘ä¸Šæ‰€åˆ—çš„ï¼Œè¿˜æœ‰ä¸€å¼ æ¥è‡ªâ´.çš„å…è´¹æ•°æ®é›†çš„å›¾ç‰‡

1.  æ‰“å¼€
2.  è¿‡é‡ç„Šæ–™
3.  ç»„ä»¶ç§»ä½
4.  å†·æ¥ç¼
5.  ç„Šæ–™æ¡¥
6.  ç½‘çŠ¶å’Œé£æº…
7.  æŠ¬èµ·çš„å«å­

![](img/5947049a0ce5a21ab3800304b18b6f52.png)

å›¾ 1:æ¥è‡ªâµ[PCB æ•°æ®é›† Github çŸ¥è¯†åº“](https://github.com/tangsanli5201/DeepPCB)çš„ç¤ºä¾‹å›¾åƒ

æˆ‘ä»¬ä¸ä¼šæ·±ç©¶å®ƒä»¬çš„ç¡®åˆ‡å«ä¹‰ï¼Œå› ä¸ºè¿™ä¸æ˜¯è¿™ç¯‡åšå®¢çš„å†…å®¹ã€‚ä½†æ˜¯ï¼Œä»äº†è§£ä¸€ç‚¹è®¡ç®—æœºè§†è§‰å’Œæ·±åº¦å­¦ä¹ çš„è®¡ç®—æœºå·¥ç¨‹å¸ˆçš„è§’åº¦æ¥çœ‹ï¼Œåœ¨ PCB çš„æ•°å­—å›¾åƒä¸­æ£€æµ‹ç¼ºé™·ä¼¼ä¹æ˜¯ä¸€ä¸ªå¯ä»¥è§£å†³çš„é—®é¢˜ã€‚

æˆ‘ä»¬å°†ä½¿ç”¨æ¥è‡ªâ¸çš„ [OpenMMLab](https://openmmlab.com/) çš„ [mmdetection](https://github.com/open-mmlab/mmdetection) â¶æ¥æ£€æµ‹ PCB å›¾åƒä¸­çš„ç¼ºé™·ã€‚OpenMMLabâ¸æ˜¯ä¸€ä¸ªæ·±åº¦å­¦ä¹ åº“ï¼Œæ‹¥æœ‰è®¡ç®—æœºè§†è§‰é¢†åŸŸå¤§å¤šæ•°æœ€æ–°å®ç°çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚å®ƒå®ç°äº†å‡ ä¹æ‰€æœ‰ä¼—æ‰€å‘¨çŸ¥çš„è§†è§‰é—®é¢˜ï¼Œå¦‚åˆ†ç±»ã€å¯¹è±¡æ£€æµ‹&åˆ†å‰²ã€å§¿æ€ä¼°è®¡ã€å›¾åƒç”Ÿæˆã€å¯¹è±¡è·Ÿè¸ªç­‰ç­‰ã€‚

# YOLOX:è¶…è¶Š 2021â·yolo ç³»åˆ—

åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ [YOLOX](https://arxiv.org/abs/2107.08430) â·ï¼Œæˆ‘ä»¬å°†ç”¨ [mmdetection](https://github.com/open-mmlab/mmdetection) â¶.è¿›è¡Œå¾®è°ƒ [YOLOX](https://arxiv.org/abs/2107.08430) â·æ˜¯ 2021 å¹´å‘å¸ƒçš„æœ€å…ˆè¿›çš„è½¦å‹ï¼Œæ˜¯ YOLO ç³»åˆ—çš„æ”¹è¿›ã€‚ä½œè€…åšäº†ä¸€äº›é‡è¦çš„æ”¹è¿›ï¼Œåˆ—ä¸¾å¦‚ä¸‹ã€‚

1.  ç”¨äºæ ‡ç­¾åˆ†é…çš„ SimOTA ç®€ä»‹
2.  ç§»é™¤é”šç®±
3.  ç‰¹åˆ«æ³¨æ„æ•°æ®å¢å¼ºï¼Œå¦‚æŠ–åŠ¨æ··æ·†
4.  ç”¨äºæ£€æµ‹å’Œåˆ†ç±»çš„åˆ†ç¦»å¤´

![](img/ef57262a94ca6e55faea72dbb78af3ab.png)

å›¾äºŒ:ä» [YOLOX æˆªå–çš„å»ºç­‘å›¾:è¶…è¶Š 202](https://arxiv.org/pdf/2107.08430.pdf) â·çš„ YOLO ç³»åˆ—

ä¹‹å‰ä» v3 åˆ° v5 çš„ YOLO ç³»åˆ—éƒ½æœ‰ä¸€ä¸ªå•ä¸€çš„é¢„æµ‹å¤´ï¼ŒåŒ…æ‹¬è¾¹ç•Œæ¡†é¢„æµ‹ã€åˆ†ç±»å¾—åˆ†é¢„æµ‹ä»¥åŠå®¢è§‚å¾—åˆ†é¢„æµ‹ï¼Œå¦‚ä¸Šå›¾ä¸ŠåŠéƒ¨åˆ†æ‰€ç¤ºã€‚

è¿™åœ¨ YOLOXâ·ç³»åˆ—ä¸­æœ‰æ‰€æ”¹å˜ï¼Œä½œè€…é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªåˆ†ç¦»çš„å¤´ï¼Œæ‰€æœ‰é¢„æµ‹éƒ½ä½¿ç”¨å•ç‹¬çš„å¤´ã€‚å¦‚ä¸Šé¢å›¾ 2 çš„ä¸‹åŠéƒ¨åˆ†æ‰€ç¤ºï¼Œæ£€æµ‹å¤´å’Œåˆ†ç±»å¤´ä½äºä¸åŒçš„å¤´ä¸­ã€‚è¿™æœ‰åŠ©äºæ”¹å–„è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ”¶æ•›æ—¶é—´(å¦‚å›¾ 3 æ‰€ç¤º),å¹¶ç•¥å¾®æé«˜æ¨¡å‹ç²¾åº¦ã€‚

![](img/b30776746782611ae081e6775a4e9b7d.png)

å›¾ 3:ä» [YOLOX æˆªå–çš„è®­ç»ƒæŒ‡æ ‡å›¾:è¶…è¶Š 202 â·çš„ YOLO ç³»åˆ—](https://arxiv.org/abs/2107.08430)

ç”±äºè¿™ä¸€ç‚¹ï¼Œæ¨¡å‹çš„é€Ÿåº¦å—åˆ°å½±å“ï¼Œå› ä¸ºå‚æ•°çš„æ•°é‡éšç€åˆ†æˆä¸¤ä¸ªå¤´è€Œæ˜¾è‘—å¢åŠ ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨å›¾ 4 ä¸­çœ‹åˆ°çš„ï¼ŒYOLOX-L æ¯” YOLOv5-L æ…¢ä¸€ç‚¹ã€‚å®ƒè¿˜æœ‰ä¸“é—¨ä¸ºå‚æ•°ä½å¾—å¤šçš„è¾¹ç¼˜è®¾å¤‡æ„å»ºçš„çº³ç±³å’Œå¾®å‹ç‰ˆæœ¬ã€‚

![](img/d1625970a011beed8f61a5893e7079e6.png)

å›¾ 4:ä» [YOLOX æˆªå–çš„é€Ÿåº¦å’Œå°ºå¯¸ä¸ç²¾åº¦çš„å…³ç³»å›¾:è¶…è¶Š 202 â·çš„ YOLO ç³»åˆ—](https://arxiv.org/abs/2107.08430)

ä¸ä¹‹å‰æœ€å…ˆè¿›çš„å¯¹è±¡æ£€æµ‹æ¨¡å‹ç›¸æ¯”ï¼Œå®ƒä»¬åœ¨å¹³å‡ç²¾åº¦æ–¹é¢æœ‰æ‰€æé«˜ï¼ŒFPS ç•¥æœ‰ä¸‹é™ã€‚

![](img/0825c6cdd16bf82e7f0a1a8e45e66b6f.png)

å›¾ 5:ä» [YOLOX æˆªå–çš„ç‰©ä½“æ£€æµ‹æ¨¡å‹å¯¹æ¯”è¡¨:è¶…è¶Š 202 â·çš„ YOLO ç³»åˆ—](https://arxiv.org/abs/2107.08430)

æœ€åï¼Œæ­£å¦‚ä¼Ÿå¤§çš„[è±çº³æ–¯Â·æ‰˜æ²ƒå…¹](https://en.wikipedia.org/wiki/Linus_Torvalds)æ›¾ç»è¯´è¿‡çš„ï¼Œ

> ç©ºè°ˆä¸å€¼é’±ã€‚ç»™æˆ‘çœ‹çœ‹ä»£ç ã€‚

è®©æˆ‘ä»¬ç›´æ¥è·³è¿›æ¥å§ï¼

# ä½¿ç”¨ mmdetection å¾®è°ƒ YOLOX

æˆ‘ä»¬æœ‰ä¸€ä¸ªå¼€æºçš„ PCB ç¼ºé™·æ•°æ®é›†ï¼Œç§°ä¸º [DeepPCBâµ](https://github.com/tangsanli5201/DeepPCB) ã€‚è¯¥æ•°æ®é›†ç”± 1500 ä¸ªå›¾åƒå¯¹ç»„æˆï¼Œæ¯ä¸ªå›¾åƒå¯¹å…·æœ‰æ— ç¼ºé™·çš„æ¨¡æ¿å›¾åƒå’Œå…·æœ‰ç¼ºé™·çš„å›¾åƒï¼Œè¯¥å›¾åƒå…·æœ‰ 6 ç§å¸¸è§ç¼ºé™·ç±»å‹çš„è¾¹ç•Œæ¡†æ³¨é‡Šï¼Œå³ã€‚å¼€è·¯ã€é¼ å’¬ã€çŸ­è·¯ã€æ‚æ•£ã€å‡é“œå’Œé’ˆå­”ã€‚å¦‚æœä½ éœ€è¦çš„è¯ï¼Œä½ å¯ä»¥ä»[æ•°æ®é›†é“¾æ¥](https://github.com/tangsanli5201/DeepPCB) âµä¸­è·å¾—æ›´å¤šå…³äºå®ƒçš„ä¿¡æ¯ã€‚

è¿™äº›å›¾åƒçš„å°ºå¯¸ä¸º 640Ã—640ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯å®Œç¾çš„ï¼Œå› ä¸º YOLOXâ·æ˜¯åœ¨ç›¸åŒçš„å°ºå¯¸ä¸Šè®­ç»ƒçš„ã€‚

# OpenMMLabâ¸

OpenMMLab ä½¿å¾—å¾®è°ƒæœ€å…ˆè¿›çš„æ¨¡å‹å˜å¾—éå¸¸å®¹æ˜“ï¼Œåªéœ€å¾ˆå°‘çš„ä»£ç æ›´æ”¹ã€‚å®ƒæœ‰ä¸€ä¸ªé’ˆå¯¹ç‰¹å®šç”¨ä¾‹çš„ç»¼åˆ APIã€‚æˆ‘ä»¬å°†ä½¿ç”¨ [mmdetectionâ¶](https://github.com/open-mmlab/mmdetection) å¯¹ DeepPCBâµæ•°æ®é›†ä¸Šçš„ YOLOXâ·è¿›è¡Œå¾®è°ƒã€‚

## æ•°æ®é›†æ ¼å¼

> æ³¨æ„:PCB ç¼ºé™·æ•°æ®é›†æ˜¯ä» [DeepPCB Github repo](https://github.com/tangsanli5201/DeepPCB) ä¸­è·å–çš„å¼€æºæ•°æ®é›†ï¼Œå¸¦æœ‰ MIT è®¸å¯è¯ï¼Œå¯åœ¨æ­¤å¤„å‚è€ƒ[ã€‚](https://github.com/tangsanli5201/DeepPCB/blob/master/LICENSE)

æˆ‘ä»¬éœ€è¦å°†æ•°æ®é›†ä¿®æ”¹ä¸º COCO æ ¼å¼æˆ– Pascal VOC æ ¼å¼æ¥é‡æ–°è®­ç»ƒæ¨¡å‹ã€‚è¿™æ˜¯ mmdetectionâ¶åŠ è½½æˆ‘ä»¬çš„è‡ªå®šä¹‰æ•°æ®é›†è¿›è¡Œè®­ç»ƒæ‰€å¿…éœ€çš„ã€‚å‡ºäºåŸ¹è®­ç›®çš„ï¼Œæˆ‘ä»¬å°†é‡‡ç”¨ COCO æ ¼å¼ã€‚ä½ ä¸éœ€è¦éº»çƒ¦åœ°å°†æ•°æ®é›†è½¬æ¢æˆ COCO æ ¼å¼ï¼Œå› ä¸ºå®ƒå·²ç»ä¸ºä½ å®Œæˆäº†ã€‚æ‚¨å¯ä»¥ä»[è¿™é‡Œ](https://drive.google.com/file/d/1-VZgKcMrJ3BUtoKvCM3F5VC0udTX9E1Y/view?usp=sharing)ç›´æ¥ä¸‹è½½è½¬æ¢åçš„æ•°æ®é›†ã€‚æ•´ä¸ªæ•°æ®é›†ä¸ DeepPCBâµçš„ç›¸åŒï¼Œåªæ˜¯å¢åŠ äº†å¸¦æœ‰ç”¨äºè®­ç»ƒçš„ COCO æ ¼å¼æ³¨é‡Šçš„è®­ç»ƒå’Œæµ‹è¯• JSON æ–‡ä»¶ã€‚

æˆ‘ä¸ä¼šç»å†åˆ° COCO æ ¼å¼çš„è½¬æ¢ï¼Œå› ä¸ºä½ å¯ä»¥æ‰¾åˆ°è®¸å¤šæ–‡æ¡£ç»å†è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±åƒåœ¨ [mmdetection æ–‡æ¡£](https://mmdetection.readthedocs.io/en/latest/2_new_data_model.html)ä¸­æåˆ°çš„ä¸€æ ·ã€‚è¯·éšæ„æµè§ˆè„šæœ¬ï¼Œå¦‚æœæ‚¨éœ€è¦ä»»ä½•å¸®åŠ©ï¼Œä¸è¦ä»‹æ„ç•™ä¸‹è¯„è®ºã€‚æŠŠè¿™ä¸ªæ•°æ®é›†è½¬æ¢æˆ COCO æ ¼å¼çš„è„šæœ¬åœ¨è¿™é‡Œ[åˆ†äº«](https://gist.github.com/Praneet9/5c182383466308b5bbb8cceac7b3b95c#file-convert_to_coco-py)ã€‚

å°† DeepPCB æ•°æ®é›†æ³¨é‡Šè½¬æ¢ä¸º COCO æ ¼å¼çš„è„šæœ¬

## æ•°æ®é›†é…ç½®

ä¸‹ä¸€æ­¥æ˜¯ä¿®æ”¹æ•°æ®é›†é…ç½®ï¼Œä»¥ä½¿ç”¨æˆ‘ä»¬çš„è‡ªå®šä¹‰æ•°æ®é›†ã€‚æˆ‘ä»¬å°†éœ€è¦æ·»åŠ /ä¿®æ”¹ç‰¹å®šçš„ä¸œè¥¿ï¼Œå¦‚`number of classes`ã€`annotation paths`ã€`dataset path`ã€`number of epochs`ã€`base config path`ï¼Œä»¥åŠä¸€äº›æ•°æ®åŠ è½½å™¨å‚æ•°ã€‚

æˆ‘ä»¬å°†å¤åˆ¶é¢„å…ˆç¼–å†™çš„ YOLOX-s é…ç½®ï¼Œå¹¶é’ˆå¯¹æˆ‘ä»¬çš„æ•°æ®é›†å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚é…ç½®çš„å…¶ä½™éƒ¨åˆ†ï¼Œå¦‚å¢å¼ºã€ä¼˜åŒ–å™¨å’Œå…¶ä»–è¶…å‚æ•°å°†æ˜¯ç›¸åŒçš„ã€‚

æˆ‘ä»¬ä¸ä¼šåšå¤ªå¤šæ”¹å˜ï¼Œå› ä¸ºè¿™ç¯‡åšå®¢çš„ä¸»è¦ç›®çš„æ˜¯ç†Ÿæ‚‰æ‰‹å¤´çš„é—®é¢˜ï¼Œå°è¯•æœ€å…ˆè¿›çš„ YOLOX æ¶æ„ï¼Œå¹¶è¯•éªŒ mmdetection åº“ã€‚æˆ‘ä»¬å°†æŠŠè¿™ä¸ªæ–‡ä»¶å‘½åä¸º`yolox_s_config.py`ï¼Œå¹¶ç”¨äºè®­ç»ƒã€‚

æˆ‘ä»¬å°†ä¸ºæˆ‘ä»¬çš„é¢„æµ‹å¤´æ·»åŠ `class names`å¹¶æ”¹å˜`number of classes`ã€‚éœ€è¦æ›´æ”¹`base path`ï¼Œå› ä¸ºé…ç½®å°†ä»æ ¹ç›®å½•è€Œä¸æ˜¯`configs`ç›®å½•åŠ è½½ã€‚

```
_base_ = ['configs/_base_/schedules/schedule_1x.py', 'configs/_base_/default_runtime.py']classes = ('open', 'short', 'mousebite', 'spur', 'copper', 'pin-hole')bbox_head = dict(type='YOLOXHead', num_classes=6, in_channels=128, feat_channels=128)
```

æˆ‘ä»¬éœ€è¦ç¨å¾®ä¿®æ”¹ä¸€ä¸‹è®­ç»ƒæ•°æ®é›†åŠ è½½å™¨ï¼Œä»¥ä½¿ç”¨æˆ‘ä»¬çš„`classes`å’Œ`annotations`è·¯å¾„ã€‚

```
train_dataset = dict(
    type='MultiImageMixDataset',
    dataset=dict(
        type=dataset_type,
        classes=classes,
        ann_file='train.json',
        img_prefix='',
        pipeline=[
            dict(type='LoadImageFromFile'),
            dict(type='LoadAnnotations', with_bbox=True)
        ],
        filter_empty_gt=False,
    ),
    pipeline=train_pipeline)
```

æˆ‘ä»¬éœ€è¦å¯¹è¿™é‡Œçš„éªŒè¯å’Œæµ‹è¯•é›†åšåŒæ ·çš„äº‹æƒ…ã€‚æˆ‘ä»¬ä¸æ‰“ç®—åœ¨è¿™é‡Œä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„æµ‹è¯•é›†ï¼Œç›¸åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åŒä¸€ä¸ªæµ‹è¯•é›†è¿›è¡ŒéªŒè¯å’Œæµ‹è¯•ã€‚

```
data = dict(
    samples_per_gpu=8,
    workers_per_gpu=4,
    persistent_workers=True,
    train=train_dataset,
    val=dict(
        type=dataset_type,
        classes=classes,
        ann_file='test.json',
        img_prefix='',
        pipeline=test_pipeline),
    test=dict(
        type=dataset_type,
        classes=classes,
        ann_file='test.json',
        img_prefix='',
        pipeline=test_pipeline))
```

æˆ‘ä»¬å°†åªè®­ç»ƒ 20 ä¸ªæ—¶æœŸçš„æ¨¡å‹ï¼Œå¹¶ä¸”æ¯ 5 ä¸ªæ—¶æœŸå¾—åˆ°éªŒè¯ç»“æœã€‚æˆ‘ä»¬ä¸éœ€è¦å†è®­ç»ƒå®ƒäº†ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ä»…ä»… 20 ä¸ªçºªå…ƒå†…å°±è·å¾—äº†ä¸é”™çš„ç»“æœã€‚è™½ç„¶è¿™ä¸æ˜¯æœ€å¥½çš„æ¨¡å¼ï¼Œä½†ä¸ºäº†åšå®¢ï¼Œè¿™æ˜¯ä¸é”™çš„ã€‚

```
max_epochs = 20
interval = 5
```

ä½ ä¹Ÿå¯ä»¥ä»è¦ç‚¹[è¿™é‡Œ](https://gist.github.com/Praneet9/75f8bd9536455b99b942740b83423d24)å¤åˆ¶æ•´ä¸ªç¼–è¾‘è¿‡çš„é…ç½®ï¼Œå¹¶ç”¨å®ƒæ¥è®­ç»ƒæ¨¡å‹ã€‚ä½ å¯ä»¥ä»¥åå†è°¢æˆ‘ï¼ğŸ˜‰

## åŸ¹å…»

æˆ‘ä»¬å¯ä»¥å¾ˆå¥½åœ°å¤„ç†æ•°æ®é›†éƒ¨åˆ†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åšçš„æ˜¯è®­ç»ƒæ¨¡å‹ã€‚mmdetectionâ¶å›¾ä¹¦é¦†æœ€å¥½çš„ä¸€ç‚¹æ˜¯ï¼Œæ‰€æœ‰ä¸åŸ¹è®­ç›¸å…³çš„äº‹æƒ…éƒ½å·²ç»ä¸ºä½ åšå¥½äº†ã€‚æ‚¨éœ€è¦åšçš„å°±æ˜¯ä»`tools`ç›®å½•è¿è¡Œè®­ç»ƒè„šæœ¬ï¼Œå¹¶å°†è·¯å¾„ä¼ é€’ç»™æˆ‘ä»¬ä¸Šé¢åˆ›å»ºçš„æ•°æ®é›†é…ç½®ã€‚

```
python3 tools/train.py yolox_s_config.py
```

ç§å•Šï¼ğŸ”¥

åœ¨ mmdetectionâ¶.çš„å¸®åŠ©ä¸‹ï¼Œæ‚¨å·²ç»ä½¿ç”¨ DeepPCBâµæ•°æ®é›†æˆåŠŸè®­ç»ƒäº† YOLOXâ·æ¨¡å‹æ¥æ£€æµ‹ PCB ç¼ºé™·

## æ¨ç†

è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬çš„æ¨¡å‹åœ¨ä¸€äº›ä¾‹å­ä¸Šçš„è¡¨ç°ã€‚ä½ ä¸€å®šæƒ³çŸ¥é“ï¼Œçœ‹ç€è®­ç»ƒæ¨¡å‹æ˜¯å¤šä¹ˆå®¹æ˜“ï¼Œä¸€å®šæœ‰ä¸€ä¸ªå‘½ä»¤æ¥å¯¹å›¾åƒè¿›è¡Œæ¨ç†ï¼Ÿæœ‰ï¼ä½†æ˜¯ï¼Œä¸è¦è®©è®­ç»ƒæ¨¡å‹çš„ç®€å•è¿‡ç¨‹å® åäº†ä½ ã€‚è®©æˆ‘ä»¬å†™ä¸€äº›ç”¨äºæ¨ç†çš„ä»£ç ï¼Œä½†æ˜¯è®©ä½ é«˜å…´çš„æ˜¯ï¼Œå®ƒä¸åˆ° 10 è¡Œä»£ç ã€‚

```
from mmdet.apis import init_detector, inference_detector, show_result_pyplotconfig_file = 'yolox_s_config.py'checkpoint_file = 'best_bbox_mAP_epoch_20.pth'
device = 'cuda:0'# init a detector
model = init_detector(config_file, checkpoint_file, device=device)# inference the demo image
image_path = 'demo.jpg'op = inference_detector(model, image_path)
show_result_pyplot(model, image_path, op, score_thr=0.6)
```

è¿™å°†æ˜¾ç¤ºä¸€ä¸ªå›¾åƒï¼Œå…¶ä¸Šç»˜åˆ¶äº†å¸¦æœ‰é¢„æµ‹ç±»åçš„è¾¹ç•Œæ¡†ã€‚è¿™æ˜¯ä¸€ä¸ªåŒ…å«æ¨¡å‹é¢„æµ‹çš„æ•°æ®é›†çš„ç¤ºä¾‹å›¾åƒã€‚

![](img/4d0d7c017cc36d5204868c90ddf2a676.png)

æ¥è‡ª DeepPCB æ•°æ®é›†çš„é¢„æµ‹ç¤ºä¾‹

æˆ‘ä»¬åšåˆ°äº†ï¼ğŸŠ

ä½ å¯ä»¥åœ¨è°·æ­Œå®éªŒå®¤[è¿™é‡Œ](https://colab.research.google.com/drive/1cbXvQm29koR6MnX_f130NIapGhtw4wYR?usp=sharing)æ‰¾åˆ°è®­ç»ƒå’Œæ¨ç†çš„ä»£ç ã€‚ä½ ä¹Ÿå¯ä»¥å°è¯•æˆ‘ä»¬é¢„å…ˆè®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œå¹¶ç”¨å®ƒè¿›è¡Œæ¨ç†ã€‚é¢„å…ˆè®­ç»ƒå¥½çš„æ¨¡å‹å¯ä»¥åœ¨[è¿™é‡Œ](https://drive.google.com/file/d/19dTqDVHyoRmC3LJdJUypy-zcXb1BhqN0/view?usp=sharing)ä¸‹è½½ã€‚è¯·éšæ„ä½¿ç”¨å®ƒï¼Œå¦‚æœä½ é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ã€‚ä¹æ„å¸®å¿™ï¼ğŸ˜‰

# ç»“è®º

ä»Šå¤©ï¼Œæˆ‘ä»¬äº†è§£äº†ç°å®ä¸–ç•Œä¸­æ™®éå­˜åœ¨çš„ä¸€ä¸ªæ–°é—®é¢˜ï¼Œå¹¶å°è¯•ç”¨åƒ YOLOXâ·.è¿™æ ·çš„è‰ºæœ¯æ¨¡å‹æ¥è§£å†³è¿™ä¸ªé—®é¢˜

æˆ‘ä»¬è¿˜ä½¿ç”¨æ·±åº¦å­¦ä¹ ç¤¾åŒºä¸­é¢†å…ˆçš„å¼€æºåº“ä¹‹ä¸€ mmdetectionâ¶æ¥è®­ç»ƒå¯¹è±¡æ£€æµ‹æ¨¡å‹ã€‚å¦‚æœæˆ‘ä¸æ mmdetectionâ¶æ˜¯å¦‚ä½•å® åäº†æˆ‘ä»¬ï¼Œè®©æˆ‘ä»¬å‡ ä¹ä¸ç”¨ä»»ä½•å®šåˆ¶è„šæœ¬å°±èƒ½å¦‚æ­¤å¿«é€Ÿè½»æ¾åœ°è§£å†³é—®é¢˜ï¼Œé‚£å°†æ˜¯ä¸å…¬å¹³çš„ã€‚

æˆ‘å¸Œæœ›ä½ ä»Šå¤©å­¦åˆ°äº†æ–°ä¸œè¥¿ï¼è¯·éšæ„è¿è¡Œä»£ç ã€‚

åœ¨[æ·±åº¦å­¦ä¹ åˆ†æ](https://deeplearninganalytics.org/)ï¼Œæˆ‘ä»¬éå¸¸çƒ­è¡·äºä½¿ç”¨æœºå™¨å­¦ä¹ æ¥è§£å†³ç°å®ä¸–ç•Œçš„é—®é¢˜ã€‚æˆ‘ä»¬å·²ç»å¸®åŠ©è®¸å¤šä¼ä¸šéƒ¨ç½²äº†åˆ›æ–°çš„åŸºäºäººå·¥æ™ºèƒ½çš„è§£å†³æ–¹æ¡ˆã€‚å¦‚æœä½ çœ‹åˆ°åˆä½œçš„æœºä¼šï¼Œè¯·é€šè¿‡æˆ‘ä»¬çš„ç½‘ç«™[è¿™é‡Œ](https://deeplearninganalytics.org/contact-us/)è”ç³»æˆ‘ä»¬ã€‚

## å‚è€ƒ

1.  PCB å®šä¹‰:ã€https://en.wikipedia.org/wiki/Printed_circuit_board 
2.  PCB å›¾:[https://en . Wikipedia . org/wiki/File:SEG _ DVD _ 430 _-_ Printed _ circuit _ board-4276 . jpg](https://en.wikipedia.org/wiki/File:SEG_DVD_430_-_Printed_circuit_board-4276.jpg)
3.  å¸¸è§ PCB ç¼ºé™·:[https://blog . matric . com/7-PCB ç±»å‹-ç„Šæ¥-ç¼ºé™·-æ³¨æ„-for](https://blog.matric.com/7-types-of-pcb-soldering-defects-to-watch-out-for)
4.  PCB ç¼ºé™·æ•°æ®é›†è®ºæ–‡:[https://arxiv.org/abs/1902.06197](https://arxiv.org/abs/1902.06197)
5.  PCB ç¼ºé™·æ•°æ®é›†:[https://github.com/tangsanli5201/DeepPCB](https://github.com/tangsanli5201/DeepPCB)
6.  mm detection:[https://github.com/open-mmlab/mmdetection](https://github.com/open-mmlab/mmdetection)
7.  YOLOX Paper:[https://arxiv.org/abs/2107.08430](https://arxiv.org/abs/2107.08430)
8.  OpenMMLab:[https://openmmlab.com/](https://openmmlab.com/)