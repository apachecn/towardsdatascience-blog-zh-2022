# ä¸»æˆåˆ†åˆ†æ

> åŸæ–‡ï¼š<https://towardsdatascience.com/principal-component-analysis-fbce2a22c6e0>

## PCA çš„æ¦‚å¿µæ€§è§£é‡ŠåŠå…¶èƒŒåçš„æ•°å­¦åŸç†çš„é€æ­¥æ¼”ç¤ºã€‚Python å’Œ R ä¸­ç»“æœçš„å¯è§†åŒ–

![](img/9db33c847abf77f2e5dd620c9451619f.png)

ä¸¹å°¼å°”Â·ç½—ä¼¯ç‰¹åœ¨[çš„ç…§ç‰‡](https://pixabay.com/sv/photos/prisma-ljus-spektrum-optik-6174502/)

åœ¨æœ¬ä¸»æˆåˆ†åˆ†ææŒ‡å—ä¸­ï¼Œæˆ‘å°†ç»™å‡º PCA çš„æ¦‚å¿µæ€§è§£é‡Šï¼Œå¹¶æä¾›ä¸€æ­¥ä¸€æ­¥çš„æ¼”ç»ƒï¼Œä»¥æ‰¾åˆ°ç”¨äºè®¡ç®—ä¸»æˆåˆ†å’Œä¸»æˆåˆ†å¾—åˆ†çš„ç‰¹å¾å‘é‡ã€‚æˆ‘è¿˜å°†å±•ç¤ºæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ Python å’Œ R ä¸­çš„ *sklearn* åœ¨ iris æ•°æ®é›†ä¸Šæ‰§è¡Œå° PCA åæ‰¾åˆ°å¹¶å¯è§†åŒ–ç»“æœã€‚åœ¨ R ä¸­ä½¿ç”¨ *factoextra* å’Œ *gglot2* åŒ…å¯è§†åŒ– PCA ç»“æœéå¸¸å®¹æ˜“ã€‚

1.  ä»€ä¹ˆæ˜¯ä¸»æˆåˆ†åˆ†æ
2.  PCA èƒŒåçš„æ•°å­¦:å¦‚ä½•è®¡ç®—ä¸»æˆåˆ†
3.  è§£é‡Š PCA çš„ç»“æœ
4.  Python ä¸­çš„ä¸»æˆåˆ†åˆ†æ
5.  ä½¿ç”¨ ggplot2 å’Œ factoextra å¯è§†åŒ– R ä¸­çš„ PCA ç»“æœ

è¯¥æŒ‡å—ä»¥ç¬”è®°æœ¬çš„å½¢å¼æä¾›ï¼Œå…¶ä¸­åŒ…æ‹¬æ›´å¤š python ä»£ç ï¼Œç”¨äºæœ¬ [Github repo](https://github.com/TalkingDataScience/Principal_Component_Analysis) ä¸­çš„æ‰€æœ‰è®¡ç®—å’Œç»˜å›¾ã€‚repo è¿˜åŒ…å«ä¸€ä¸ªç¬”è®°æœ¬ï¼Œå…¶ä¸­åŒ…å« r ä¸­çš„ PCA å’Œå¯è§†åŒ–ã€‚

# 1.ä»€ä¹ˆæ˜¯ä¸»æˆåˆ†åˆ†æ

ä¸»æˆåˆ†åˆ†æå¯ä»¥ä½œä¸ºä¸€ç§é™ç»´æŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥å½¢æˆæ–°çš„å˜é‡ï¼Œè¿™äº›å˜é‡æ˜¯åŸå§‹å˜é‡çš„çº¿æ€§ç»„åˆã€‚å¦‚æœæ‚¨æ­£åœ¨è¿›è¡Œå›å½’å»ºæ¨¡ï¼Œå¹¶ä¸”æ•°æ®ä¸­å­˜åœ¨å¤šé‡å…±çº¿æ€§ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§æœ‰ç”¨çš„æŠ€æœ¯ã€‚å¤šé‡å…±çº¿æ€§å¯èƒ½å¯¼è‡´å‚æ•°çš„é«˜æ ‡å‡†è¯¯å·®ï¼Œä»è€Œå¯¼è‡´ä¸å¯é çš„ä¼°è®¡å€¼ã€‚ä¸»æˆåˆ†åˆ†æå°†å½¢æˆä¸ç›¸å…³çš„æ–°å˜é‡ã€‚

## 1.1 PCA çš„å‡ ä½•è¡¨ç¤º

åœ¨è¿›å…¥ä¸»æˆåˆ†åˆ†æçš„æ•°å­¦ä¹‹å‰ï¼ŒæŸ¥çœ‹ PCA çš„å‡ ä½•è¡¨ç¤ºå¯èƒ½æœ‰åŠ©äºè·å¾—æ¦‚å¿µä¸Šçš„è§£é‡Šã€‚å¸Œæœ›å®ƒèƒ½å¸®åŠ©æˆ‘ä»¬å°†æ•°å­¦è®¡ç®—ä¸ä¸»è¦æˆåˆ†çš„ä¸åŒå…ƒç´ è”ç³»èµ·æ¥ã€‚è€ƒè™‘ä¸‹é¢çš„å›¾è¡¨ï¼Œå®ƒæ˜¾ç¤ºäº†ä¸€äº›æˆ‘ä»¬æƒ³è¦æ‰¾å‡ºä¸»è¦æˆåˆ†çš„æ•°æ®ã€‚

![](img/0d7920d4458715325b6ea8b1477a0098.png)

ä½œè€…å›¾ç‰‡

å¦‚æœæˆ‘ä»¬è§‚å¯Ÿæ•°æ®ç‚¹ï¼Œå¾ˆæ˜æ˜¾ X1 å’Œ X2 éƒ½ä¸æ˜¯è·å–æ•°æ®æœ€å¤§æ–¹å·®çš„è½´ã€‚è·å¾—æœ€å¤§æ–¹å·®çš„è½´æ˜¯ X1*ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨ä¸»æˆåˆ†åˆ†æä¸­æƒ³è¦è¯†åˆ«çš„å¤‡é€‰è½´ã€‚è¿™ä¸ªæ–°çš„è½´å°†æˆä¸ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªä¸»è¦ç»„æˆéƒ¨åˆ†ã€‚åŸå§‹æ•°æ®ç‚¹åœ¨ X1*ä¸Šçš„æŠ•å½±å°†æ˜¯æ•°æ®ç‚¹ç›¸å¯¹äºè¿™ä¸ªæ–° X1*çš„åæ ‡ã€‚

åœ¨ä¸Šé¢çš„å›¾ä¸­ï¼Œæˆ‘ä»¬è®© X1*æ˜¯äºŒç»´å¹³é¢ä¸­çš„ä»»æ„è½´ï¼Œä¸è½´ X1 æˆÎ¸åº¦è§’ã€‚ç‚¹ç›¸å¯¹äºæ–°è½´çš„åæ ‡æ˜¯ç‚¹ç›¸å¯¹äºåŸå§‹è½´çš„åæ ‡çš„çº¿æ€§ç»„åˆ:

![](img/5e06dc652931ebf2819f984fccc0e27e.png)

ç”±æ–°è½´ X1*æ•è·çš„æ€»æ–¹å·®çš„ç™¾åˆ†æ¯”å°†æ ¹æ®è§’åº¦Î¸çš„åº¦æ•°è€Œå˜åŒ–ã€‚è¿™æ„å‘³ç€æœ‰ä¸”åªæœ‰ä¸€ä¸ªå¤‡é€‰è½´ä¼šäº§ç”Ÿä¸€ä¸ªæ–°å˜é‡ï¼Œè¯¥å˜é‡ä¿ç•™æ•°æ®ä¸­çš„æœ€å¤§æ–¹å·®ã€‚è¿™ä¸ªæ–°è½´ä¸èƒ½è§£é‡Šæ•°æ®çš„æ‰€æœ‰æ–¹å·®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¡®å®šç¬¬äºŒä¸ªæ–°è½´ï¼ŒX2*ã€‚ä¸ X1*æ­£äº¤çš„ç¬¬äºŒä¸ªè½´å°†è¯´æ˜ X1*æœªæ•æ‰åˆ°çš„æœ€å¤§æ–¹å·®ã€‚æˆ‘ä»¬å¯ä»¥è®¤ä¸º PCA æ˜¯å°†è½´æ—‹è½¬åˆ°ä¸€ä¸ªä½ç½®ï¼Œä½¿æ–°çš„è½´èƒ½å¤Ÿæ•è·æ•°æ®ä¸­çš„æœ€å¤§æ–¹å·®ã€‚

## 1.2 éœ€è¦ç‰¢è®°çš„é‡è¦æ¦‚å¿µ

ä» PCA çš„å‡ ä½•è¡¨ç¤ºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€äº›é‡è¦çš„è§‚å¯Ÿç»“æœ:

*   å½“æˆ‘ä»¬æ—‹è½¬è½´æ—¶ï¼ŒäºŒç»´ç©ºé—´ä¸­æ•°æ®ç‚¹çš„æ–¹å‘ä¸ä¼šæ”¹å˜ã€‚è¿™æ„å‘³ç€è§‚å¯Ÿå€¼å¯ä»¥ç›¸å¯¹äºåŸå§‹è½´æˆ–æ–°è½´æ¥è¡¨ç¤ºï¼Œè€Œä¸ä¼šä¸¢å¤±ä»»ä½•ä¿¡æ¯ã€‚
*   æ–°è½´ğ‘‹1*å’Œğ‘‹2*æ˜¯æˆ‘ä»¬çš„**ä¸»æˆåˆ†**ï¼Œæ–°å˜é‡çš„å€¼æ˜¯æˆ‘ä»¬çš„ä¸»æˆåˆ†**åˆ†æ•°**ï¼Œæˆ‘ä»¬çš„è½¬æ¢æ•°æ®ã€‚
*   æ–°å˜é‡ X1*å’Œğ‘‹2*æ˜¯æˆ‘ä»¬åŸå§‹ç‰¹å¾ğ‘‹1 å’Œğ‘‹2 çš„çº¿æ€§ç»„åˆï¼Œå®ƒä»¬ä¿æŒå‡å€¼æ ¡æ­£(æˆ–æ ‡å‡†åŒ–ï¼Œå–å†³äºæˆ‘ä»¬ä½¿ç”¨çš„æ•°æ®ä¸­å¿ƒåŒ–æ–¹æ³•)ã€‚
*   æ–°å˜é‡çš„æ€»æ–¹å·®ä¸åŸå§‹å˜é‡ç›¸åŒã€‚
*   æ–°å˜é‡çš„ç›¸å…³æ€§ä¸ºé›¶ã€‚æ¢å¥è¯è¯´ï¼Œä¸»æˆåˆ†ä¹‹é—´ä¸ä¼šæœ‰å¤šé‡å…±çº¿æ€§ã€‚

ä¸Šé¢çš„å‡ ä½•è¡¨ç¤ºåªæœ‰ä¸¤ä¸ªå˜é‡ï¼Œå› ä¸ºå¾ˆéš¾è¯´æ˜æ›´é«˜çš„ç»´åº¦ã€‚ç„¶è€Œï¼Œè¯¥æ–¹æ³•å¯ä»¥å¾ˆå®¹æ˜“åœ°æ‰©å±•åˆ°ä»»ä½•æ•°é‡çš„å˜é‡ *p* ã€‚å…·æœ‰ *p* ä¸ªå˜é‡çš„æ•°æ®é›†å¯ä»¥åœ¨ *p* ç»´ç©ºé—´ä¸­è¡¨ç¤ºï¼Œå…·æœ‰ *p* åŸå§‹è½´å’Œ *p* æ–°è½´ï¼Œä½¿å¾—:

*   æ¯ä¸ªæ–°å˜é‡éƒ½æ˜¯åŸå§‹å˜é‡çš„çº¿æ€§ç»„åˆã€‚
*   é€‰æ‹©ç¬¬ä¸€ä¸ªæ–°å˜é‡æ¥è·å–æ•°æ®é›†ä¸­çš„æœ€å¤§æ–¹å·®ã€‚
*   ç¬¬äºŒä¸ªå°†è¯´æ˜ç¬¬ä¸€ä¸ªæ²¡æœ‰æ•æ‰åˆ°çš„æœ€å¤§æ–¹å·®ã€‚
*   ç¬¬ p ä¸ª*æ–°å˜é‡å°†è§£é‡Š P1 ä¸ªæ–°å˜é‡æœªæ•æ‰åˆ°çš„æ•°æ®ä¸­çš„æœ€å¤§æ–¹å·®ã€‚*
*   æ–°å˜é‡ä¸ç›¸å…³ã€‚

åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ‰¾åˆ°æ–°çš„è½´ï¼Œå¹¶æ‰‹åŠ¨è®¡ç®—ä¸»æˆåˆ†ã€‚æˆ‘ä»¬å°†ä»å˜é‡çš„åæ–¹å·®çŸ©é˜µè®¡ç®—ç‰¹å¾å‘é‡ï¼Œè¿™ç»™å‡ºäº†ç”¨äºå½¢æˆä¸Šè¿°æ–¹ç¨‹çš„æƒé‡ w_ğ‘–ğ‘—(è¿™æ˜¯æˆ‘ä»¬çš„ä¸»åˆ†é‡):

![](img/50cce5a37c5bdac46ffedd753c66adf9.png)

å…¶ä¸­ X1ï¼ŒX2ï¼Œâ€¦ï¼ŒXp æ˜¯ p ä¸ªä¸»æˆåˆ†ï¼Œw_ *ij* æ˜¯ç¬¬ *i* ä¸ªä¸»æˆåˆ†çš„ç¬¬ *j* ä¸ªå˜é‡çš„æƒé‡(ç‰¹å¾å‘é‡)ã€‚

# 2.ä¸»æˆåˆ†åˆ†æçš„æ•°å­¦:å¦‚ä½•è®¡ç®—ä¸»æˆåˆ†

åœ¨ç¬¬ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶ PCA èƒŒåçš„æ•°å­¦ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå°çš„è™šæ‹Ÿæ•°æ®é›†ï¼Œå°åˆ°è¶³ä»¥ç”¨æ‰‹è½»æ¾åœ°è¿›è¡Œè®¡ç®—ã€‚æ•°æ®é›†å°†åŒ…å«ä¸¤ä¸ªè¦ç´  X1 å’Œ X2 ä»¥åŠä¸ƒä¸ªè§‚æµ‹å€¼ã€‚

```
# Create a small datasetdata = pd.DataFrame({'X1':[110, 112, 112, 114, 116, 116, 118], 
                     'X2': [179, 180, 181, 182, 182, 184, 186]})
```

![](img/2c45cceb855f997d0ac259ea41e50e75.png)

ä½œè€…å›¾ç‰‡

## 2.1 å°†æ•°æ®å±…ä¸­

åœ¨è¿›è¡Œä¸»æˆåˆ†åˆ†æä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ•°æ®è¿›è¡Œå‡å€¼æ ¡æ­£æˆ–æ ‡å‡†åŒ–ï¼Œå¹¶ä¸”è¦è®°ä½ï¼Œä¸»æˆåˆ†åˆ†æçš„ç»“æœå¯èƒ½ä¼šå—åˆ°æˆ‘ä»¬ä½¿ç”¨çš„æ–¹æ³•çš„å½±å“ã€‚ä½¿ç”¨å‡å€¼æ ¡æ­£æ•°æ®å°†å…è®¸å•ä¸ªå˜é‡çš„ç›¸å¯¹æ–¹å·®å½±å“ç”¨äºè®¡ç®—ä¸»æˆåˆ†çš„æƒé‡ã€‚æ–¹å·®ç›¸å¯¹äºå…¶ä»–å˜é‡è¾ƒé«˜çš„å˜é‡å°†è·å¾—è¾ƒé«˜çš„æƒé‡ï¼Œæ–¹å·®ç›¸å¯¹äºå…¶ä»–å˜é‡è¾ƒä½çš„å˜é‡å°†è·å¾—è¾ƒä½çš„æƒé‡ã€‚å¦‚æœæˆ‘ä»¬æŠŠæ•°æ®æ ‡å‡†åŒ–ï¼Œæ¯ä¸ªå˜é‡çš„æ–¹å·®éƒ½æ˜¯ä¸€æ ·çš„(å‡å€¼ 0ï¼Œstd/var 1)ã€‚

æ–¹æ³•çš„é€‰æ‹©å¯èƒ½å–å†³äºæ•°æ®å’Œåˆ†æçš„ç›®çš„ç­‰å› ç´ ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬è¦æŸ¥çœ‹æ¶ˆè´¹è€…ä»·æ ¼æŒ‡æ•°çš„é£Ÿå“ä»·æ ¼ï¼Œä¸åŒé£Ÿå“é¡¹ç›®çš„æ–¹å·®å¯èƒ½ä¼šæœ‰å¾ˆå¤§å·®å¼‚ã€‚åœ¨ä¸‹é¢çš„ä¸»æˆåˆ†ä¸­ï¼Œç”±äºè¾ƒé«˜çš„æ–¹å·®ï¼Œé³„æ¢¨æ¯”å…¶ä»–é£Ÿç‰©é¡¹ç›®å…·æœ‰æ›´é«˜çš„å½±å“ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰ç†ç”±ç›¸ä¿¡å¯¹äºä¸€ä¸ªå®¶åº­æ¥è¯´ï¼Œé³„æ¢¨æ¯”å…¶ä»–é£Ÿç‰©æ›´é‡è¦ï¼Œæˆ‘ä»¬åº”è¯¥å°†æ•°æ®æ ‡å‡†åŒ–ï¼Œä»¥é¿å…è¿™ç§äººä¸ºå¢åŠ çš„é³„æ¢¨é‡é‡ã€‚

*PC1 = 0.13 *ç‰›è‚‰+0.85 *ç‰›æ²¹æœ+0.04 *å¤§ç±³+0.36 *ç‰›å¥¶*

å¯èƒ½è¿˜æœ‰å…¶ä»–æƒ…å†µï¼Œæˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡ç‰¹å¾çš„æ–¹å·®ç¡®å®è¡¨æ˜äº†æŸäº›ç‰¹å¾çš„é‡è¦æ€§ï¼Œåœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‡å€¼æ ¡æ­£æ•°æ®ï¼Œå¹¶å…è®¸å¯¹æŸäº›å› ç´ äº§ç”Ÿæ›´é«˜çš„å½±å“ã€‚

å¯¹äºæˆ‘ä»¬çš„è®¡ç®—ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å¹³å‡æ ¡æ­£æ•°æ®ã€‚å‡å€¼æ ¡æ­£æ•°æ®ä»…ä»…æ„å‘³ç€æˆ‘ä»¬ä»å˜é‡çš„æ¯ä¸ªè§‚å¯Ÿå€¼ä¸­å‡å»å˜é‡çš„å‡å€¼:

```
*# Center the data with mean-correction* data_centered = data.apply(lambda x: x-x.mean())
```

![](img/8837413021b1a14fb836ac04cb6d088d.png)

ä½œè€…å›¾ç‰‡

æˆ‘ä»¬å¯ä»¥ç»˜åˆ¶åŸå§‹æ•°æ®å’Œå±…ä¸­æ•°æ®çš„æ•°æ®ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå°†æ•°æ®å±…ä¸­å¹¶ä¸å½±å“æ•°æ®ç‚¹çš„æ–¹å‘ï¼Œåªæ˜¯è½´çš„æ¯”ä¾‹å‘ç”Ÿäº†å˜åŒ–ã€‚æˆ‘ä»¬å°†æ•°æ®é›†ä¸­åœ¨åŸç‚¹å‘¨å›´ï¼Œè¿™å°†æœ‰åŠ©äºæˆ‘ä»¬åœ¨æ—‹è½¬è½´å¯»æ‰¾ä¸»åˆ†é‡æ—¶çš„è®¡ç®—ã€‚

![](img/7a8258880565220b8dafac2c835c0720.png)

ä½œè€…å›¾ç‰‡

## 2.2 è®¡ç®—åæ–¹å·®çŸ©é˜µ

æˆ‘ä»¬å°†ä½¿ç”¨çš„æ–¹æ³•æ˜¯åæ–¹å·®çŸ©é˜µçš„ç‰¹å¾åˆ†è§£ï¼Œå› æ­¤æˆ‘ä»¬é¦–å…ˆéœ€è¦è®¡ç®—çš„æ˜¯åæ–¹å·®çŸ©é˜µã€‚åæ–¹å·®çŸ©é˜µç”±æ¯å¯¹å˜é‡çš„åæ–¹å·®ç»„æˆï¼Œæ¯ä¸ªå˜é‡çš„æ–¹å·®åœ¨ä¸»å¯¹è§’çº¿ä¸Šã€‚

æ•°æ®å±…ä¸­ä¸ä¼šå½±å“è¦ç´ çš„æ–¹å·®æˆ–åæ–¹å·®ã€‚éå±…ä¸­å’Œå±…ä¸­æ•°æ®çš„åæ–¹å·®çŸ©é˜µæ˜¯ç›¸åŒçš„ã€‚æˆ‘ä»¬å¯ä»¥æ£€æŸ¥æƒ…å†µæ˜¯å¦å¦‚æ­¤:

```
*# Print values of the non-centered data and its covariance matrix*
non_centered = np.stack((data['X1'], data['X2']), axis=0)
cov_mat = np.cov(non_centered)
print(non_centered)
print(cov_mat)*# Print values of the centered data and its covariance matrix*
centered = np.stack((data_centered['X1'], data_centered['X2']), axis=0)
cov_mat_centered = np.cov(centered)
print(centered)
print(cov_mat_centered)*Output:*[[110 112 112 114 116 116 118]
 [179 180 181 182 182 184 186]]
[[8\.         6.33333333]
 [6.33333333 5.66666667]][[-4\. -2\. -2\.  0\.  2\.  2\.  4.]
 [-3\. -2\. -1\.  0\.  0\.  2\.  4.]]
[[8\.         6.33333333]
 [6.33333333 5.66666667]]
```

## 2.2.1 æ¯ä¸ªç‰¹æ€§çš„å·®å¼‚

çŸ©é˜µçš„å¯¹è§’çº¿åŒ…å«æ¯ä¸ªç‰¹å¾ X1 å’Œ X2 çš„æ–¹å·®ã€‚å·®å¼‚çš„è®¡ç®—å…¬å¼å¦‚ä¸‹:

![](img/a37df74338411a5ec7e69cb1b64fa079.png)

ç”±äºå±…ä¸­æ•°æ®çš„å¹³å‡å€¼ä¸º 0ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å°†å˜é‡çš„å¹³æ–¹å€¼ç›¸åŠ ã€‚

![](img/ef029c96e33fe34869a5d01260b6cb7c.png)

## ç‰¹å¾çš„åæ–¹å·®

ä¸¤ä¸ªå˜é‡ X1 å’Œ X2 ä¹‹é—´çš„åæ–¹å·®é€šè¿‡ä»¥ä¸‹å…¬å¼è®¡ç®—:

![](img/e832d9e49a9ecc9f79f5258ed467a96c.png)

æˆ‘ä»¬å¯ä»¥æ‰¾åˆ° X1 å’Œ X2 çš„åæ–¹å·®ã€‚åŒæ ·ï¼Œç”±äºå±…ä¸­æ•°æ®çš„å¹³å‡å€¼ä¸º 0ï¼Œæˆ‘ä»¬å¯ä»¥å°† X1 å’Œ X2 ä¸­çš„å€¼ç›¸ä¹˜å¹¶æ±‚å’Œã€‚

![](img/1225af37fc07c503ea1c6a3937dc54e2.png)

è®¡ç®— X1 å’Œ X2 çš„æ–¹å·®å’Œåæ–¹å·®æ˜¾ç¤ºäº† Python ä¸­çš„`np.cov()`å‡½æ•°æ‰“å°çš„ç›¸åŒç»“æœã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒX1 çš„æ–¹å·®å¤§äº X2ï¼Œåæ–¹å·®ä»‹äº X1 å’Œ X2 çš„æ–¹å·®ä¹‹é—´ã€‚

```
[[8\.         6.33333333]  
 [6.33333333 5.66666667]]
```

## 2.3 è®¡ç®—åæ–¹å·®çŸ©é˜µçš„ç‰¹å¾å€¼

ç°åœ¨æˆ‘ä»¬æœ‰äº†åæ–¹å·®çŸ©é˜µï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­è®¡ç®—ç‰¹å¾å€¼ã€‚åœ¨ä¸‹é¢çš„è¡Œåˆ—å¼å…¬å¼ä¸­ï¼Œæˆ‘ä»¬å°†åæ–¹å·®çŸ©é˜µè¡¨ç¤ºä¸º *A* ï¼Œå°†å•ä½çŸ©é˜µè¡¨ç¤ºä¸º *I* ã€‚

![](img/f64d75122fa868ced889e29dcb819d2b.png)

ä»åæ–¹å·®çŸ©é˜µä¸­å‡å»Î»Ã·I çŸ©é˜µå¾—åˆ°ä»¥ä¸‹çŸ©é˜µ

![](img/4a8a533f09a6b70fccfb43432c385923.png)

æˆ‘ä»¬å¯ä»¥ç»§ç»­è®¡ç®—å®ƒçš„è¡Œåˆ—å¼

![](img/3f2ff6259b4d938815a02836933c6be5.png)

ç®€åŒ–åï¼Œæˆ‘ä»¬å¾—åˆ°è¿™ä¸ªäºŒæ¬¡æ–¹ç¨‹

![](img/f649bd26b498c1fbecd9c058fbc6a712.png)

æ±‚è§£ 0ï¼Œæˆ‘ä»¬å¾—åˆ°ğœ†1=0.39 å’ŒÎ»2=13.27ï¼Œè¿™äº›æ˜¯æˆ‘ä»¬åæ–¹å·®çŸ©é˜µçš„**ç‰¹å¾å€¼**ã€‚

## 2.4 è®¡ç®—ç‰¹å¾å‘é‡

ä¸€æ—¦æˆ‘ä»¬æœ‰äº†ç‰¹å¾å€¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¡ç®—è¿™äº›ç‰¹å¾å€¼å¯¹åº”çš„ç‰¹å¾å‘é‡ã€‚ä¸€ä¸ªç‰¹å¾å‘é‡æ˜¯ä¸€ä¸ªéé›¶å‘é‡ï¼Œå®ƒæ»¡è¶³æ–¹ç¨‹ğ´ğ‘£=ğœ†v.è®¡ç®—åæ–¹å·®çŸ©é˜µçš„ç‰¹å¾å‘é‡ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæ–¹ç¨‹ï¼ŒæŠŠåæ–¹å·®çŸ©é˜µä»£å…¥ğ´ï¼ŒæŠŠå…¶ä¸­ä¸€ä¸ªç‰¹å¾å€¼ä»£å…¥Î»ï¼Œå¹¶æŠŠå®ƒä»¬ä¸åˆ—å‘é‡ğ‘£=(ğ‘¥,ğ‘¦).ç›¸ä¹˜æˆ‘ä»¬ä»ç‰¹å¾å€¼Î»=13.27 å¼€å§‹:

![](img/ab1616a75380756c716bfa05c34af7ba.png)

æˆ‘ä»¬å¾—åˆ°ä¸‹é¢çš„æ–¹ç¨‹ç»„:

![](img/16fdef3d9fd488e7743a8e86da231e00.png)

æˆ‘ä»¬å°†ç¬¬ä¸€ä¸ªç­‰å¼ä¸­çš„ 8.0x é¡¹å’Œç¬¬äºŒä¸ªç­‰å¼ä¸­çš„ 5.7y é¡¹ç§»åˆ°ç­‰å¼çš„å³ä¾§ï¼Œæ±‚è§£ yï¼Œå¾—åˆ° y = 0.83x:

ğ‘¦ = 0.83ğ‘¥
0.83ğ‘¥ = y

å¦‚æœå°† x è®¾ä¸º 1ï¼Œy å°†ä¸º 0.83ï¼Œä»è€Œå¾—åˆ°ç‰¹å¾å‘é‡ğ‘£_2:

![](img/283aa964c54b7dbbe6298ba8fd08ab90.png)

è¿™æ˜¯åæ–¹å·®çŸ©é˜µçš„**ç‰¹å¾å‘é‡**ã€‚æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹å…¬å¼å°†å‘é‡å½’ä¸€åŒ–ä¸ºå•ä½é•¿åº¦ï¼Œè¿™æ„å‘³ç€å®ƒçš„é•¿åº¦ä¸º 1:

![](img/f7a1ee2497560f3221e80a27ddb7e019.png)

å½’ä¸€åŒ–åï¼Œç‰¹å¾å‘é‡ v_2 æ˜¯è¿™æ ·çš„ã€‚

![](img/1185701fea73b433d6c851d2bfa2358c.png)

å¦‚æœæˆ‘ä»¬å¯¹å¦ä¸€ä¸ªç‰¹å¾å€¼ğœ†1=0.39 åšæ‰€æœ‰çš„è®¡ç®—ï¼Œæˆ‘ä»¬å¾—åˆ°å¦ä¸€ä¸ªç‰¹å¾å‘é‡ v1:

![](img/4608f072be1169b07db65bf47cf40865.png)

## 2.5 è®¡ç®—ä¸»æˆåˆ†å’Œä¸»æˆåˆ†å¾—åˆ†

æˆ‘ä»¬å°†æœ€å¤§ç‰¹å¾å€¼çš„ç‰¹å¾å‘é‡å…ˆÎ»1>Î»2 é‡æ–°æ’åºã€‚

![](img/59a77d2e79573182880dab172c729cad.png)

è¿™äº›ç‰¹å¾å‘é‡ç°åœ¨å¯ä»¥ç”¨æ¥è½¬æ¢æ•°æ®ï¼Œè®¡ç®—ä¸»æˆåˆ†ã€‚ç‰¹å¾å‘é‡åŒ…å«è¡¨ç¤ºå½¢æˆä¸»åˆ†é‡çš„ç­‰å¼ä¸­çš„æƒé‡ w_ *ijï¼Œ*çš„å€¼ã€‚

![](img/50cce5a37c5bdac46ffedd753c66adf9.png)

æˆ‘ä»¬å°†è¿™ä¸¤ä¸ªç‰¹å¾å‘é‡æ”¾åœ¨ä¸€ä¸ªçŸ©é˜µ E ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çŸ©é˜µä¹˜æ³•å°†æ‰€æœ‰ä¸»æˆåˆ†çš„ç‰¹å¾å‘é‡ä¸æ•´ä¸ªåŸå§‹æ•°æ®é›†ç›¸ä¹˜ã€‚ç¬¬ä¸€åˆ—è¡¨ç¤ºå…·æœ‰æœ€é«˜ç‰¹å¾å€¼çš„ç¬¬ä¸€ç‰¹å¾å‘é‡ï¼Œç¬¬äºŒåˆ—æ˜¯å…·æœ‰ç¬¬äºŒé«˜ç‰¹å¾å€¼çš„ç¬¬äºŒç‰¹å¾å‘é‡ã€‚

![](img/d6c261836fe01f1ba8c27b8e523cdfea.png)

è¿™ä¸ªçŸ©é˜µç°åœ¨å¯ä»¥ç”¨æ¥è½¬æ¢æˆ‘ä»¬çš„ä¸­å¿ƒæ•°æ®ï¼Œå­˜å‚¨åœ¨çŸ©é˜µ Dï¼Œé€šè¿‡ä¹˜ä»¥å®ƒä»¬ã€‚

![](img/fe3f0acae4dc51bc0b6f877cf099efc4.png)

å½“æˆ‘ä»¬å°†åŸå§‹ä¸­å¿ƒæ•°æ®ä¹˜ä»¥ç‰¹å¾å‘é‡æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°æ–°çš„çŸ©é˜µ DEï¼Œå®ƒåŒ…å«è½¬æ¢åçš„æ•°æ®ã€æˆ‘ä»¬çš„**ä¸»æˆåˆ†ã€**å’Œæˆ‘ä»¬çš„**ä¸»æˆåˆ†å¾—åˆ†**ã€‚

![](img/c8d78418140f6a97e12bd6c243eacafd.png)

æ–°çŸ©é˜µ *DE* åŒ…å«æˆ‘ä»¬çš„ä¸»æˆåˆ†ï¼Œå…¶ä¸­æ¯ä¸€åˆ—éƒ½æ˜¯ä¸€ä¸ªä¸»æˆåˆ†ã€‚å·¦æ æ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªä¸»æˆåˆ†ï¼ŒPC1ï¼Œæ•æ‰æ•°æ®ä¸­çš„æœ€å¤§æ–¹å·®ï¼Œå³æ æ˜¯ç¬¬äºŒä¸ªä¸»æˆåˆ†ï¼ŒPC2ã€‚

è¿™äº›å˜æ¢åçš„æ•°æ®ç‚¹çš„å€¼å°±æ˜¯ä¸»æˆåˆ†å¾—åˆ†**ã€‚**è¿™äº›åˆ†æ•°è¡¨ç¤ºä¸»æˆåˆ†ç©ºé—´ä¸­çš„å±…ä¸­æ•°æ®ï¼Œå› ä¸ºå®ƒä»¬å·²ç»è¢«æŠ•å½±åˆ°æ—‹è½¬è½´ï¼Œä»è€Œæœ€å¤§åŒ–æ²¿ç€ç¬¬ä¸€ä¸»æˆåˆ†çš„è½´çš„æ–¹å·®ã€‚ä»åˆ†å€¼å¯ä»¥çœ‹å‡ºï¼ŒPC1 çš„æ–¹å·®æ¯” PC2 å¤§å¾—å¤šã€‚

è¿™ä¸¤ä¸ªæ–°å˜é‡æ˜¯ä¸ç›¸å…³çš„ã€‚

# 3 è§£é‡Šä¸»æˆåˆ†åˆ†æçš„ç»“æœ

## 3.1 è§†è§‰æ¯”è¾ƒ:ç»˜åˆ¶ PCA å‰åçš„æ•°æ®ç‚¹

![](img/a079e8509297deb4dbcff134adc04516.png)

ä½œè€…å›¾ç‰‡

å¦‚æœæˆ‘ä»¬é€šè¿‡è§‚å¯Ÿæ•°æ®ç‚¹å¦‚ä½•è½åœ¨æ–°æ—§è½´ä¸Šæ¥æ¯”è¾ƒåŸå§‹æ•°æ®å’Œä¸»æˆåˆ†çš„æ–¹å·®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç¬¬ä¸€ä¸»æˆåˆ† PC1 åŒ…å«æ¯”åŸå§‹ç‰¹å¾ X1 å¤šå¾—å¤šçš„æ–¹å·®ã€‚

## 3.2 æ•°å€¼æ¯”è¾ƒ:PCA å‰åçš„æ–¹å·®å’Œåæ–¹å·®

![](img/38f0314b1130621d0b367e8ca07744e8.png)

ä½œè€…å›¾ç‰‡

å¦‚æœæˆ‘ä»¬è§‚å¯Ÿæˆ‘ä»¬çš„å˜æ¢æ•°æ®çš„åæ–¹å·®çŸ©é˜µï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸»æˆåˆ† 1 å’Œä¸»æˆåˆ† 2 çš„æ–¹å·®åˆ†åˆ«æ˜¯ 13.27 å’Œ 0.39ï¼Œå¹¶ä¸”å®ƒä»¬ä¹‹é—´æ²¡æœ‰ç›¸å…³æ€§ã€‚

è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸»æˆåˆ†çš„*æ–¹å·®æ˜¯æˆ‘ä»¬ä¹‹å‰æ ¹æ®åŸå§‹æ•°æ®çš„åæ–¹å·®çŸ©é˜µè®¡ç®—çš„ç‰¹å¾å€¼*ã€‚å®Œæˆä¸»æˆåˆ†åˆ†æåï¼Œæ‚¨å°†æŸ¥çœ‹ç‰¹å¾å€¼ï¼Œä»¥å¸®åŠ©ç¡®å®šæå–å¤šå°‘ä¸»æˆåˆ†ç”¨äºæ•°æ®çš„è¿›ä¸€æ­¥åˆ†æ/å»ºæ¨¡ã€‚ç‰¹å¾å€¼ç”¨äºç”Ÿæˆç¢çŸ³å›¾ã€‚

variance=ğœ†1/(ğœ†1+ğœ†2)=13.27/(13.27+0.39)=0.97 çš„ç™¾åˆ†æ¯”

è½¬æ¢åï¼Œç¬¬ä¸€ä¸ªä¸»æˆåˆ†æ•è·äº†æ•°æ®ä¸­æ‰€æœ‰æ–¹å·®çš„ 97%ã€‚åŸå§‹æ•°æ®ä¸­çš„ç‰¹å¾ X1 ä»…æ•è·äº† 58%çš„å˜åŒ–ã€‚

é€šè¿‡è¿›è¡Œè¿™ç§ä¸»æˆåˆ†å˜æ¢ï¼Œæˆ‘ä»¬è·å¾—äº†ä¸¤å¤§å¥½å¤„ã€‚æˆ‘ä»¬å·²ç»æ¶ˆé™¤äº†ä¸¤ä¸ªè¦ç´ ä¹‹é—´çš„å¤šé‡å…±çº¿æ€§é—®é¢˜ï¼Œå¹¶ä¸”æœ€å¤§åŒ–äº†è¾ƒå°‘è¦ç´ çš„æ–¹å·®ï¼Œä»¥ä¾¿å‡å°‘æ¨¡å‹/åˆ†æä¸­åŒ…å«çš„è¦ç´ æ•°é‡ã€‚

## 3.3 åŠ è½½å’Œè¯„åˆ†

è´Ÿè½½æ˜¯åŸå§‹ç‰¹å¾å’Œæ–°çš„ä¸»æˆåˆ†ä¹‹é—´çš„ç›¸å…³æ€§ã€‚è½½è·ç»™å‡ºäº†åŸå§‹å˜é‡å¯¹å½¢æˆä¸»åˆ†é‡æœ‰å¤šå¤§å½±å“çš„æŒ‡ç¤ºã€‚

å¦‚å‰æ‰€è¿°ï¼Œåˆ†æ•°æ˜¯åŸå§‹æ•°æ®ä¹˜ä»¥ç‰¹å¾å‘é‡åå¾—åˆ°çš„è½¬æ¢æ•°æ®ã€‚å¯ä»¥ç»˜åˆ¶åˆ†æ•°å›¾ï¼Œä»¥ä¾¿å¯¹ç»“æœè¿›è¡Œè¿›ä¸€æ­¥åˆ†æã€‚å®ƒä»¬å¯èƒ½ç»™å‡ºå…·æœ‰ç›¸ä¼¼æ€§çš„æ•°æ®ç‚¹çš„é›†ç¾¤çš„æŒ‡ç¤ºã€‚æ›´å¸¸è§çš„æ˜¯ï¼Œå®ƒä»¬å°†è¢«ç”¨ä½œè¿›ä¸€æ­¥å¤šå˜é‡åˆ†æå’Œå»ºæ¨¡çš„è¾“å…¥æ•°æ®ï¼Œä¾‹å¦‚åˆ†ç±»æˆ–å›å½’ã€‚

# 4.Python ä¸­è™¹è†œæ•°æ®é›†çš„ä¸»æˆåˆ†åˆ†æ

åœ¨å¯¹æ•°æ®æ‰§è¡Œ PCA ä¹‹åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç è®¿é—®ç»“æœã€‚

**åˆ†æ•°**
`pca.transform(data)`å°†æ•°æ®è½¬æ¢æˆ PCA åˆ†æ•°

**è½½è·**
`pca.components_`å°†æ‰“å°è½½è·ã€‚å¦‚æœä½ å¸Œæœ›æ¯ä¸ªä¸»æˆåˆ†çš„è½½è·ä»¥åˆ—çš„æ–¹å¼æ˜¾ç¤ºï¼Œä½ å¯ä»¥è¯·æ±‚è½¬ç½®`pca.components.T`

**å„ä¸»æˆåˆ†çš„æ–¹å·®(ç‰¹å¾å€¼)**
`pca.explained_variance_`

**è§£é‡Šæ–¹å·®æ¯”ä¾‹**
`pca.explained_variance_ratio_`

```
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from sklearn.decomposition import PCAimport plotly.express as px
import plotly.io as pio
import plotly.graph_objects as go
```

## 4.1 å¯¼å…¥å’Œç¼©æ”¾æ•°æ®

```
*# Import iris data set and drop Id column*
iris = pd.read_csv('Iris.csv')
iris = iris.drop('Id', axis=1)*# Store label in y*
y = iris.pop('Species')*# Store column names*
col_names = iris.columns*# Center data*
iris_centered = scale(iris)
```

## 4.2 æ‰§è¡Œ PCA å¹¶å°†åˆ†æ•°å­˜å‚¨åœ¨æ•°æ®å¸§ä¸­

```
*# Perform PCA on centered iris data*
pca = PCA()
pca.fit(iris_centered)
iris_scores = pca.transform(iris_centered) # pca.transform gives the scores*# Convert scores to a data frame*
iris_scores_df = pd.DataFrame(iris_scores)
iris_scores_df = iris_scores_df.set_axis(['PC1', 'PC2', 'PC3', 'PC4'], axis=1)*# Add labels to score data frame for plotting*
iris_scores_df = pd.concat([iris_scores_df, y], axis=1)
iris_scores_df.head()
```

![](img/a44cd9d2403d22d00e04531ab413b41c.png)

ä½œè€…å›¾ç‰‡

## 4.3 æ¯ä¸ªä¸»æˆåˆ†(ç‰¹å¾å€¼)çš„æ–¹å·®å’Œç´¯ç§¯æ–¹å·®

å¦‚å‰æ‰€è¿°ï¼Œæˆ‘ä»¬é¦–å…ˆè¦çœ‹çš„æ˜¯æ¯ä¸ªä¸»æˆåˆ†ä¿ç•™äº†å¤šå°‘æ•°æ®æ–¹å·®ï¼Œæ›´æœ‰è¶£çš„æ˜¯ï¼Œæ€»æ–¹å·®çš„æ¯”ä¾‹ã€‚æˆ‘ä»¬ä½¿ç”¨`pca.explained_variance_ratio.`è®¿é—®æ–¹å·®çš„æ¯”ä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›å€¼ä¸ç´¯ç§¯æ¯”ä¾‹ä¸€èµ·å­˜å‚¨åœ¨æ•°æ®æ¡†ä¸­ï¼Œä»¥ä¾¿ç»˜å›¾ã€‚

```
*# Proportion of variance each principal component*
prop_variance = pca.explained_variance_ratio_
prop_variance_df = pd.DataFrame(prop_variance, columns=['Proportion of Explained Variance'])*# Add cumulative proportion of variance*
cumulative_prop = np.cumsum(np.round(prop_variance, decimals=4))
cumulative_prop_df = pd.DataFrame(cumulative_prop, columns=['Cumulative Proportion of Variance'])*# Combine into one dataframe*
pc_df = pd.DataFrame(['PC1', 'PC2', 'PC3', 'PC4'], columns=['Principal Component'])
variance_df = pd.concat([pc_df, prop_variance_df, cumulative_prop_df], axis=1)
variance_df
```

![](img/cf000f418fbec30e1e1e5d16244037ce.png)

ä½œè€…å›¾ç‰‡

## 4.4 ç¢çŸ³å›¾

é€‰æ‹©ä¸»æˆåˆ†æ•°é‡çš„ä¸€ä¸ªå¸¸ç”¨æ–¹æ³•æ˜¯ç»˜åˆ¶æ–¹å·®ç™¾åˆ†æ¯”ï¼Œå¹¶å¯»æ‰¾ä¸€ä¸ªæ‹ç‚¹ã€‚è¿™ä¸ªå›¾è¢«ç§°ä¸ºç¢çŸ³å›¾ã€‚

```
*# Plot proportion of explained variance*
fig = px.line(variance_df, x = 'Principal Component', y='Proportion of Explained Variance',
              text='Proportion of Explained Variance', width=600)fig.update_traces(texttemplate='%{text:.3f}')
fig.update_layout(title_text='Proportion of Explained Variance')
fig.show()
```

![](img/e56306d54752a7de5d6ce4e75ce52291.png)

ä½œè€…å›¾ç‰‡

æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨æŸ±çŠ¶å›¾è¡¨ç¤ºæ–¹å·®çš„æ¯”ä¾‹ï¼Œå¹¶å°†ç´¯ç§¯æ–¹å·®åŠ åœ¨ä¸€æ¡çº¿ä¸Šã€‚

```
*# Plot proportion of variance in bars and cumulative proportion in line*fig = go.Figure()*# Plot explained variance*
fig.add_trace(
    go.Bar(
        x=variance_df['Principal Component'],
        y=variance_df['Proportion of Explained Variance'],
        marker=dict(color='Blue')
    )
    )*# Plot cumulative variance*
fig.add_trace(
    go.Scatter(
        x=variance_df['Principal Component'],
        y=variance_df['Cumulative Proportion of Variance']
    )
    )fig.show()
```

![](img/79c4d3aede652c40e8f8d4ff696ceb93.png)

## 4.5 åˆ†æ•°å›¾

æˆ‘ä»¬è¿˜å¯ä»¥ç»˜åˆ¶åˆ†æ•°å›¾æ¥è¿›ä¸€æ­¥è§£é‡Šç»“æœã€‚iris æ•°æ®é›†æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œå› ä¸ºå®ƒæ˜¾ç¤ºäº†ä¸åŒç‰©ç§çš„ä¸åŒèšç±»ã€‚

```
# 3d scatter plot with scores of the first 3 principal components
fig = px.scatter_3d(iris_scores_df, x='PC1', y='PC2', z='PC3', color='Species', symbol='Species', opacity=0.6)fig.update_layout(template='seaborn')fig.show()
```

![](img/361b89bf4cdeb495bb08d639d506b2bc.png)

# 5.åœ¨ R ä¸­å¯è§†åŒ– PCA ç»“æœ

r æœ‰ä¸€ä¸ªåä¸º *factoextra* çš„æœ‰ç”¨è½¯ä»¶åŒ…ï¼Œå¯ä»¥å¸®åŠ©æå–å’Œå¯è§†åŒ–å¤šå˜é‡åˆ†æçš„ç»“æœï¼ŒåŒ…æ‹¬ä¸»æˆåˆ†åˆ†æã€‚æˆ‘å°†åŒ…æ‹¬å‡ ä¸ªå›¾è¡¨ï¼Œä»¥ç®€æ´çš„æ–¹å¼æ˜¾ç¤ºåˆ†æ•°å’ŒåŠ è½½ã€‚r å…è®¸ä»¥ä¸€ç§éå¸¸ç®€å•ç´§å‡‘çš„æ–¹å¼è¿è¡Œ PCA å¹¶æå–ç»“æœã€‚è®©æˆ‘ä»¬åœ¨ç»˜å›¾ä¹‹å‰å¿«é€Ÿåœ°çœ‹çœ‹ç»“æœæ˜¯å¦‚ä½•è¢«è®¿é—®çš„ã€‚

```
*# Perform PCA and store PCA object in iris_pca*
iris_pca <- prcomp(iris, scale=TRUE)
```

æ‰§è¡Œ PCA åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`str(PCA_object)`æ¥æŸ¥çœ‹ PCA å¯¹è±¡åŒ…å«çš„å†…å®¹ã€‚ç®€å•åœ°æ‰“å°å¯¹è±¡å°†æ˜¾ç¤ºä¸»æˆåˆ†çš„æ ‡å‡†åå·®å’Œç‰¹å¾å‘é‡ã€‚

```
*# Printing the pca object which will show the eigenvectors*
iris_pca*Output:*Standard deviations (1, .., p=4):
[1] 1.7061120 0.9598025 0.3838662 0.1435538

Rotation (n x k) = (4 x 4):
                     PC1         PC2        PC3        PC4
SepalLengthCm  0.5223716 -0.37231836  0.7210168  0.2619956
SepalWidthCm  -0.2633549 -0.92555649 -0.2420329 -0.1241348
PetalLengthCm  0.5812540 -0.02109478 -0.1408923 -0.8011543
PetalWidthCm   0.5656110 -0.06541577 -0.6338014  0.5235463
```

æ‰“å°æ‘˜è¦å°†æ˜¾ç¤ºæ¯ä¸ªä¸»æˆåˆ†çš„æ ‡å‡†å·®ã€æ–¹å·®æ¯”ä¾‹å’Œç´¯ç§¯æ–¹å·®æ¯”ä¾‹ã€‚

```
*# Print summary to show st.dev, proportion of variance and the cumulative proportion of variance of each principal component*
summary(iris_pca)*Output:*Importance of components:
                          PC1    PC2     PC3     PC4
Standard deviation     1.7061 0.9598 0.38387 0.14355
Proportion of Variance 0.7277 0.2303 0.03684 0.00515
Cumulative Proportion  0.7277 0.9580 0.99485 1.00000
```

åˆ†æ•°ä½œä¸º x å˜é‡å­˜å‚¨åœ¨å¯¹è±¡ä¸­ã€‚

```
*# Get the scores using dollar sign (X_pca$x) and store scores in a dataframe for plotting in ggplot2*
scores_df <- as.data.frame(iris_pca$x)*# Add column with species to the scores_df*
scores_label <- cbind(scores_df, data$Species)
```

## 5.1 ç¢çŸ³å›¾

factoextra åŒ…å…è®¸æˆ‘ä»¬é€šè¿‡ç®€å•åœ°å°† PCA å¯¹è±¡ä¼ é€’ç»™`fviz_eig()`æ¥ç»˜åˆ¶ scree å›¾ã€‚

```
*# Scree plot showing the proportion of variance of the principal components*
fviz_eig(iris_pca)
```

![](img/4e604cb270ae7357d251da5bcec37572.png)

ä½œè€…å›¾ç‰‡

## 5.2 æƒ…èŠ‚å¾—åˆ†

åœ¨ python å›¾ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†åˆ†æ•°çš„ 3D å›¾ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†çœ‹çœ‹ 2D çš„å‡ ä¸ªåœ°å—ã€‚

```
*# Graph of individuals, similar observations are grouped closer together.*
fviz_pca_ind(iris_pca,
            col.ind = 'cos2',
            repel = FALSE)
```

![](img/7e0f1d04df277af88b662038ad5bb414.png)

ä½œè€…å›¾ç‰‡

æˆ‘ä»¬è¿˜å¯ä»¥åŒ…æ‹¬ç”¨ ggplot2 ç»˜åˆ¶çš„åˆ†æ•°å›¾ï¼Œå› ä¸ºè¿™å…è®¸é€šè¿‡é¢œè‰²å’Œå›´ç»•èšç±»çš„å¤šå…ƒ t-åˆ†å¸ƒçš„ 95%ç½®ä¿¡åŒºé—´æ¥ç»˜åˆ¶ç»“æœã€‚

```
*# Plot scores with colored labels and confidence interval*
ggplot(scores_label, aes(x = PC1, y = PC2, col = data$Species)) +
            geom_point() +
            stat_ellipse() *# add a confidence interval*
```

![](img/e61106ef0c709df72881108842841e73.png)

ä½œè€…å›¾ç‰‡

## 5.3 åœ°å—è·è½½

å¦‚æœæˆ‘ä»¬æƒ³çŸ¥é“æ¯ä¸ªå˜é‡å¯¹å‰ä¸¤ä¸ªä¸»æˆåˆ†çš„å½¢æˆæœ‰å¤šå¤§å½±å“ï¼Œæˆ‘ä»¬å¯ä»¥ç”»å‡ºè½½è·ã€‚

```
*# Graph of loadings*
fviz_pca_var(iris_pca, 
            col.var = 'contrib',
            repel = TRUE # Do not overlap text
            )
```

![](img/ee32953f6fc9b33421ebc04370e09015.png)

ä½œè€…å›¾ç‰‡

è¯¥å›¾æ˜¾ç¤ºï¼Œå¯¹äºç¬¬ä¸€ä¸»æˆåˆ†ï¼ŒèŠ±ç“£å…·æœ‰æ­£ç›¸å…³æ€§ã€‚é•¿åº¦ï¼ŒèŠ±ç“£ã€‚å®½åº¦å’Œè¼ç‰‡ã€‚ç¬¬äºŒä¸ªä¸»æˆåˆ†å¯¹æ‰€æœ‰çš„ç‰¹å¾éƒ½æœ‰è´Ÿçš„ç³»æ•°ï¼Œå°½ç®¡å¯¹èŠ±ç“£çš„ç›¸å…³æ€§ã€‚é•¿åº¦å’ŒèŠ±ç“£ã€‚å®½åº¦éå¸¸å°ã€‚

## 5.4 æ˜¾ç¤ºåˆ†æ•°å’Œè´Ÿè·çš„åŒæ ‡å›¾

æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨åŒæ ‡å›¾åœ¨åŒä¸€ä¸ªå›¾ä¸­æ˜¾ç¤ºå¾—åˆ†å’Œè´Ÿè½½ã€‚

```
*# Biplot of individuals and variables*
fviz_pca_biplot(iris_pca, 
                col.var = 'blue', # color of variables
                col.ind = 'darkgray', # color of individuals 
                )
```

![](img/631df747b2d684d42fef13d524c2bad2.png)

ä½œè€…å›¾ç‰‡

æˆ‘å¸Œæœ›è¿™ç¯‡æŒ‡å—èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ä¸»æˆåˆ†åˆ†æåŠå…¶å·¥ä½œåŸç†ã€‚Python å’Œ R ä¸­çš„ç¤ºä¾‹æ—¨åœ¨è®©æ‚¨äº†è§£å¯ä»¥ä½¿ç”¨ä»€ä¹ˆç±»å‹çš„å›¾æ¥è§£é‡Š PCA çš„ç»“æœã€‚åœ¨ PCA çš„å®é™…åº”ç”¨ä¸­ï¼Œæ‚¨å¯èƒ½ä¼šå‘ç°è‡ªå·±å¤„ç†çš„æ•°æ®è¦å¤§å¾—å¤šï¼Œå¯èƒ½ä¸å¦‚ iris æ•°æ®é›†ç›´è§‚ã€‚æ¯•ç«Ÿï¼ŒPCA æ˜¯ä¸€ç§å¸¸ç”¨çš„é™ç»´æŠ€æœ¯ã€‚ä½†æ˜¯å…·æœ‰å°çš„ã€è‰¯å¥½çš„æ•°æ®çš„ä¾‹å­æ˜¯ç†è§£æ–¹æ³•å…ƒç´ çš„å¥½æ–¹æ³•ã€‚æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©æ‚¨ç†è§£å¦‚ä½•ä½¿ç”¨åæ–¹å·®çŸ©é˜µã€ç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡æ¥å¯»æ‰¾æˆ‘ä»¬çš„ä¸»æˆåˆ†å’Œä¸»æˆåˆ†å¾—åˆ†ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•è¡¨ç¤ºåŸå§‹æ•°æ®ã€‚