# ç”¨ Python å¤„ç†æ—¥æœŸ

> åŸæ–‡ï¼š<https://towardsdatascience.com/dealing-with-dates-in-python-1b4069a07a0f>

## ä½¿ç”¨ Python å®ç°è‡ªåŠ¨åŒ–

## è¿™ç¯‡æ–‡ç« æ˜¯å…³äºå¯ä»¥å¯¹æ—¥æœŸæ—¶é—´å˜é‡æ‰§è¡Œçš„æ“ä½œã€‚

![](img/2d71ea3ebd11887d0d2a2fbe1580482f.png)

åœ¨ [Unsplash](https://unsplash.com/s/photos/calendar?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šç”±[åŸƒæ–¯ç‰¹Â·æ‰¬æ£®æ–¯](https://unsplash.com/@esteejanssens?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)æ‹æ‘„çš„ç…§ç‰‡

ä½ åœ¨å¤„ç†æ—¥æœŸæ—¶é—´å¯¹è±¡çš„æ—¶å€™ä¼šçº ç»“å—ï¼Ÿå—¯ï¼Œä¸å¾—ä¸æ‰¿è®¤æˆ‘ç»å¸¸çº ç»“ã€‚æˆ‘æ€»æ˜¯éœ€è¦åšå¤§é‡çš„æœç´¢æ¥ä¸ºæˆ‘çš„ç”¨ä¾‹æ‰¾åˆ°åˆé€‚çš„æ–¹æ³•ã€‚ç„¶åï¼Œæˆ‘å†³å®šå†™è¿™ç¯‡æ–‡ç« ï¼Œä½œä¸ºç»™æˆ‘äº²çˆ±çš„è¯»è€…å’Œæˆ‘è‡ªå·±çš„æ–‡æ¡£ã€‚

# èƒŒæ™¯

å½“æˆ‘å¼€å‘è‡ªåŠ¨æŠ¥å‘Šå‡†å¤‡æˆ– Excel æ–‡ä»¶ç»„åˆçš„å·¥å…·æ—¶ï¼Œæˆ‘å¿…é¡»èƒ½å¤Ÿä»æ–‡ä»¶åæˆ–æ–‡ä»¶å¤¹ä¸­è¯†åˆ«ä¿¡æ¯ã€‚é€šå¸¸ï¼Œç³»ç»Ÿç”Ÿæˆçš„æ–‡ä»¶æˆ–å®šæœŸæŠ¥å‘Šå°†æ ¹æ®å›ºå®šæ¨¡å¼å‘½åï¼Œå¹¶å­˜å‚¨åœ¨ç›¸åŒçš„æ–‡ä»¶å¤¹ä¸­ã€‚

æ–‡ä»¶åé€šå¸¸æ˜¯æŠ¥å‘Šåç§°ã€æŠ¥å‘Šæ—¥æœŸæˆ–æœŸé—´ä»¥åŠæ–‡ä»¶æ‰©å±•åçš„ç»„åˆï¼Œä¾‹å¦‚ï¼Œåä¸º*â€œç”¨ç”µæŠ¥å‘Š 2022 _ Q4 _ ww43 . xlsxâ€*çš„å®šæœŸæŠ¥å‘Šå’Œåä¸º*â€œå·¥å…·ç”³è¯·æŠ¥å‘Š 2022 10 21 . CSVâ€*çš„æ¯æ—¥æŠ¥å‘Šã€‚ä¸ºäº†æ£€ç´¢æ­£ç¡®çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æŠ¥å‘Šè‡ªåŠ¨åŒ–å·¥å…·è¿è¡Œçš„æ—¶é—´æ¥è®¡ç®—æ–‡ä»¶åä¸­çš„æ—¥æœŸæˆ–å‘¨æœŸã€‚

å› æ­¤ï¼Œæœ¬æ–‡çš„ç»“æ„å¦‚ä¸‹:

1.  [è§£æå¹¶æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´(*str ptime*vs*strftime*)](#5c35)
2.  [æå–å¹´/æœˆ/æ—¥ä¿¡æ¯](#bd8b)
3.  [ä»æ—¥æœŸ](#0289)å¼€å§‹è®¡ç®—ä¸–ç•Œå‘¨
4.  [ä»æ—¥æœŸå¼€å§‹è®¡ç®—æ˜ŸæœŸå‡ ](#014a)
5.  [å°†æ—¥æœŸæ—¶é—´å¯¹è±¡è½¬æ¢ä¸ºå‘¨æœŸ](#6ba1)
6.  [è®¡ç®—æ•°æ®æ—¶é—´é—´éš”](#a8f4)

> æˆ‘ä»¬å¼€å§‹å§ï¼

è§£ææ—¥æœŸæ—¶é—´æ„å‘³ç€æˆ‘ä»¬å°†åŒ…å«æ—¥æœŸçš„å­—ç¬¦ä¸²å¯¹è±¡è½¬æ¢æˆæ—¥æœŸæ—¶é—´å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬ç”¨æ­£åˆ™è¡¨è¾¾å¼æˆ–å…¶ä»–æ–¹æ³•ä»æŠ¥è¡¨*â€œå·¥å…·ç”³è¯·æŠ¥å‘Š 20221021 . CSVâ€*ä¸­è·å–æ—¥æœŸæ—¶ï¼Œæ—¥æœŸâ€œ20221021â€å°†æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ã€‚

åœ¨æˆ‘ä»¬è§£æå®ƒä¹‹åï¼Œå®ƒå°†æˆä¸ºä¸€ä¸ª DateTime å¯¹è±¡ï¼Œå¹¶è¢«å†™æˆ ISO æ ¼å¼(YYYY-MM-DD)ï¼Œ2022â€“10â€“21ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æ ¼å¼åŒ–ä¸ºç‰¹å®šçš„æ ¼å¼ï¼Œæ¯”å¦‚ 2022 å¹´ 10 æœˆ 21 æ—¥ã€‚è¯·æ³¨æ„ï¼ŒDateTime å¯¹è±¡åœ¨æˆ‘ä»¬æ ¼å¼åŒ–åå°†å˜æˆä¸€ä¸ª string å¯¹è±¡ã€‚

> è¿·æƒ‘ï¼Ÿæ”¾å¿ƒå§ï¼

ä»ä¸‹é¢çš„ä¾‹å­ä¸­ä½ ä¼šæœ‰ä¸€ä¸ªæ›´æ¸…æ™°çš„ç”»é¢ã€‚

# 1.è§£æå’Œæ ¼å¼åŒ–æ—¥æœŸæ—¶é—´

## è§£ææ—¥æœŸæ—¶é—´

DateTime åº“ä¸­æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è§£ææ—¥æœŸ:

*   `datetime.fromisoformat()`
*   `datetime.strptime()`

è®©æˆ‘ä»¬çœ‹çœ‹ä»–ä»¬æœ‰ä»€ä¹ˆä¸åŒï¼

```
import datetime as dtmy_date1 = "2022-07-01"
print(my_date1)
print(type(my_date1))my_date2 = "01-07-2022"
print(my_date2)
print(type(my_date2))my_date3 = "01July2022"
print(my_date3)
print(type(my_date3))
```

å¥½çš„ï¼Œæˆ‘åˆ›å»ºäº† 3 ä¸ªä¸åŒçš„æ—¥æœŸä½œä¸ºå˜é‡ï¼Œç°åœ¨å®ƒä»¬æ˜¯å­—ç¬¦ä¸²å¯¹è±¡ã€‚ç°åœ¨è®©æˆ‘ä»¬å°†å®ƒä»¬è§£ææˆ DateTime å¯¹è±¡ã€‚

```
my_date1a = dt.datetime.fromisoformat(my_date1)
print(type(my_date1a))my_date3a = dt.datetime.fromisoformat(my_date3)
print(type(my_date3a))
```

![](img/29e9274ac4eb9edc2e2c3eaf47d8b24c.png)

å›¾ç‰‡ä½œè€…ã€‚

å¯¹äºç¬¬ä¸€ç§æ–¹æ³•`datetime.fromisoformat()`ï¼Œå°±åƒæ–¹æ³•åä¸€æ ·ï¼Œå®ƒåªèƒ½è§£æ ISO æ ¼å¼çš„æ—¥æœŸ YYYY-MM-DDï¼Œå°±åƒåœ¨åä¸º`my_date1`çš„å˜é‡ä¸­ä¸€æ ·ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬è¯•å›¾åœ¨`my_date3`ä¸­å¯¹å…¶ä»–æ—¥æœŸæ—¶é—´æ ¼å¼ä½¿ç”¨è¯¥æ–¹æ³•æ—¶ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ª*å€¼é”™è¯¯*ã€‚`my_date1a`å˜é‡æ˜¯æˆ‘ä»¬é€šè¿‡è§£æ`my_date1`å˜é‡å¾—åˆ°çš„ DateTime å¯¹è±¡ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç”¨`datetime.strptime()`æ–¹æ³•è§£ææ—¥æœŸçš„ä¾‹å­ã€‚å¯¹äºè¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¿…é¡»æ ¹æ®æ—¥æœŸæ ¼å¼æŒ‡å®š**æ ¼å¼ä»£ç **æ¥è§£ææ—¥æœŸã€‚æ‚¨å¯ä»¥åœ¨ [strftime()å’Œ strptime()è¡Œä¸º](https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior)ä¸­äº†è§£æ›´å¤šå…³äºæ ¼å¼ä»£ç çš„ä¿¡æ¯ã€‚

```
# my_date2 = "01-07-2022"
my_date2a = dt.datetime.strptime(my_date2, "%d-%m-%Y")
print(type(my_date2a))
print(my_date2a)**# Output**:
# <class 'datetime.datetime'>
# 2022-07-03 00:00:00
```

è®©æˆ‘ä»¬çœ‹å¦ä¸€ä¸ªä¸åŒæ—¥æœŸæ ¼å¼çš„ä¾‹å­ã€‚

```
# my_date3 = "01July2022"
my_date3a = dt.datetime.strptime(my_date3, "%d%B%Y")
print(type(my_date3a))
print(my_date3a)**# Output:**
# <class 'datetime.datetime'> 
# 2022-07-01 00:00:00
```

ä½¿ç”¨`strptime()`æ–¹æ³•è§£ææ—¥æœŸæ˜¯é€šè¿‡ç”¨å„è‡ªçš„æ ¼å¼ä»£ç æ›¿æ¢æ—¥ã€æœˆå’Œå¹´ã€‚å¦‚ä¸Šä¾‹æ‰€ç¤ºï¼Œ%d è¡¨ç¤ºæ—¥ï¼Œ%m è¡¨ç¤ºæœˆæ•°å­—ï¼Œ%B è¡¨ç¤ºæœˆçš„å…¨åï¼Œ%Y è¡¨ç¤ºå¸¦æœ‰ä¸–çºªçš„å¹´ã€‚

å¦‚æœä½ æ˜¯æ–°æ‰‹ï¼Œç°åœ¨çœ‹èµ·æ¥å¯èƒ½å¾ˆå¤æ‚ï¼Œä½†æ˜¯æˆ‘å‘ä½ ä¿è¯ï¼Œä¸€æ—¦ä½ ç†Ÿæ‚‰äº†æ ¼å¼ä»£ç ï¼Œä½ å°±ä¼šå˜å¾—å¾ˆæ£’ã€‚è®°ä½ï¼Œä½ å¯ä»¥éšæ—¶å‚è€ƒ [strftime()å’Œ strptime()è¡Œä¸º](https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior)ã€‚ğŸ˜‰

## æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´

åœ¨æˆ‘ä»¬å°† string å¯¹è±¡è§£ææˆ DateTime å¯¹è±¡åï¼Œå®ƒå°†ä»¥ ISO æ ¼å¼æ˜¾ç¤ºã€‚å¦‚æœæ‚¨å¸Œæœ›å®ƒæ˜¯å…¶ä»–å½¢å¼ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨`datetime.strftime()`æ–¹æ³•æ¥æ ¼å¼åŒ–æ—¥æœŸã€‚

```
# my_date3a: 2022-07-01 00:00:00
my_format_date = dt.datetime.strftime(my_date3a, "%B %d, %Y")
print(my_format_date)**# Output:**
# July 01, 2022
```

è¯·æ³¨æ„ï¼Œåœ¨æˆ‘ä»¬æ ¼å¼åŒ–æ—¥æœŸä¹‹åï¼Œå®ƒå°†å˜æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

åœ¨æˆ‘ä»¬å°†å­—ç¬¦ä¸²è§£ææˆ DateTime å¯¹è±¡åï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾—ä¿¡æ¯ã€‚

# 2.æå–å¹´/æœˆ/æ—¥ä¿¡æ¯

*æ³¨æ„:ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨äº†ç¬¬ä¸€èŠ‚ä¾‹å­ä¸­çš„å˜é‡ã€‚*

è¦è·å–å¹´ã€æœˆå’Œæ—¥ä¿¡æ¯ï¼Œæˆ‘ä»¬åªéœ€ä½¿ç”¨ä¸‹é¢ DateTime å¯¹è±¡ä¸­çš„ç›¸åº”å±æ€§ã€‚

*   `datetime_object.year`
*   `datetime_object.month`
*   `datetime_object.day`

```
# my_date3a: 2022-07-01 00:00:00**# Get Year Info** my_date3a.year**# Output:** # 2022**# Get Month Info** my_date3a.month**# Output:** # 7**# Get Day Info** my_date3a.day**# Output:** 
# 1
```

ç®€å•å§ï¼ŸğŸ˜„

ä½†æ˜¯ï¼Œæˆ‘ä»¬æ— æ³•ä»æ ¼å¼åŒ–çš„æ—¥æœŸä¸­æå–ä¸Šè¿°ä¿¡æ¯ã€‚

```
# my_format_date = "July 01, 2022"
my_format_date.month
```

![](img/69cf18510162ff9684385163342bd81f.png)

å›¾ç‰‡ä½œè€…ã€‚

å®ƒå°†è¿”å›ä¸€ä¸ªå±æ€§é”™è¯¯ã€‚è¿™æ˜¯å› ä¸ºå½“æˆ‘ä»¬å°†æ—¥æœŸæ ¼å¼åŒ–ä¸ºå…¶ä»–æ ¼å¼æ—¶ï¼Œå®ƒä¼šå†æ¬¡å˜æˆ string å¯¹è±¡ã€‚æˆ‘ä»¬åªèƒ½ä»æ—¥æœŸæ—¶é—´å¯¹è±¡è¿”å›æ—¥æœŸæ—¶é—´å±æ€§ã€‚

```
print(type(my_date3a))
print(type(my_format_date))Output:
<class 'datetime.datetime'> 
<class 'str'>
```

> è¦çŸ¥é“ strftime()çš„ä¹˜ç§¯æ˜¯ string å¯¹è±¡ï¼Œè€Œ strptime()çš„ä¹˜ç§¯æ˜¯ DateTime å¯¹è±¡ã€‚

# 3.ä»æ—¥æœŸå¼€å§‹è®¡ç®—ä¸–ç•Œå‘¨

*æ³¨æ„:åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ–°çš„å˜é‡ä½œä¸ºç¤ºä¾‹ã€‚*

é¦–å…ˆï¼Œæˆ‘ç”¨ä¸åŒçš„æ—¥æœŸåˆ›å»ºä¸¤ä¸ªæ–°çš„ string å¯¹è±¡ï¼Œç„¶åå°†å®ƒä»¬è§£ææˆ DateTime å¯¹è±¡ã€‚

```
import datetime as dtmy_date_str_1 = "2022-07-01"
my_date_1 = dt.datetime.strptime(my_date_str_1, "%Y-%m-%d")
print(my_date_1)my_date_str_2 = "2022-07-03"
my_date_2 = dt.datetime.strptime(my_date_str_2, "%Y-%m-%d")
print(my_date_2)**# Output:**
# 2022-07-01 00:00:00 
# 2022-07-03 00:00:00
```

æˆ‘ä»¬å°†ä½¿ç”¨`isocalendar()`æ–¹æ³•ä» DateTime å¯¹è±¡ä¸­è·å–ä¸–ç•Œå‘¨ä¿¡æ¯ã€‚è¿™æ˜¯å› ä¸º DateTime å¯¹è±¡æ²¡æœ‰ä¸–ç•Œå‘¨å±æ€§ã€‚

```
print(my_date_1.isocalendar())
print(my_date_2.isocalendar())**# Output:**
# datetime.IsoCalendarDate(year=2022, week=26, weekday=5) 
# datetime.IsoCalendarDate(year=2022, week=26, weekday=7)
```

`isocalendar()`æ–¹æ³•å°†è¿”å›ä¸€ä¸ªåŒ…å« ISO å¹´ä»½ã€å‘¨æ•°å’Œå·¥ä½œæ—¥çš„å…ƒç»„ã€‚å·¥ä½œæ—¥å°†ä»¥æ•°å­—å½¢å¼è¿”å›ã€‚æˆ‘ä»¬å¯ä»¥è¿”å›ç›¸åº”ç´¢å¼•çš„å€¼ã€‚

```
print("Date 1: 2022-07-01")
print("Year:", my_date_1.isocalendar()[0])
print("World Week Number: ", my_date_1.isocalendar()[1])
print("Weekday: ", my_date_1.isocalendar()[2])print("Date 2: 2022-07-03")
print("Year:", my_date_2.isocalendar()[0])
print("World Week Number: ", my_date_2.isocalendar()[1])
print("Weekday: ", my_date_2.isocalendar()[2])**# Output:**
# Date 1: 2022-07-01 
# Year: 2022 
# World Week Number:  26 
# Weekday:  5 
# Date 2: 2022-07-03 
# Year: 2022 
# World Week Number:  26 
# Weekday:  7
```

è¿™å°±æ˜¯æˆ‘ä»¬å¦‚ä½•å¾—åˆ°æ˜ŸæœŸæ•°ï¼Œä»¥åŠå¹´ä»½å’Œå·¥ä½œæ—¥ã€‚

# 4.ä»æ—¥æœŸå¼€å§‹è®¡ç®—æ˜ŸæœŸå‡ 

*æ³¨æ„:ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨ç¬¬ 3 èŠ‚ç¤ºä¾‹ä¸­çš„å˜é‡ã€‚*

æœ‰å¤šç§æ–¹æ³•å¯ä»¥ä»æ—¥æœŸä¸­è¿”å›æ˜ŸæœŸå‡ ä¿¡æ¯ã€‚å…¶ä¸­ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡`isocalendar()`ï¼Œå¦‚å‰ä¸€èŠ‚æ‰€ç¤ºã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å¦‚ä¸‹æ‰€ç¤ºçš„`weekday()`æ–¹æ³•ã€‚

```
print("Date 1: 2022-07-01")
print("Weekday: ", my_date_1.weekday())print("Date 2: 2022-07-03")
print("Weekday: ", my_date_2.weekday())**# Output:**
# Date 1: 2022-07-01 
# Weekday:  4 
# Date 2: 2022-07-03 
# Weekday:  6
```

å—¯ï¼Œ2022 å¹´ 7 æœˆ 1 æ—¥æ˜¯æ˜ŸæœŸäº”ã€‚`isocalendar()`æ–¹æ³•ä¸éµå¾ª python ç´¢å¼•è§„åˆ™ã€‚æ‰€ä»¥å®é™…ä¸Šï¼Œ`isocalendar()`å’Œ`weekday()`æ–¹æ³•éƒ½åœ¨æ˜ŸæœŸä¸€å¼€å§‹è®¡æ•°ï¼Œä½†æ˜¯`isocalendar()`ä½¿ç”¨ä» 1 å¼€å§‹çš„ç´¢å¼•ï¼Œè€Œ weekday()æ˜¯ä» 0 å¼€å§‹çš„ python å‡½æ•°ã€‚æåˆ°çš„ä¸¤ç§æ–¹æ³•ä»¥æ•°å­—å½¢å¼è¿”å›æ˜ŸæœŸå‡ ã€‚è¿˜æœ‰ä¸€ç§æ–¹æ³•ï¼Œä½ èƒ½çŒœå‡ºæ¥å—ğŸ¤”ï¼Ÿ

æ˜¯`strftime()`æ³•ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡ç”¨ç›¸åº”çš„æ ¼å¼ä»£ç æ ¼å¼åŒ–æ—¥æœŸæ¥è·å¾—å·¥ä½œæ—¥çš„åç§°ã€‚

```
date_weekday_1 = dt.datetime.strftime(my_date_1, "%a")
print(date_weekday_1)date_weekday_2 = dt.datetime.strftime(my_date_2, "%a")
print(date_weekday_2)**# Output:**
# Fri 
# Sun
```

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨å¦‚ä¸Šä¾‹æ‰€ç¤ºçš„â€œ%aâ€æ ¼å¼ä»£ç æ¥æ ¼å¼åŒ–æ˜ŸæœŸå‡ çš„ç¼©å†™åç§°ï¼Œæˆ–è€…é€šè¿‡ä½¿ç”¨å¦‚ä¸‹ä¾‹æ‰€ç¤ºçš„â€œ%Aâ€æ ¼å¼ä»£ç æ¥è¿”å›æ˜ŸæœŸå‡ çš„å…¨åã€‚

```
date_weekday_1 = dt.datetime.strftime(my_date_1, "%A")
print(date_weekday_1)date_weekday_2 = dt.datetime.strftime(my_date_2, "%A")
print(date_weekday_2)**# Output:** # Friday 
# Sunday
```

æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨æ•°å­—çš„å½¢å¼è¿”å›å·¥ä½œæ—¥ã€‚

```
date_weekday_1 = dt.datetime.strftime(my_date_1, "%w")
print(date_weekday_1)date_weekday_2 = dt.datetime.strftime(my_date_2, "%w")
print(date_weekday_2)**# Output:**
# 5 
# 0
```

æœ‰è¶£çš„äº‹å®æ˜¯ï¼Œå½“ä½ ä½¿ç”¨`strftime()`æ–¹æ³•æ—¶ï¼Œè®¡æ•°ä»å‘¨æ—¥å¼€å§‹ï¼ŒæŒ‡æ•°ä» 0 å¼€å§‹ï¼Œæ­£å¦‚[æ–‡æ¡£](https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior)æ‰€ç¤ºã€‚

ä¸ºäº†æ›´å¥½åœ°ç†è§£ï¼Œæˆ‘åˆå¹¶äº†ä¸‹é¢çš„æ¯”è¾ƒè¡¨ï¼Œä»¥æ˜¾ç¤ºä»ä¸Šé¢æ˜¾ç¤ºçš„æ—¥æœŸå¼€å§‹ä»¥æ•°å­—å½¢å¼è¿”å›å·¥ä½œæ—¥çš„å‡ ç§æ–¹æ³•ä¹‹é—´çš„å·®å¼‚ã€‚

![](img/bf5a82df39bcb990da6d01fbe4dc86ed.png)

å°†æ˜ŸæœŸå‡ ä½œä¸ºèµ·å§‹æ—¥æœŸçš„æ•°å­—è¿”å›çš„æ–¹æ³•ä¹‹é—´çš„å·®å¼‚ã€‚å›¾ç‰‡ä½œè€…ã€‚

# 5.å°†æ—¥æœŸæ—¶é—´å¯¹è±¡è½¬æ¢ä¸ºå‘¨æœŸ

*æ³¨æ„:åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ–°çš„å˜é‡ä½œä¸ºç¤ºä¾‹ã€‚*

æˆ‘ä»¬å·²ç»å­¦ä¹ äº†è¿”å›å¹´ã€æœˆã€æ—¥ã€ä¸–ç•Œå‘¨æ•°å’Œå·¥ä½œæ—¥çš„æ–¹æ³•å’Œå±æ€§ã€‚å¦‚æœå¤§å®¶è¿˜è®°å¾—æˆ‘åœ¨æœ¬æ–‡å¼€å¤´ç»™å‡ºçš„æŠ¥å‘Šåç§°çš„ä¾‹å­*ã€Šç”¨ç”µæŠ¥å‘Š 2022 _ Q4 _ ww43 . xlsxã€‹*ï¼Œè¿˜æœ‰ä¸€æ¡ä¿¡æ¯æˆ‘ä»¬è¿˜æ²¡æœ‰å¾—åˆ°ï¼Œé‚£å°±æ˜¯å­£åº¦ã€‚

ä¸ºäº†ä»æ—¥æœŸä¸­è·å–å­£åº¦ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨`pandas`åº“å’Œ DateTime åº“ã€‚

```
import pandas as pd
import datetime as dt
# pandas.Timestamp.to_perioddate_1 = '2022-10-21'
timestamp_1 = pd.Timestamp(date_1)
```

é¦–å…ˆï¼Œæˆ‘ä»¬å°†æ—¥æœŸåˆ›å»ºä¸ºå­—ç¬¦ä¸²å¯¹è±¡ï¼Œç„¶åå°†å…¶è½¬æ¢ä¸ºæ—¶é—´æˆ³ã€‚ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å°†æ—¶é—´æˆ³è½¬æ¢æˆå¥ç‚¹ã€‚

```
year_period = timestamp_1.to_period(*freq*='Y')
month_period = timestamp_1.to_period(*freq*='M')
week_period = timestamp_1.to_period(*freq*='W')
quarter_period = timestamp_1.to_period(*freq*='Q')print("Year: ", year_period)
print("Month: ", month_period)
print("Week: ", week_period)
print("Quarter: ", quarter_period)**# Output:**
# Year:  2022 
# Month:  2022-10 
# Week:  2022-10-17/2022-10-23 
# Quarter:  2022Q4
```

å¾ˆç®€å•å§ï¼Ÿ

æ ¹æ® [pandas çš„å®˜æ–¹æ–‡æ¡£](https://pandas.pydata.org/docs/reference/api/pandas.Timestamp.to_period.html)ï¼Œå¯¹äº`pandas.Timestamp.to_period()`æ–¹æ³•åªæœ‰ 4 ç§è¾“å‡ºç±»å‹ã€‚åœ¨å‰é¢çš„éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«å¾—åˆ°å¹´ã€æœˆå’Œå‘¨ã€‚ç„¶åï¼Œè¯¥æ–¹æ³•è¿”å›æ—¥æœŸçš„ç‰¹å®šæ—¶é—´æ®µã€‚ä¾‹å¦‚ï¼Œ2022Q4 æŒ‡çš„æ˜¯ 2022 å¹´çš„ç¬¬å››å­£åº¦ã€‚

åªæ£€ç´¢â€œQ4â€è€Œä¸æ˜¯â€œ2022Q4â€è¿˜éœ€è¦ä¸€ä¸ªæ­¥éª¤ã€‚`quarter_period`å˜é‡ç°åœ¨æ˜¯ä¸€ä¸ªå‘¨æœŸå¯¹è±¡ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒè½¬æ¢æˆä¸€ä¸ª string å¯¹è±¡ï¼Œç„¶åè¿”å›æœ€åä¸¤ä¸ªå­—ç¬¦ä¸²ä»¥å¾—åˆ°â€œQ4â€ã€‚

```
print(str(quarter_period))[-2:]
```

é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª python å‡½æ•°æ¥è¡¨ç¤ºæ¯ä¸ªæœˆçš„å­£åº¦ã€‚å½“æ‚¨çš„ç»„ç»‡æœ‰è‡ªå·±çš„è´¢æ”¿å¹´åº¦è®¡ç®—æ–¹æ³•æ—¶ï¼Œæ­¤æ–¹æ³•ä¹Ÿé€‚ç”¨ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€å­£åº¦å¯èƒ½åœ¨ 11 æœˆã€12 æœˆå’Œ 1 æœˆã€‚

```
**# Output:**
# Q4
```

ä¸Šé¢æ˜¾ç¤ºäº†å½“æ‚¨çš„ç»„ç»‡ä¸éµå¾ªæ ‡å‡†çš„å­£åº¦å®šä¹‰æ—¶ï¼Œå¦‚ä½•è¿”å›å­£åº¦ã€‚æ‚¨å¯ä»¥æ ¹æ®ç»„ç»‡çš„å­£åº¦å®šä¹‰ä¿®æ”¹æ¡ä»¶ã€‚

# 6.è®¡ç®—æ•°æ®æ—¶é—´é—´éš”

*æ³¨æ„:åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ–°çš„å˜é‡ä½œä¸ºç¤ºä¾‹ã€‚*

æ—¥æœŸæ—¶é—´é—´éš”æœ‰ä¸¤ç§è®¡ç®—æ–¹å¼:

1.  è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„é—´éš”
2.  ç»™æ—¥æœŸåŠ ä¸Š/å‡å»ä¸€ä¸ªæ—¶é—´é—´éš”

è®©æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ¥çœ‹ï¼

åœ¨æ­¤ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ä¸ºç¤ºä¾‹åˆ›å»ºä¸€äº›æ—¥æœŸã€‚

```
import datetime as dtmy_date1 = dt.datetime.fromisoformat("2022-07-01")
my_date2 = dt.datetime.fromisoformat("2022-07-05")
```

## è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„é—´éš”

è®¡ç®—ä¸¤æ¬¡çº¦ä¼šçš„é—´éš”çœŸçš„å¾ˆç®€å•ã€‚æˆ‘ä»¬åªéœ€è¦å‡å»ä¸€ä¸ªæ—¥æœŸã€‚

```
print(my_date2 - my_date1)**# Output:**
# datetime.timedelta(days=4)
```

è¾“å‡ºå°†æ˜¯ä¸€ä¸ª *timedelta* ï¼Œå®ƒæŒ‡çš„æ˜¯ä¸¤ä¸ª DateTime å¯¹è±¡ä¹‹é—´çš„å·®å¼‚ã€‚

## ç»™æ—¥æœŸåŠ ä¸Š/å‡å»ä¸€ä¸ªæ—¶é—´é—´éš”

å¦ä¸€ä¸ªä¾‹å­æ˜¯ç»™æ—¥æœŸåŠ ä¸Šæˆ–å‡å»ä¸€ä¸ªæ—¶é—´é—´éš”ã€‚

```
from datetime import timedeltaprint(my_date2 - timedelta(*days*=10))
print(my_date2 + timedelta(*days*=10))
print(my_date2 - timedelta(*seconds*=10))
print(my_date2 + timedelta(*seconds*=10))**# Output:**
# 2022-06-25 00:00:00 
# 2022-07-15 00:00:00
# 2022-07-04 23:59:50 
# 2022-07-05 00:00:10
```

æˆ‘ä»¬å°†ä½¿ç”¨æ—¥æœŸæ—¶é—´åº“ä¸­çš„ [timedelta ç±»æ¥æ‰§è¡Œè¯¥æ“ä½œã€‚è¿™ä¸ªç±»å…è®¸æˆ‘ä»¬åœ¨æ—¥æœŸä¸ŠåŠ /å‡å¤©æ•°ã€ç§’æ•°æˆ–å¾®ç§’æ•°ã€‚](https://docs.python.org/3/library/datetime.html#datetime.timedelta)

# ç»“è®º

æ€»ä¹‹ï¼Œå·²ç»å±•ç¤ºäº†å°†å­—ç¬¦ä¸²å¯¹è±¡è§£æä¸ºæ—¥æœŸæ—¶é—´å¯¹è±¡ä»¥åŠå°†æ—¥æœŸæ—¶é—´å¯¹è±¡æ ¼å¼åŒ–ä¸ºç‰¹å®šæ ¼å¼çš„æ–¹æ³•ã€‚ç„¶åï¼Œè®¨è®ºäº†ä»æ—¥æœŸä¸­è·å–å¹´ã€æœˆã€æ—¥ã€ä¸–ç•Œå‘¨ä»¥åŠå·¥ä½œæ—¥çš„æ–¹æ³•ã€‚

ç»™å‡ºäº†å°†æ—¥æœŸæ—¶é—´å¯¹è±¡è½¬æ¢æˆå‘¨æœŸçš„æ–¹æ³•ï¼Œå¦‚ä¸€å¹´ã€ä¸€å¹´ä¸­çš„ä¸€ä¸ªæœˆä»¥åŠä¸€å¹´ä¸­çš„ä¸€ä¸ªå­£åº¦ã€‚å¯¹äºæœ‰è‡ªå·±çš„è´¢æ”¿å¹´åº¦è®¡ç®—æ–¹æ³•çš„ç»„ç»‡ï¼Œæ¡ä»¶è¯­å¥å¯ç”¨äºè¿”å›æ­£ç¡®çš„å­£åº¦ã€‚

æœ€åï¼Œè§£é‡Š DateTime é—´éš”çš„ä¸¤ç§è®¡ç®—ç±»å‹ï¼Œå®ƒè®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„é—´éš”ï¼Œå¹¶ç»™æ—¥æœŸåŠ ä¸Š/å‡å»ä¸€ä¸ªæ—¶é—´é—´éš”ã€‚

ç”¨æˆ‘å±•ç¤ºçš„æ‰€æœ‰æ–¹æ³•å’Œä¾‹å­ï¼Œä½ èƒ½ç”¨ä»Šå¤©çš„æ—¥æœŸ(26/10/2022)é‡æ–°åˆ›å»ºä¸‹é¢çš„æ–‡ä»¶åå—ï¼ŸğŸ˜åœ¨è¯„è®ºé‡Œè½ä¸‹ä½ çš„ç­”æ¡ˆå§ï¼

*   *ã€Š2022 å¹´ç”¨ç”µæŠ¥å‘Š _ Q4 _ ww43 . xlsxã€‹*
*   *â€œå·¥å…·å¾ç”¨æŠ¥å‘Š 2022 10 21 . CSVâ€*

åœ¨æ–‡ç« åº•éƒ¨å›ç­”ã€‚è‡ªå·±å…ˆè¯•ä¸€ä¸‹å†æŸ¥ç­”æ¡ˆï¼ğŸ˜‰

æˆ‘å¸Œæœ›æ‚¨å–œæ¬¢é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼Œå¹¶å¸Œæœ›å®ƒèƒ½å¸®åŠ©æ‚¨æ›´å¤šåœ°äº†è§£å¦‚ä½•åœ¨ Python ä¸­å¤„ç† DateTime å¯¹è±¡ã€‚è°¢è°¢ï¼ğŸ˜Š

# ä¿æŒè”ç³»

åœ¨ YouTube[ä¸Šè®¢é˜…](https://www.youtube.com/channel/UCiMtx0qbILP41Ot-pkk6eJw)

# è¾¹æ³¨

åœ¨[ä½¿ç”¨ Python çš„æŠ¥å‘Šè‡ªåŠ¨åŒ–æŠ€å·§](/report-automation-tips-with-python-783a9cd58e23)ä¸­ï¼Œæˆ‘è§£é‡Šäº†ä¸€äº›å…³äºæŠ¥å‘Šè‡ªåŠ¨åŒ–çš„æŠ€å·§ã€‚çœ‹çœ‹å§ï¼

# å‚è€ƒ

1.  [Python çš„ DateTime æ¨¡å—æ–‡æ¡£](https://docs.python.org/3/library/datetime.html)
2.  [ç†ŠçŒ«ã€‚Timestamp.to_period æ–‡æ¡£](https://pandas.pydata.org/docs/reference/api/pandas.Timestamp.to_period.html)
3.  [strftime()å’Œ strptime()è¡Œä¸º](https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior)

è°¢è°¢ä½ ï¼Œç¥è´ºä½ è¯»åˆ°æœ€åğŸ˜Šï¼

![](img/4e5ac42ea08dba95c161841e4e604c25.png)

ç…§ç‰‡ç”± [Alexas_Fotos](https://unsplash.com/@alexas_fotos?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) åœ¨ [Unsplash](https://unsplash.com/s/photos/thanks?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„

## å›ç­”:

å¸Œæœ›ä½ åšå¯¹äº†ï¼ğŸ˜Š