# ä¸æ±‰å¯†å°”é¡¿ä¸€èµ·æ•´ç†ç”Ÿäº§ç†ŠçŒ«

> åŸæ–‡ï¼š<https://towardsdatascience.com/tidy-production-pandas-with-hamilton-3b759a2bf562>

## ä¸æ±‰å¯†å°”é¡¿ä¸€èµ·ç¼–å†™ç”Ÿäº§çº§ç†ŠçŒ«ä»£ç ã€‚

![](img/d764871eaab6e0eed17139d121f12d38.png)

ä½ çš„ç†ŠçŒ«ä¸æ±‰å¯†å°”é¡¿ä»£ç ã€‚å›¾ç‰‡æ¥è‡ª Pixabayã€‚

â€œ**&[**ç†ŠçŒ«**](https://pandas.pydata.org/) â€è¿™ä¸¤ä¸ªè¯é€šå¸¸ä¸ä¼šè¢«è”ç³»åœ¨ä¸€èµ·ï¼Œæ›´ä¸ç”¨è¯´ä¸å•è¯â€œ**ç”Ÿäº§**â€è”ç³»åœ¨ä¸€èµ·äº†ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä¼šè¯´å¦‚æœä½ åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ Pandasï¼Œä½ åº”è¯¥ä½¿ç”¨å¼€æºå¾®æ¡†æ¶ [Hamilton](https://github.com/DAGWorks-Inc/hamilton) ï¼Œå› ä¸ºå®ƒå¯ä»¥è®©ä½ åœ¨é»˜è®¤æƒ…å†µä¸‹ç¼–å†™æ•´æ´çš„ç”Ÿäº§çº§ä»£ç ã€‚**

**ä½ å¯èƒ½ä¼šæƒ³ï¼Ÿè¿™ç¯‡æ–‡ç« æ˜¯å…³äºç†ŠçŒ«çš„å—ï¼Ÿæ˜¯çš„ï¼Œä»æ•´æ´çš„ä»£ç çš„ç²¾ç¥æ¥çœ‹ï¼Œä½†ä»å¦‚ä½•å®ç°çš„è§’åº¦æ¥çœ‹å´ä¸æ˜¯ã€‚**

**æ­¤å¤–ï¼Œåœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œå…ˆè¯´æ˜ä¸€ä¸‹æˆ‘ä»¬çš„æœ¯è¯­:**

****ç”Ÿäº§**:æˆ‘ä»¬æ‰€è¯´çš„ç”Ÿäº§æ˜¯æŒ‡ä¸ºäº†ä½¿ä¸šåŠ¡æµç¨‹æ­£å¸¸è¿è¡Œï¼Œéœ€è¦è¿è¡Œè¿™æ®µä»£ç ã€‚ä¾‹å¦‚ï¼Œä¸ºæœºå™¨å­¦ä¹ æ¨¡å‹åˆ›å»ºç‰¹å¾ï¼Œæˆ–è€…å°†æ•°æ®è½¬æ¢ä¸ºä»ªè¡¨æ¿å·¥å…·ã€‚**

**æ•´æ´:æ•´æ´æ„å‘³ç€ä»£ç æ˜¯å¯è¯»çš„ã€å¯ç»´æŠ¤çš„å’Œå¯æµ‹è¯•çš„ã€‚æˆ‘ä»¬è¿‡åˆ†å¼ºè°ƒäº†ä½ çš„ä»£ç é•¿æ—¶é—´å­˜æ´»çš„èƒ½åŠ›ï¼›æ‚¨çš„äº§å“ä»£ç é€šå¸¸æ¯”æ‚¨é¢„æœŸçš„å¯¿å‘½æ›´é•¿ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬è®©å®ƒæ›´å®¹æ˜“ç»´æŠ¤ã€‚å¦ä¸€ç§æ€è€ƒæ–¹å¼æ˜¯ï¼Œæˆ‘ä»¬å¸Œæœ›æ‚¨çš„ç†ŠçŒ«ä»£ç èƒ½å¤Ÿæ–¹ä¾¿åœ°ä¿ƒè¿›è½¯ä»¶å·¥ç¨‹æœ€ä½³å®è·µã€‚**

# **ç†ŠçŒ«ç”Ÿäº§é—®é¢˜**

**å…³äºç†ŠçŒ«ä»£ç æ˜¯å¦åº”è¯¥åœ¨äº§å“ä¸­è¿è¡Œï¼Œä¸šç•Œæœ‰å¾ˆå¤šä¸åŒæ„è§ã€‚è™½ç„¶è¿™å¯¹äºå¿«é€Ÿçš„åŸå‹å’Œç ”ç©¶æ¥è¯´æ˜¾ç„¶æ˜¯å¾ˆæ£’çš„ï¼Œä½†æ˜¯ç†ŠçŒ«ç¹é‡çš„ä»£ç åº“ç»å¸¸ä¼šè¢«è‡ªå·±ç»Šå€’ï¼›è½¯ä»¶å·¥ç¨‹æœ€ä½³å®è·µå¾ˆéš¾éµå¾ªã€‚**

**è¿™ä¸‹ä¸€èŠ‚åº”è¯¥æ˜¯æ‰€æœ‰çš„å¤´ç‚¹å¤´ï¼›åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ç†ŠçŒ«æ—¶æ„Ÿè§‰åˆ°çš„å¸¸è§æ²¹æ¼†ç‚¹ã€‚**

## **é›†æˆæµ‹è¯•å’Œå•å…ƒæµ‹è¯•æ˜¯ä¸€ä¸ªæŒ‘æˆ˜**

**ç†ŠçŒ«ä»£ç é€šå¸¸è¢«å†™æˆçº¿æ€§ python è„šæœ¬ã€‚è¿™å¾ˆå¯èƒ½æ˜¯å› ä¸ºå®ƒæœ€åˆæ˜¯ä»ä¸€ä¸ª [Jupyterhub](https://jupyter.org/hub) ç¬”è®°æœ¬çš„ä¸åŒå•å…ƒä¸­çš„ä»£ç å¼€å§‹çš„ï¼Œè¿™äº›å•å…ƒæœ¬èº«æ˜¯çº¿æ€§æ‰§è¡Œçš„ã€‚è¿™ç§æ–¹æ³•ä½¿å¾—é•¿æ—¶é—´æµ‹è¯•å˜å¾—å›°éš¾ã€‚å½“ç„¶ï¼Œå½“ä½ å¼€å‘è„šæœ¬æ—¶ï¼Œä½ ä¹Ÿåœ¨â€œæµ‹è¯•â€å®ƒã€‚ä½†æ˜¯ä¸€æ—¦æŠ•å…¥ç”Ÿäº§ï¼Œæ—¶é—´å¯èƒ½ä¼šæµé€ï¼Œæ•°æ®çš„èƒŒæ™¯å¯èƒ½ä¼šæ”¹å˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨éœ€è¦è°ƒæ•´æ­£åœ¨è¿è¡Œçš„ç”Ÿäº§ç†ŠçŒ«ä»£ç ï¼Œæ‚¨å¦‚ä½•ç¡®ä¿¡æ‚¨æ‰€åšçš„æ›´æ”¹ä¸ä¼šäº§ç”Ÿè´Ÿé¢å½±å“ï¼Ÿå•å…ƒæµ‹è¯•å¾ˆå¯èƒ½ä¸å­˜åœ¨ï¼Œæˆ–è€…æµ‹è¯•è¦†ç›–ç‡å‚å·®ä¸é½ï¼›ç¼–å†™å†…è” Pandas æ“ä½œå¾ˆå®¹æ˜“åšåˆ°ï¼Œä½†å¾ˆéš¾è¿›è¡Œç¼–ç¨‹æµ‹è¯•ã€‚è€Œé›†æˆæµ‹è¯•é€šå¸¸æ¶‰åŠåˆ°è¿è¡Œæ•´ä¸ªè„šæœ¬ã€‚å¦‚æœå®ƒè¿›è¡Œå¤§é‡çš„è®¡ç®—ï¼Œè¿™æ„å‘³ç€æµ‹è¯•æ‰€æœ‰ä¸œè¥¿çš„è¿­ä»£å‘¨æœŸå¾ˆæ…¢ï¼Œæˆ–è€…å¯èƒ½å®Œå…¨è·³è¿‡æµ‹è¯•ã€‚**

## **æ–‡æ¡£ä¸å­˜åœ¨**

**æ–‡æ¡£å¯¹äºåä½œå’Œä»£ç ç»´æŠ¤è‡³å…³é‡è¦ã€‚å¦‚æœæ‚¨ä¹ æƒ¯äºç¼–å†™å†…è”åˆ›å»ºä¸€å †åˆ—çš„ Pandas ä»£ç (å› ä¸ºè¿™å¾ˆå®¹æ˜“åšåˆ°)ï¼Œé‚£ä¹ˆæ‚¨æ€»æ˜¯ä¼šç‰ºç‰²æ–‡æ¡£ã€‚æ–‡æ¡£åº”è¯¥å®¹æ˜“å‘ˆç°ï¼Œå¹¶ä¸ä»£ç åŒæ­¥ã€‚ä¸€æ—¦ä½ å¼€å§‹æŠŠæ–‡æ¡£æ”¾åœ¨ä»£ç ä¹‹å¤–ï¼Œå®ƒå°±å¾ˆå®¹æ˜“è¿‡æ—¶â€¦**

## **ä»£ç å¾ˆéš¾é‡ç”¨**

**é€šå¸¸ä¼šçœ‹åˆ°ä¸€ä¸ª python æ–‡ä»¶åŒ…å«æ‰€æœ‰çš„ç†ŠçŒ«ä»£ç :æå–æ•°æ®çš„é€»è¾‘ã€æ‰§è¡Œè½¬æ¢çš„é€»è¾‘å’Œä¿å­˜è¾“å‡ºçš„é€»è¾‘ã€‚è¿™æ„å‘³ç€è¿™ä¸ªè„šæœ¬ä¸­çš„è½¬æ¢å‡½æ•°ä¸å®¹æ˜“è®¿é—®æˆ–é‡ç”¨ã€‚æœ‰äº›äººåé©³è¯´â€œæˆ‘å°±é‡æ„â€ï¼Œä½†è¿™ç§æƒ…å†µä¼šå‘ç”Ÿå‡ æ¬¡å‘¢ï¼Ÿäººä»¬æœ€ç»ˆä¼šå‰ªåˆ‡å’Œç²˜è´´ä»£ç ï¼Œæˆ–è€…ä¸€éåˆä¸€éåœ°é‡æ–°å®ç°ç›¸åŒçš„é€»è¾‘ã€‚**

## **é™¤äº†ä½ ï¼Œæ²¡äººæ‡‚ä½ çš„ç†ŠçŒ«å¯†ç **

**ä½œä¸ºä¸€åå‰æ•°æ®ç§‘å­¦å®¶ï¼Œæˆ‘åˆ‡èº«ä½“ä¼šåˆ°ç»§æ‰¿ä»–äººä»£ç çš„å¯æ€•ä¹‹å¤„ã€‚ç†ŠçŒ«æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œä½†æ¯ä¸ªäººä½¿ç”¨å®ƒçš„æ–¹å¼ä¸åŒã€‚è€ƒè™‘åˆ°ä¸Šé¢æåˆ°çš„æµ‹è¯•ã€æ–‡æ¡£å’Œå¯é‡ç”¨æ€§ï¼Œè‡³å°‘å¯ä»¥è¯´ï¼Œæ‹¥æœ‰åˆ«äººçš„ Pandas ä»£ç æ˜¯ä»¤äººç”Ÿç•çš„ã€‚**

# **å“ˆå¯†å°”é¡¿**

**[Hamilton](https://github.com/DAGWorks-Inc/hamilton) å°±æ˜¯ä¸ºäº†è§£å†³ä¸Šé¢å¼•å‡ºçš„é—®é¢˜è€Œå»ºé€ çš„â€”â€”æŠŠä¸€ä¸ªæ‚ä¹±çš„ç†ŠçŒ«ä»£ç åº“å˜æˆä¸€ä¸ª*æ•´æ´çš„*ã€‚ä¸ï¼Œä¸ä½ å¯èƒ½çŸ¥é“å’Œå–œçˆ±çš„ R tidyverse ä¸å®Œå…¨ç›¸åŒï¼Œä½†åœ¨ç²¾ç¥ä¸Šæ˜¯ç›¸åŒçš„â€¦**

## **ä»€ä¹ˆæ˜¯æ±‰å¯†å°”é¡¿ï¼Ÿ**

**Hamilton æ˜¯ç”¨äºæŒ‡å®š[æ•°æ®æµ](https://en.wikipedia.org/wiki/Dataflow)çš„å£°æ˜æ€§èŒƒä¾‹ã€‚è¿™åªæ˜¯å­¦æœ¯ä¸Šçš„è¯´æ³•:**

1.  **é€šè¿‡åœ¨å‡½æ•°å®šä¹‰ä¸­ç›´æ¥ç¼–ç ï¼Œæ‚¨å¯ä»¥ç¼–å†™ python å‡½æ•°æ¥å£°æ˜å®ƒä»¬è¾“å‡ºä»€ä¹ˆä»¥åŠå®ƒä»¬ä¾èµ–ä»€ä¹ˆã€‚**
2.  **æ‚¨ç¼–å†™è¿™äº› python å‡½æ•°æ¥æŒ‡å®šæ•°æ®å’Œè®¡ç®—åº”è¯¥å¦‚ä½•æµåŠ¨ï¼Œå³æ•°æ®æµ(ä¹Ÿç§°ä¸ºç®¡é“/å·¥ä½œæµ)ã€‚**

**åœ¨ä»£ç ä¸­ï¼Œè¿™æ„å‘³ç€:**

```
df['age_mean'] = df['age'].mean()
df['age_zero_mean'] = df['age'] - df['age_mean']
```

**ä½ å†™ä½œ**

```
# a_function_module.py
def age_mean(age: pd.Series) -> float:
    *"""Average of age"""* return age.mean()

def age_zero_mean(age: pd.Series**,** age_mean: float) -> pd.Series:
    *"""Zero mean of age"""* return age - age_mean
```

**ç„¶åï¼Œæ‚¨å¿…é¡»ç¼–å†™ä¸€äº›â€œ*é©±åŠ¨ç¨‹åº*â€ä»£ç æ¥å®é™…æ‰§è¡Œè®¡ç®—ã€‚â€œ*é©±åŠ¨ç¨‹åº*â€ä»£ç çš„èŒè´£æ˜¯å®ä¾‹åŒ–ä»€ä¹ˆå‡½æ•°å¯ä»¥å¹¶ä¸”åº”è¯¥è¢«è®¡ç®—ï¼Œä»¥åŠå¦‚ä½•è®¡ç®—ã€‚**

```
import pandas as pd
from hamilton import driver
import a_function_module # where your transforms liveconfig_and_inputs = {'age': pd.Series([...])}
dr = driver.Driver(config_and_inputs**,** a_function_module)# here we're constructing a data frame with only two columns
df = dr.execute(['age', 'age_zero_mean'])
```

**åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†è·³è¿‡å¯¹æ±‰å¯†å°”é¡¿çš„è¯¦ç»†ä»‹ç»ï¼Œè€Œæ˜¯é“¾æ¥åˆ°ä»¥å‰çš„ä»‹ç»:**

*   **[å¦‚ä½•åœ¨ 5 åˆ†é’Ÿå†…å¯¹ç†ŠçŒ«ä½¿ç”¨æ±‰å¯†å°”é¡¿](/how-to-use-hamilton-with-pandas-in-5-minutes-89f63e5af8f5)**
*   **[ä¸€èˆ¬èƒŒæ™¯æ•…äº‹&æ±‰å¯†å°”é¡¿ç®€ä»‹](/functions-dags-introducing-hamilton-a-microframework-for-dataframe-generation-more-8e34b84efc1d)**

**å¦åˆ™ä½ åªéœ€è¦`pip install sf-hamilton`å°±å¯ä»¥å¼€å§‹äº†ã€‚**

## **ä¸ºä»€ä¹ˆä½¿ç”¨ Hamilton ä¼šäº§ç”Ÿæ•´æ´çš„ç†ŠçŒ«ä»£ç ï¼Ÿ**

**ä»¥ä¸‹æ˜¯å››ä¸ªä¸»è¦åŸå› :**

1.  **å¯æµ‹è¯•ä»£ç ï¼Œ**æ€»æ˜¯**ã€‚**
2.  **æ–‡æ¡£å‹å¥½ä»£ç ï¼Œ**æ€»æ˜¯**ã€‚**
3.  **å¯é‡ç”¨é€»è¾‘ï¼Œ**æ€»æ˜¯**ã€‚**
4.  **è¿è¡Œæ—¶æ•°æ®è´¨é‡æ£€æŸ¥ï¼Œ**æ€»æ˜¯**ã€‚**

**è®©æˆ‘ä»¬ç”¨ä¸‹é¢çš„å‡½æ•°æ¥è®¨è®ºè¿™å‡ ç‚¹:**

**ç¤ºä¾‹å“ˆå¯†å°”é¡¿å‡½æ•°**

## **å¯æµ‹è¯•çš„ä»£ç ï¼Œæ€»æ˜¯**

**Hamilton è¿«ä½¿æ‚¨ç¼–å†™ä¸æŒ‡å®šæ•°æ®å¦‚ä½•åˆ°è¾¾å‡½æ•°æ— å…³çš„å‡½æ•°ã€‚è¿™æ„å‘³ç€æ€»æ˜¯ä¸º*å•å…ƒæµ‹è¯•*æä¾›è¾“å…¥æ˜¯å¾ˆç®€å•çš„ã€‚åœ¨ä¸Šé¢çš„å‡½æ•°ä¸­ï¼Œæä¾›`height_zero_mean`å’Œ`height_std_dev`åªæ˜¯ä¸ºæ¯ä¸€ä¸ªæ‹¿å‡ºä¸€ä¸ªæœ‰ä»£è¡¨æ€§çš„ç†ŠçŒ«ç³»åˆ—æ¥æµ‹è¯•è¿™ä¸ªå‡½æ•°ï¼›åœ¨å®šä¹‰å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šå¦‚ä½•æä¾›è¾“å…¥ã€‚**

**ç±»ä¼¼åœ°ï¼Œäººä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨ Hamilton ç«¯åˆ°ç«¯åœ°æµ‹è¯•ä¸Šè¿°å‡½æ•°ã€‚ä½ åªéœ€è¦å°†è®¡ç®—`height_zero_mean_unit_variance`æŒ‡å®šç»™â€œ*é©±åŠ¨*â€ä»£ç ï¼Œå®ƒå°±ä¼šæ‰§è¡Œäº§ç”Ÿ`height_zero_mean_unit_variance.`æ‰€éœ€çš„åŠŸèƒ½ï¼Œè¿™æ ·å³ä½¿æ˜¯é›†æˆæµ‹è¯•å‘¨æœŸä¹Ÿä¼šç›¸å¯¹è¾ƒå¿«ã€‚æ‚¨ä¸éœ€è¦è¿è¡Œæ•´ä¸ªè„šæœ¬å¹¶è®¡ç®—ä¸€åˆ‡æ¥æµ‹è¯•å•ä¸ªæ›´æ”¹ã€‚å³:**

```
df = dr.execute(['height_zero_mean_unit_variance'])
```

## **æ–‡æ¡£å‹å¥½çš„ä»£ç ï¼Œæ€»æ˜¯è¿™æ ·ã€‚**

**Hamilton æœ‰å››ä¸ªæœ‰åŠ©äºæ–‡æ¡£çš„åŠŸèƒ½:**

1.  ****åŠŸèƒ½**ã€‚é€šè¿‡ä½¿ç”¨å‡½æ•°ä½œä¸ºæŠ½è±¡ï¼Œäººä»¬å¯ä»¥è‡ªç„¶åœ°é€šè¿‡å‡½æ•°çš„ [docstring](https://www.programiz.com/python-programming/docstrings) æ’å…¥æ–‡æ¡£ã€‚ç„¶åï¼Œè¿™å¯ä»¥ä¸å·¥å…·è¿æ¥ï¼Œå¦‚ [sphinx](https://www.sphinx-doc.org/en/master/) æ¥æ›´å¹¿æ³›åœ°å±•ç¤ºè¿™äº›ã€‚**
2.  ****å‘½å**ã€‚æ±‰å¯†å°”é¡¿å¼ºè¿«*å‘½å*æˆä¸ºä½ è„‘æµ·ä¸­çš„ç„¦ç‚¹ã€‚ç”±äºé©±åŠ¨ç¨‹åº`.execute()` å‡½æ•°è¯·æ±‚çš„åˆ—åä¸æ‚¨(æˆ–åŒäº‹)ç¼–å†™çš„å‡½æ•°ç›¸å¯¹åº”ï¼Œæè¿°æ€§çš„ã€ç®€æ´çš„åç§°é€æ¸æˆä¸ºè§„èŒƒã€‚æ­¤å¤–ï¼Œä»å‡½æ•°ååˆ°å‡½æ•°å‚æ•°ï¼Œä»£ç è¯»èµ·æ¥è‡ªç„¶è€Œç›´è§‚ï¼›ä½¿ç”¨ Hamilton æ—¶ï¼Œå¾ˆéš¾å‘½åä»»ä½•é‡è¦çš„ä¸œè¥¿` [*foobar*](https://en.wikipedia.org/wiki/Foobar) `ã€‚**
3.  ****å¯è§†åŒ–**ã€‚Hamilton å¯ä»¥ç”Ÿæˆä¸€ä¸ª graphviz æ–‡ä»¶å›¾åƒï¼Œè¯¥å›¾åƒå¯ä»¥ç”Ÿæˆå‡½æ•°å¦‚ä½•è”ç³»åœ¨ä¸€èµ·çš„å›¾å½¢è¡¨ç¤ºã€‚è¿™æ˜¯å¸®åŠ©äººä»¬äº†è§£å…¨å±€çš„é‡è¦å·¥å…·ã€‚ä¾‹å¦‚ï¼Œè¯·å‚è§ä¸‹é¢çš„å¯è§†åŒ–ç¤ºä¾‹ã€‚**
4.  ****æ ‡ç­¾**ã€‚Hamilton ä½¿äººä»¬èƒ½å¤Ÿé€šè¿‡æ³¨é‡Šå‡½æ•°æ¥åˆ†é…æ ‡ç­¾(é”®å€¼å¯¹)ã€‚å¦‚ä¸Šä¾‹æ‰€ç¤ºï¼Œ`@tag(owner='Data-Science', pii='False')`æä¾›äº†é¢å¤–çš„å…ƒæ•°æ®æ¥å¸®åŠ©ä»£ç è¯»è€…ç†è§£ï¼Œä¾‹å¦‚ï¼Œè°æ‹¥æœ‰ä»£ç ï¼Œå®ƒæ˜¯å¦åŒ…å«ä¸ªäººè¯†åˆ«ä¿¡æ¯ã€‚**

**![](img/f55d8da57cf8e81c7b41ebaad4d768e0.png)**

**æ±‰å¯†å°”é¡¿å¯ä»¥ç”Ÿæˆçš„ç¤ºä¾‹æ¸²æŸ“ã€‚ç»[https://outer bounds . com/blog/developing-scalable-feature-engineering-DAGs](https://outerbounds.com/blog/developing-scalable-feature-engineering-dags)è®¸å¯æ‹æ‘„ã€‚**

## **å¯é‡ç”¨é€»è¾‘ï¼Œæ°¸è¿œå¦‚æ­¤ã€‚**

**ä¸ºäº†æœ‰ç”¨ï¼Œä¸Šé¢çš„å‡½æ•°éœ€è¦åœ¨ python æ¨¡å—ä¸­ç®¡ç†ã€‚å› ä¸ºè¯¥æ¨¡å—æ²¡æœ‰è€¦åˆåˆ°â€œé©±åŠ¨ç¨‹åºâ€ä»£ç ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“åœ¨å„ç§ä¸Šä¸‹æ–‡ä¸­å¼•ç”¨è¯¥å‡½æ•°:**

1.  **å¤šä¸ªé©±åŠ¨ç¨‹åºå¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªåŠŸèƒ½ã€‚è¿™äº›é©±åŠ¨å™¨å¯ä»¥ä¸åŒåœ°æ„é€  DAGï¼Œä¾‹å¦‚é€šè¿‡ä»ä¸åŒçš„ä½ç½®åŠ è½½æ•°æ®ã€‚æ‰€ä»¥ä»ç¬¬ä¸€å¤©èµ·å°±æœ‰ä»£ç é‡ç”¨ã€‚**
2.  **å¦‚æœä½ æœ‰ä¸€ä¸ª Python [REPL](https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop) ï¼Œå¯¼å…¥å‡½æ•°å¹¶è¿è¡Œå®ƒå°±å¾ˆå®¹æ˜“äº†ã€‚**
3.  **æ‚¨å¯ä»¥å‘å¸ƒè¯¥å‡½æ•°çš„æ¨¡å—å¹¶å¯¹å…¶è¿›è¡Œç‰ˆæœ¬åŒ–ï¼Œä»¥å®ç°é‡ç”¨å’Œå¯é‡ç”¨æ€§ã€‚**

**æ­¤å¤–ï¼Œç”±äº Hamilton å¼ºåˆ¶æ‰€æœ‰æ ¸å¿ƒé€»è¾‘ä½äºä¸â€œé©±åŠ¨ç¨‹åºä»£ç â€åˆ†ç¦»çš„åŠŸèƒ½ä¸­ï¼Œå› æ­¤ Hamilton å¾ˆå®¹æ˜“æä¾›å¼€ç®±å³ç”¨çš„æ–¹æ³•æ¥æ‰©å±•è®¡ç®—ã€‚åƒ [Ray](https://ray.io/) å’Œ [Dask](https://www.dask.org/) è¿™æ ·çš„æ¡†æ¶å¾ˆå®¹æ˜“æ‰“å¼€å’Œé›†æˆã€‚ä½ æ‰€éœ€è¦åšçš„å°±æ˜¯åœ¨ä½ çš„â€œé©±åŠ¨ç¨‹åºâ€ä»£ç ä¸­ä¿®æ”¹å‡ è¡Œä»£ç ã€‚æ›´å¤šä¿¡æ¯å‚è§æ±‰å¯†å°”é¡¿çš„[é›·](https://github.com/stitchfix/hamilton/tree/main/examples/ray) & [è¾¾æ–¯å…‹](https://github.com/stitchfix/hamilton/tree/main/examples/dask)ä¾‹å­ã€‚**

## **è¿è¡Œæ—¶æ•°æ®è´¨é‡æ£€æŸ¥ï¼Œæ€»æ˜¯ã€‚**

**å•å…ƒæµ‹è¯•æ˜¯æœ‰ä»·å€¼çš„ï¼Œä½†æ˜¯å®ƒä¸èƒ½ä»£æ›¿åœ¨ç”Ÿäº§ä¸­éªŒè¯å‡è®¾ã€‚è€Œä¸æ˜¯ä½¿ç”¨å•ç‹¬çš„ä»»åŠ¡(ç”šè‡³å•ç‹¬çš„å‡½æ•°)æ¥æ£€æŸ¥æ•°æ®ã€‚Hamilton æ”¯æŒä½¿ç”¨ç®€å•çš„è£…é¥°å™¨åœ¨è¿è¡Œæ—¶å¯¹å‡½æ•°çš„è¾“å‡ºè¿›è¡ŒéªŒè¯:**

```
@check_output(data_type=np.float64, range=(-5.0, 5.0), allow_nans=False)
```

**è¿™ä½¿å¾—ä¸äº†è§£ä»£ç ä¸Šä¸‹æ–‡çš„äººå¾ˆå®¹æ˜“ç†è§£è¾“å‡ºçš„ä¸€äº›åŸºæœ¬å±æ€§ã€‚å› ä¸ºè£…é¥°å™¨ä¸è½¬æ¢å‡½æ•°å®šä¹‰ç›¸é‚»ï¼Œæ‰€ä»¥ç»´æŠ¤èµ·æ¥è¦ç®€å•å¾—å¤šã€‚æ²¡æœ‰å•ç‹¬çš„ç³»ç»Ÿéœ€è¦æ›´æ–°â€”æ‚¨å¯ä»¥åœ¨ä¸€ä¸ªæ‹‰å–è¯·æ±‚ä¸­å®Œæˆæ‰€æœ‰å·¥ä½œï¼**

**å½“å‡½æ•°è¢«æ‰§è¡Œå¹¶ä¸”éªŒè¯å¤±è´¥æ—¶ï¼Œå½“å‰çš„é€‰é¡¹æ˜¯è®°å½•ä¸€ä¸ªè­¦å‘Šæˆ–è€…æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚è¿™æ˜¯ä¸€ç§éå¸¸å¿«é€Ÿç®€å•çš„æ–¹æ³•ï¼Œå¯ä»¥ç¡®ä¿ç”Ÿäº§ä¸­è¿è¡Œçš„å†…å®¹ç¬¦åˆæ‚¨çš„æœŸæœ›ã€‚**

**é‚£äº›æ›´å–œæ¬¢æ½˜å¾·æ‹‰çš„åŠ›é‡çš„äººï¼Œæ¬¢å‘¼å§ï¼Hamilton ä¸­çš„æ•°æ®éªŒè¯æ˜¯å®Œå…¨é›†æˆçš„ï¼Œæ‚¨å¯ä»¥å°†ä¸€ä¸ª [Pandera æ¨¡å¼ä¼ é€’ç»™ decorator](https://github.com/DAGWorks-Inc/hamilton/tree/main/examples/data_quality/pandera) ã€‚**

## **é¢å¤–å¥½å¤„**

**é™¤äº†ä½¿ä½ çš„ç†ŠçŒ«ä»£ç åº“æ•´æ´ä¹‹å¤–ï¼ŒHamilton è¿˜åœ¨ä½ çš„ç†ŠçŒ«å¼€å‘å·¥ä½œæµç¨‹çš„è¿™äº›æ›´å®è§‚çš„æ–¹é¢æä¾›å¸®åŠ©ã€‚**

## **æ›´å¿«çš„è¿­ä»£å‘¨æœŸã€‚**

**ä¸€æ—¦ Hamilton å¯åŠ¨å¹¶è¿è¡Œï¼Œæ·»åŠ ã€æ›´æ”¹å’Œè°ƒæ•´ä»£ç çš„çµæ´»æ€§å°±å¾ˆç®€å•äº†ã€‚æ‚¨å¯ä»¥:**

*   **ä»¥[æµ‹è¯•é©±åŠ¨çš„æ–¹å¼å¼€å‘](https://en.wikipedia.org/wiki/Test-driven_development)ã€‚**
*   **é€šè¿‡ä»…è¯·æ±‚è®¡ç®—æ‰€éœ€çš„å†…å®¹ï¼Œè½»æ¾æµ‹è¯•æ‚¨çš„æ›´æ”¹**
*   **é€šè¿‡è·Ÿè¸ªè®¡ç®—æ•°æ®è°±ç³»æœ‰æ¡ä¸ç´Šåœ°è¿›è¡Œè°ƒè¯•ã€‚æ‚¨ä»å‡½æ•°å¼€å§‹ï¼Œè°ƒè¯•é€»è¾‘ï¼Œå¦‚æœé—®é¢˜å‡ºåœ¨å…¶ä»–åœ°æ–¹ï¼Œæ‚¨å¯ä»¥é€šè¿‡å‡½æ•°çš„è¾“å…¥è¿­ä»£é€’å½’ã€‚**
*   **åˆ©ç”¨æ‚¨é¢„å…ˆå®šä¹‰çš„åŠŸèƒ½ï¼Œéå¸¸å®¹æ˜“åœ°ä¸ºå¤šä¸ªä¸Šä¸‹æ–‡åˆ›å»ºé©±åŠ¨ç¨‹åºã€‚**

## **æ›´å¿«çš„å…¥èŒã€‚**

**ç”±äºç¼–å†™äº†å¸¦æœ‰å„ç§æ–‡æ¡£æŒ‚é’©çš„å‡½æ•°ï¼Œå¢åŠ æ–°å‘˜å·¥å˜å¾—ç®€å•å¤šäº†ã€‚æ¢ç´¢ä»£ç åº“å¯ä»¥ç”¨å›¾å½¢åŒ–çš„æ–¹å¼æ¥å®Œæˆï¼Œè¿è¡Œå’Œæµ‹è¯•ä»£ç ä¹Ÿå¾ˆå®¹æ˜“è§£é‡Šã€‚**

## **èŠ±åœ¨ä»£ç ç»´æŠ¤å’Œä¿å…»ä¸Šçš„æ—¶é—´æ›´å°‘**

**é€šè¿‡è®¾è®¡ï¼ŒHamilton ä½¿å¾—éµå¾ªè½¯ä»¶å·¥ç¨‹æœ€ä½³å®è·µå˜å¾—å®¹æ˜“ã€‚è¿™æ„å‘³ç€ç»´æŠ¤ã€ç»§æ‰¿ç”šè‡³ç§»äº¤ä»£ç æ˜¯éå¸¸å®¹æ˜“ç®¡ç†çš„ã€‚è¿™ä¹Ÿæ„å‘³ç€å¾ˆå®¹æ˜“ä½¿æ‚¨çš„æ‰€æœ‰è½¬æ¢é€»è¾‘çœ‹èµ·æ¥ç»Ÿä¸€å’Œç¾è§‚(ä¾‹å¦‚å‚è§ä¸‹ä¸€èŠ‚ä¸­çš„é“¾æ¥),å¹¶ä¿æŒè¿™ç§æ–¹å¼ã€‚**

# **ç°å®çš„ä¾‹å­**

**æˆ‘å¹å˜˜äº†å®ƒçš„å¥½å¤„ï¼Œä½†æ˜¯ä»£ç å®é™…ä¸Šæ˜¯ä»€ä¹ˆæ ·å­çš„å‘¢ï¼Ÿä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­:**

**>å°† Hamilton ä¸ [Metaflow](https://metaflow.org/) ç»“åˆ:**

*   **å‚è§ [normalized_features.py](https://github.com/outerbounds/hamilton-metaflow/blob/main/absenteeism/normalized_features.py) å’Œ [feature_logic.py](https://github.com/outerbounds/hamilton-metaflow/blob/main/absenteeism/feature_logic.py) ã€‚ğŸ¤”åé—®å¥:ç»§æ‰¿è¿™æ®µä»£ç ä½ ä¼šæœ‰ä»€ä¹ˆæ„Ÿè§‰ï¼Ÿ**
*   **[é™„å¸¦åšæ–‡](https://outerbounds.com/blog/developing-scalable-feature-engineering-dags)**

**>æ±‰å¯†å°”é¡¿çŸ¥è¯†åº“ä¸­çš„ä¸€ä¸ªç¤ºä¾‹:**

*   **[æ•°æ®è´¨é‡](https://github.com/DAGWorks-Inc/hamilton/tree/main/examples/data_quality/simple)(åŸºäºä¸Šè¿°ç¤ºä¾‹ï¼Œä½†åŒ…æ‹¬`@check_output`æ³¨é‡Š)ã€‚æœ‰å…³ Pandera çš„ç¤ºä¾‹ï¼Œè¯·å‚è§[æœ¬ç¤ºä¾‹](https://github.com/DAGWorks-Inc/hamilton/tree/main/examples/data_quality/pandera)ã€‚**

# **æœ€å**

**ä»£ç çš„å¯¿å‘½æ¯”ä½ é€šå¸¸é¢„æœŸçš„è¦é•¿å¾—å¤šã€‚ç¡®ä¿å®ƒæ˜“äºç¼–å†™ã€ç»´æŠ¤ï¼Œå¹¶èƒ½è¢«æ‚¨ä¹‹åçš„äººè®¿é—®ï¼Œè¿™æ˜¯ä½¿ç†ŠçŒ«åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å·¥ä½œçš„ä¸€ä¸ªå…³é”®å› ç´ ã€‚æ±‰å¯†å°”é¡¿ç†ŠçŒ«å¸®ä½ åšåˆ°è¿™ä¸€åˆ‡ã€‚å°†æ±‰å¯†å°”é¡¿ä¸ Pandas ä¸€èµ·ä½¿ç”¨ä¼šäº§ç”Ÿæ•´æ´çš„äº§å“ä»£ç ï¼Œæ— è®ºæ˜¯è°ç¼–å†™çš„ï¼Œéƒ½å¯ä»¥åœ¨è®¡ç®—ä¸Š(ä¾‹å¦‚ [Ray](https://github.com/stitchfix/hamilton/tree/main/examples/ray) ã€ [Dask](https://github.com/stitchfix/hamilton/tree/main/examples/dask) )å’Œç»„ç»‡ä¸Šè¿›è¡Œç»´æŠ¤å’Œæ‰©å±•ã€‚**

**æˆ‘ä»¬å¸Œæœ›æ‚¨èƒ½å¤Ÿ:**

*   **ğŸ’ªå¦‚æœä½ è¿˜æ²¡è¯•è¿‡ï¼Œè¯•è¯•æ±‰å¯†å°”é¡¿ T2ã€‚åˆšåˆš`pip install sf-hamilton`å¼€å§‹ã€‚**
*   **github ä¸Šçš„â­ï¸ç¾å›½ï¼Œ**
*   **ğŸ“å¦‚æœä½ å‘ç°äº†ä»€ä¹ˆï¼Œç»™æˆ‘ä»¬ç•™ä¸ªé—®é¢˜ï¼Œ**
*   **ğŸ“£[åŠ å…¥æˆ‘ä»¬çš„ slack ç¤¾åŒº](https://join.slack.com/t/hamilton-opensource/shared_invite/zt-1bjs72asx-wcUTgH7q7QX1igiQ5bbdcg) â€”æˆ‘ä»¬éå¸¸ä¹æ„å¸®åŠ©å›ç­”æ‚¨å¯èƒ½æœ‰çš„é—®é¢˜æˆ–å¸®åŠ©æ‚¨èµ·æ­¥ã€‚**

## **æ‚¨å¯èƒ½æ„Ÿå…´è¶£çš„å…¶ä»–æ±‰å¯†å°”é¡¿å¸–å­:**

*   **[å¦‚ä½•åœ¨ 5 åˆ†é’Ÿå†…å°†æ±‰å¯†å°”é¡¿ä¸ç†ŠçŒ«é…åˆä½¿ç”¨](/how-to-use-hamilton-with-pandas-in-5-minutes-89f63e5af8f5)**
*   **[å¦‚ä½•åœ¨ç¬”è®°æœ¬ç¯å¢ƒä¸­ä½¿ç”¨ Hamilton](/how-to-iterate-with-hamilton-in-a-notebook-8ec0f85851ed)**
*   **[ä¸€èˆ¬èƒŒæ™¯æ•…äº‹&æ±‰å¯†å°”é¡¿ç®€ä»‹](/functions-dags-introducing-hamilton-a-microframework-for-dataframe-generation-more-8e34b84efc1d)**
*   **[å¼€å‘å¯æ‰©å±•çš„ç‰¹å¾å·¥ç¨‹ DAGs](https://outerbounds.com/blog/developing-scalable-feature-engineering-dags) (Hamilton with Metaflow)**
*   **[ä½¿ç”¨æ±‰å¯†å°”é¡¿åˆ›å»ºæ•°æ®æµçš„é¢å¤–å¥½å¤„](https://medium.com/@thijean/the-perks-of-creating-dataflows-with-hamilton-36e8c56dd2a)(æ±‰å¯†å°”é¡¿ä¸Šçš„æœ‰æœºç”¨æˆ·å¸–å­ï¼)**