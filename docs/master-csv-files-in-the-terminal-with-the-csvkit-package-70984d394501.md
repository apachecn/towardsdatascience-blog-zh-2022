# ä½¿ç”¨ Csvkit åŒ…åœ¨ç»ˆç«¯ä¸­æ§åˆ¶ CSV æ–‡ä»¶

> åŸæ–‡ï¼š<https://towardsdatascience.com/master-csv-files-in-the-terminal-with-the-csvkit-package-70984d394501>

## ä½¿ç”¨ Excel å¹¶ä¸æ€»æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚

![](img/8639a2862ce012b1f8fca51fbcdfe593.png)

ç…§ç‰‡ç”±[è¥¿æ ¼è’™å¾·](https://unsplash.com/@sigmund?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) æ‹æ‘„

# æ‚¨çš„æ—…ç¨‹æ¦‚è¿°

1.  [ä¸ºä»€ä¹ˆè¦åœ¨ç»ˆç«¯å¤„ç† CSV æ–‡ä»¶ï¼Ÿ](#c0e1)
2.  [å¿«é€Ÿè®¾ç½®](#8929)
3.  [Excel é»‘ä»”(in2csv)](#c793)
4.  [æ•°æ® Scapel (csvcut)](#85f5)
5.  [å¥½çœ‹(csvlook)](#4079)
6.  [ç‰›é€¼ç»Ÿè®¡(csvstat)](#138e)
7.  [å·§å¦™æœç´¢(csvgrep)](#5243)
8.  [åŒ…è£…](#294e)

# 1 â€”ä¸ºä»€ä¹ˆè¦åœ¨ç»ˆç«¯ä¸­å¤„ç† CSV æ–‡ä»¶ï¼Ÿ

å¾ˆå°‘æœ‰äº‹æƒ…èƒ½åƒåœ¨**å‘½ä»¤è¡Œç»ˆç«¯**ä¸­å·¥ä½œä¸€æ ·ä»¤äººç”Ÿç•ã€‚è®¸å¤šæ•°æ®ç§‘å­¦å®¶æ²¡æœ‰è®¡ç®—æœºç§‘å­¦èƒŒæ™¯ï¼Œå› æ­¤ä¸ä¹ æƒ¯è¿™æ ·ã€‚ç”šè‡³çœ‹èµ·æ¥åœ¨å‘½ä»¤è¡Œç»ˆç«¯å·¥ä½œå·²ç»æ˜¯è¿‡å»çš„äº‹æƒ…äº†ğŸ˜§

æˆ‘åœ¨è¿™é‡Œå‘Šè¯‰ä½ ï¼Œè¿™æ˜¯å‡çš„ã€‚äº‹å®ä¸Šï¼Œéšç€åƒ [Azure Cloud Shell](https://docs.microsoft.com/en-us/azure/cloud-shell/overview) è¿™æ ·çš„åŸºäºäº‘çš„ Shell çš„å¢åŠ ï¼Œå­¦ä¹ å‘½ä»¤è¡Œæ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´æœ‰ä»·å€¼ã€‚äº‹å®æ˜¯å‘½ä»¤è¡Œæ˜¯ä¸€ä¸ª*æ•ˆç‡åŠ©æ¨å™¨*ã€‚å¯¹æ–‡ä»¶å¤¹ä½¿ç”¨å›¾å½¢ç”¨æˆ·ç•Œé¢(GUI)å¯¹äºç®€å•çš„äº‹æƒ…æ¥è¯´æ˜¯æœ€å®¹æ˜“çš„ï¼Œä½†æ˜¯å¯¹äºè¾ƒéš¾çš„äº‹æƒ…æ¥è¯´å°±å˜å¾—è¶Šæ¥è¶Šå¤æ‚äº†ã€‚

å¯¹äºæ•°æ®ç§‘å­¦å®¶/æ•°æ®å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œæœ‰è®¸å¤šç»ˆç«¯å·¥å…·å¯ä»¥å¿«é€Ÿå¤„ç†ç»ˆç«¯ä¸­çš„æ•°æ®ã€‚åœ¨è¿™ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘å°†å‘Šè¯‰ä½ ä¸€ä¸ªæˆ‘æœ€å–œæ¬¢çš„å«åš [csvkit](https://csvkit.readthedocs.io/en/latest/tutorial.html) çš„ä¸œè¥¿ã€‚è¿™æ˜¯ä¸€ä¸ªåœ¨ç»ˆç«¯ä¸­å¤„ç† CSV æ–‡ä»¶çš„å·¥å…·ã€‚å¦‚æœæ‚¨æ­£åœ¨å¤„ç† CSV æ–‡ä»¶æˆ– Excel æ–‡ä»¶å½¢å¼çš„æœˆåº¦æŠ¥å‘Šï¼Œè¿™å°†éå¸¸æœ‰ç”¨ã€‚ä½¿ç”¨ csvkitï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°:

*   å°† excel æ–‡ä»¶è½¬æ¢ä¸º CSV æ–‡ä»¶
*   æ‰“å°æ ¼å¼è‰¯å¥½çš„ CSV æ–‡ä»¶
*   å‰ªåˆ‡ç‰¹å®šçš„åˆ—
*   è·å–æœ‰å…³åˆ—çš„ç»Ÿè®¡ä¿¡æ¯
*   ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åœ¨åˆ—å†…æœç´¢

è¿˜æœ‰æ›´å¤šï¼æ‚¨ä¹Ÿè®¸å¯ä»¥ç”¨ Excel åšåŒæ ·çš„äº‹æƒ…ã€‚ç„¶è€Œï¼Œä½¿ç”¨ csvkit åšäº‹æƒ…çš„çœŸæ­£ä»·å€¼åœ¨äºæ‚¨å¯ä»¥è‡ªåŠ¨åŒ–è¿™ä¸ªè¿‡ç¨‹(ä¾‹å¦‚ä½¿ç”¨ cronjobs)ã€‚

æˆ‘å°†å‘æ‚¨ä»‹ç»å¦‚ä½•ä½¿ç”¨ csvkitï¼Œä»¥ä¾¿æ‚¨å¯ä»¥åœ¨ç»ˆç«¯ä¸­å¤„ç† CSV æ–‡ä»¶ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä¼šæ•™ä½ æˆ‘è®¤ä¸ºæœ€é‡è¦çš„äº”ä¸ª csvkit å‘½ä»¤ã€‚å¦‚æœä½ æ›´å–œæ¬¢è§†è§‰å­¦ä¹ ï¼Œé‚£ä¹ˆæˆ‘ä¹Ÿåœ¨ csvkit ä¸Šåˆ¶ä½œäº†ä¸€ä¸ªå…è´¹çš„ youtube è§†é¢‘ç³»åˆ—[ä½ å¯ä»¥çœ‹çœ‹ğŸ˜ƒ](https://www.youtube.com/playlist?list=PLSE7WKf_qqo1Dl9C2HuegYp0aK7SbZ3Jx)

> **å…ˆå†³æ¡ä»¶:**æ‚¨åº”è¯¥å·²ç»å®‰è£…äº†è¿è¡Œ BASH çš„å‘½ä»¤è¡Œç»ˆç«¯ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Linuxï¼Œé‚£ä¹ˆè¿™åº”è¯¥ä¸æˆé—®é¢˜ï¼Œè€Œ Windows ç”¨æˆ·å¯èƒ½æƒ³çœ‹çœ‹ [cmder](https://cmder.net/) æˆ–è€…ç”¨ [WSL2](https://cloudbytes.dev/snippets/how-to-install-wsl2-on-windows-1011) å¯ç”¨ Linux å­ç³»ç»Ÿã€‚

# 2â€”å¿«é€Ÿè®¾ç½®

è¦å¼€å§‹ä½¿ç”¨ csvkit åŒ…ï¼Œæ‚¨éœ€è¦å®‰è£…å®ƒã€‚csvkit åŒ…æ˜¯ä¸€ä¸ª Python åŒ…ï¼Œæ‰€ä»¥æ‚¨éœ€è¦åšçš„å°±æ˜¯è¿è¡Œ(å‡è®¾æ‚¨å·²ç»å®‰è£…äº† Pyhon çš„åŒ…å®‰è£…ç¨‹åº pip ):

```
pip install csvkit
```

å¦‚æœä¸æƒ³å…¨å±€å®‰è£… csvkit åŒ…ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ä½¿ç”¨ [virtualenv](#https://virtualenv.pypa.io/en/latest/) æ¥è®¾ç½®ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒã€‚è¦æ£€æŸ¥å®‰è£…æ˜¯å¦æ­£å¸¸ï¼Œæ‚¨å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤:

```
in2csv --help
```

å¦‚æœä¸€åˆ‡å®‰è£…æ­£ç¡®ï¼Œæ‚¨ç°åœ¨åº”è¯¥ä¼šçœ‹åˆ°å‘½ä»¤`in2csv`çš„å¸®åŠ©é¡µé¢ã€‚å‘½ä»¤`in2csv`æ˜¯ csvkit ä¸ºæˆ‘ä»¬å®‰è£…çš„å‡ ä¸ªå‘½ä»¤ä¹‹ä¸€ã€‚

è®©æˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªåä¸º`csvkit_sandbox`çš„æ–°æ–‡ä»¶å¤¹ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œç©ä½ çš„æ–°ç©å…·:

```
mkdir csvkit_sandbox
cd csvkit_sandbox
```

æœ€åï¼Œæ‚¨éœ€è¦ä¸€äº›å®é™…ä½¿ç”¨çš„æ•°æ®:è®©æˆ‘ä»¬ä¸‹è½½ csvkit æ–‡æ¡£ä¹Ÿåœ¨ä½¿ç”¨çš„æ•°æ®:

```
curl -L -O https://raw.githubusercontent.com/wireservice/csvkit/master/examples/realdata/ne_1033_data.xlsx
```

è¿è¡Œä¸Šé¢çš„å‘½ä»¤åï¼Œæ‚¨åº”è¯¥åœ¨æ‚¨çš„æ–‡ä»¶å¤¹ä¸­å®‰è£…äº†æ–‡ä»¶`ne_1033_data.xlsx`ã€‚å¦‚æœä½ ä¸ä¿¡ä»»æˆ‘ï¼Œä½ å¯ä»¥è¿è¡Œ`ls`æ¥æ£€æŸ¥ä½ çš„`csvkit_sandbox`æ–‡ä»¶å¤¹çš„å†…å®¹ğŸ˜‰

# Excel é»‘ä»”(in2csv)

æˆ‘ä»¬è¦çœ‹çš„ç¬¬ä¸€ä¸ªå‘½ä»¤æ˜¯`in2csv`å‘½ä»¤ã€‚è¿™ä¸ªå‘½ä»¤å°†ä¸€ä¸ª excel æ–‡ä»¶è½¬æ¢æˆä¸€ä¸ª CSV æ–‡ä»¶(åºŸè¯ï¼).è¿™éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºæ•°æ®ç§‘å­¦å®¶ç»å¸¸è·å¾— excel æ ¼å¼çš„æŠ¥å‘Šï¼Œå¹¶ä¸”å¿…é¡»å°†å®ƒä»¬è½¬æ¢ä¸º CSV æ–‡ä»¶æ‰èƒ½æœ‰æ•ˆåœ°ä½¿ç”¨å®ƒä»¬ã€‚

è¦ä½¿ç”¨`in2csv`å‘½ä»¤ï¼Œæ‚¨åªéœ€ç¼–å†™:

```
in2csv ne_1033_data.xlsx
```

å¦‚æœæ‚¨åƒè¿™æ ·ä½¿ç”¨è¯¥å‘½ä»¤ï¼Œé‚£ä¹ˆæ‚¨åªéœ€å°†æ‰€æœ‰è¾“å‡ºè½¬å‚¨åˆ°ç»ˆç«¯ã€‚å³ä½¿å¯¹äºä¸­ç­‰å¤§å°çš„æ–‡ä»¶ï¼Œè¿™ä¹Ÿå¾ˆç³Ÿç³•ã€‚æ›´å¥½çš„é€‰æ‹©æ˜¯å°†è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
in2csv ne_1033_data.xlsx > new_file.csv
```

ç°åœ¨ï¼Œåœ¨æ‚¨çš„`csvkit_sandbox`æ–‡ä»¶å¤¹ä¸­åº”è¯¥æœ‰ä¸€ä¸ªåä¸º`new_file.csv`çš„æ–° CSV æ–‡ä»¶ã€‚æˆ‘æœ‰æ—¶ä½¿ç”¨çš„ä¸€ä¸ªæŠ€å·§æ˜¯åœ¨åŒä¸€ä¸ªå‘½ä»¤ä¸­æ·»åŠ ä¸€ä¸ª`rm`å‘½ä»¤æ¥åˆ é™¤åŸå§‹æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
in2csv ne_1033_data.xlsx > new_file.csv && rm ne_1033_data
```

å¦‚æœæ‚¨è¿è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œé‚£ä¹ˆåœ¨æ‚¨çš„`csvkit_sandbox`æ–‡ä»¶å¤¹ä¸­åº”è¯¥åªæœ‰æ–‡ä»¶`new_file.csv`ã€‚å¦‚æœæ‚¨æƒ³ç­¾å‡ºæ–‡ä»¶`new_file.csv`ï¼Œé‚£ä¹ˆå°è¯•å‘½ä»¤:

```
head new_file.csv
```

è¯¥å‘½ä»¤å°†æ–‡ä»¶`new_file.csv`ä¸­çš„ç¬¬ä¸€è¡Œè¾“å‡ºåˆ°ç»ˆç«¯ã€‚

![](img/852644bab8571caffd76997963873797.png)

ç…§ç‰‡ç”± [Mohamed Nohassi](https://unsplash.com/@coopery?utm_source=medium&utm_medium=referral) åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) æ‹æ‘„

# 4â€”æ•°æ®æ‰‹æœ¯åˆ€(csvcut)

åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œæ‚¨ä» excel æ–‡ä»¶ä¸­æ£€ç´¢äº†æ‰€æœ‰åˆ—ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º CSV æ–‡ä»¶ã€‚ä½†æ˜¯é€šå¸¸æ‚¨ä¸éœ€è¦æ‰€æœ‰çš„åˆ—æ¥è¿›è¡Œè¿›ä¸€æ­¥çš„åˆ†æã€‚å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆå’Œæˆ‘ä»¬ä¸€èµ·æ‹–æ— ç”¨çš„åˆ—å°†æ˜¯ä¸€ä»¶éº»çƒ¦äº‹ã€‚ä¸è¦å®³æ€•ï¼ä½¿ç”¨å‘½ä»¤`csvcut`å¯ä»¥é€‰æ‹© CSV æ–‡ä»¶çš„æŸäº›åˆ—:

```
csvcut -c county,total_cost,ship_date new_file.csv**Output:**
county,total_cost,ship_date
ADAMS,138.0,2008-07-11
ADAMS,138.0,2008-07-11
ADAMS,138.0,2008-07-11
ADAMS,138.0,2008-07-11
ADAMS,138.0,2008-07-11
ADAMS,138.0,2008-07-11
BUFFALO,499.0,2008-09-24
BUFFALO,499.0,2008-09-24
BUFFALO,499.0,2008-09-24
BUFFALO,499.0,2008-09-24
BUFFALO,499.0,2008-09-24
BUFFALO,499.0,2008-09-24
BUFFALO,499.0,2008-09-24
BUFFALO,499.0,2008-09-24
BURT,499.0,2013-06-20
...
```

ä¸Šè¿°å‘½ä»¤ä»…ä» CSV æ–‡ä»¶`new_file.csv`ä¸­é€‰æ‹©åˆ—`county`ã€`total_cost`å’Œ`ship_date`ã€‚

ä½†æ˜¯å¦‚æœæ‚¨ä¸è®°å¾—åˆ—åäº†å‘¢ï¼Ÿç„¶åï¼Œä¸€ä¸ªå¿«é€Ÿçš„æŠ€å·§æ˜¯è¿è¡Œå‘½ä»¤:

```
csvcut -n new_file.csv**Output:** 1: state
2: county
3: fips
4: nsn
5: item_name
6: quantity
7: ui
8: acquisition_cost
9: total_cost
10: ship_date
11: federal_supply_category
12: federal_supply_category_name
13: federal_supply_class
14: federal_supply_class_name
```

å¯é€‰å‚æ•°`-n`ç»™å‡ºäº†åˆ—çš„åç§°ã€‚æ•´æ´ï¼Œå¯¹ä¸å¯¹ï¼Ÿå‘½ä»¤`csvcut`å¯¹äºé€‰æ‹©æƒ³è¦ç»§ç»­çš„åˆ—éå¸¸æœ‰ç”¨ã€‚

# 5-çœ‹èµ·æ¥ä¸é”™(csvlook)

![](img/722444f0ff45c36c34c55769e5b45d26.png)

[æ¢…å°”Â·åŸƒåˆ©äºšæ–¯](https://unsplash.com/@cuartodeiibra?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

å½“æ‚¨å°†æœ€åä¸€éƒ¨åˆ†ä¸­çš„ CSV æ–‡ä»¶è¾“å‡ºåˆ°ç»ˆç«¯æ—¶ï¼Œå®ƒçœ‹èµ·æ¥ä¸æ˜¯å¾ˆå¥½ã€‚å°†åŸå§‹ CSV æ–‡ä»¶æ‰“å°åˆ°ç»ˆç«¯æ—¶ï¼Œè¿™æ ·è¯»èµ·æ¥é€šå¸¸ä¼šå¾ˆç³Ÿç³•:

```
csvcut -c county,total_cost,ship_date new_file.csv**Output:**
county,total_cost,ship_date
ADAMS,138.0,2008-07-11
ADAMS,138.0,2008-07-11
ADAMS,138.0,2008-07-11
ADAMS,138.0,2008-07-11
ADAMS,138.0,2008-07-11
ADAMS,138.0,2008-07-11
BUFFALO,499.0,2008-09-24
BUFFALO,499.0,2008-09-24
BUFFALO,499.0,2008-09-24
BUFFALO,499.0,2008-09-24
BUFFALO,499.0,2008-09-24
BUFFALO,499.0,2008-09-24
BUFFALO,499.0,2008-09-24
BUFFALO,499.0,2008-09-24
BURT,499.0,2013-06-20
...
```

å‘½ä»¤`csvlook`å‰æ¥æ•‘æ´ã€‚æ‚¨å¯ä»¥ä½¿ç”¨**ç®¡é“æ“ä½œç¬¦** `|`å°†å‘½ä»¤`csvcut`çš„è¾“å‡ºä½œä¸ºå‘½ä»¤`csvlook`çš„è¾“å…¥ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
csvcut -c county,total_cost,ship_date new_file.csv | csvlook**Output:** | county     | total_cost |  ship_date |
| ---------- | ---------- | ---------- |
| ADAMS      |     138.00 | 2008-07-11 |
| ADAMS      |     138.00 | 2008-07-11 |
| ADAMS      |     138.00 | 2008-07-11 |
| ADAMS      |     138.00 | 2008-07-11 |
| ADAMS      |     138.00 | 2008-07-11 |
| ADAMS      |     138.00 | 2008-07-11 |
| BUFFALO    |     499.00 | 2008-09-24 |
| BUFFALO    |     499.00 | 2008-09-24 |
| BUFFALO    |     499.00 | 2008-09-24 |
| BUFFALO    |     499.00 | 2008-09-24 |
| BUFFALO    |     499.00 | 2008-09-24 |
| BUFFALO    |     499.00 | 2008-09-24 |
| BUFFALO    |     499.00 | 2008-09-24 |
| BUFFALO    |     499.00 | 2008-09-24 |
| BURT       |     499.00 | 2013-06-20 |
...
```

é‚£çœ‹èµ·æ¥å¥½å¤šäº†ï¼ç°åœ¨ï¼Œç”¨è‚‰çœ¼è§£æè¾“å‡ºè¦å®¹æ˜“å¾—å¤šã€‚

è¿˜è®°å¾—ä½ ç”¨ç®¡é“æ“ä½œç¬¦`|`å°†`csvcut`çš„è¾“å‡ºä¼ é€’ç»™`csvlook`çš„è¾“å…¥çš„æŠ€å·§å—ï¼Ÿè¿™åœ¨ csvkit ä¸­éå¸¸å¸¸è§ï¼Œå¹¶ä¸”æ˜¯åˆ›å»ºæ›´å¤æ‚ç®¡é“çš„å…³é”®ğŸ”¥

# 6 â€”ä»¤äººæ•¬ç•çš„ç»Ÿè®¡æ•°æ®(csvstat)

å½“ä½œä¸ºæ•°æ®åˆ†æå¸ˆæˆ–æ•°æ®ç§‘å­¦å®¶å¤„ç† CSV æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸å¸Œæœ›æå–æ±‡æ€»ç»Ÿè®¡æ•°æ®ã€‚æœ‰æ•°ç™¾ç§æ–¹æ³•å¯ä»¥æå– CSV æ–‡ä»¶ä¸­å„åˆ—çš„ä¸­å€¼å’Œå¹³å‡å€¼ã€‚ä½ åº”è¯¥ç”¨å“ªä¸€ä¸ªï¼Ÿå°†æ•°æ®å¯¼å…¥ Excelï¼Ÿç”¨ç†ŠçŒ«è¿›è¡Œå¿«é€Ÿæ•°æ®åˆ†æï¼Ÿ

æˆ‘æƒ³ä½ çŸ¥é“æˆ‘æƒ³è¯´ä»€ä¹ˆã€‚å½“ç„¶ï¼Œcsvkit å¯¹æ­¤æœ‰ä¸€ä¸ªå‘½ä»¤å«åš`csvstat`ã€‚å‘½ä»¤`csvstat`ä» CSV æ–‡ä»¶ä¸­çš„æ¯ä¸€åˆ—æå–åŸºæœ¬ç»Ÿè®¡æ•°æ®:

```
csvstat new_file.csv**Output:**1\. "state"
Type of data:          Text
Contains null values:  False
Unique values:         1
Longest value:         2 characters
Most common values:    NE (1036x)2\. "county"
Type of data:          Text
Contains null values:  False
Unique values:         35
Longest value:         10 characters
Most common values:    DOUGLAS (760x)
                       DAKOTA (42x)
                       CASS (37x)
                       HALL (23x)
                       LANCASTER (18x)3\. "fips"
Type of data:          Number
Contains null values:  False
Unique values:         35
Smallest value:        31001
Largest value:         31185
Sum:                   32176888
Mean:                  31058.772
Median:                31055
StDev:                 23.881
Most common values:    31055 (760x)
                       31043 (42x)
                       31025 (37x)
                       31079 (23x)
                       31109 (18x)
...
```

å¦‚æœæ‚¨ä»”ç»†é˜…è¯»ä¸Šé¢çš„è¾“å‡ºï¼Œé‚£ä¹ˆæ‚¨ä¼šå‘ç°`csvstat`æ ¹æ®åˆ—ç±»å‹ç»™å‡ºä¸åŒçš„ç»Ÿè®¡ä¿¡æ¯ã€‚å¦‚æœä½ çš„æŸä¸€åˆ—æ˜¯æ–‡æœ¬æ ¼å¼ï¼Œé‚£ä¹ˆè°ˆè®ºé‚£ä¸€åˆ—çš„æ ‡å‡†å·®å°±æ²¡ä»€ä¹ˆæ„ä¹‰äº†ã€‚

å‘½ä»¤`csvstat`æ‰§è¡Œ**ç±»å‹çš„æ¨ç†**ã€‚å®ƒå°è¯•æ¨æ–­åˆ—çš„ç±»å‹ï¼Œç„¶åæ‰¾åˆ°åˆé€‚çš„æ±‡æ€»ç»Ÿè®¡ä¿¡æ¯ã€‚æ ¹æ®æˆ‘çš„ç»éªŒï¼Œè¿™éå¸¸æœ‰æ•ˆã€‚

æœ‰æ—¶ï¼Œæ‚¨ä¸æƒ³è¦æ‰€æœ‰åˆ—çš„ç»Ÿè®¡æ•°æ®ï¼Œè€Œåªæƒ³è¦å‡ åˆ—ã€‚ä¸ºæ­¤ï¼Œä½¿ç”¨å‘½ä»¤`csvcut`è¿‡æ»¤å‡ºå¿…è¦çš„åˆ—ï¼Œç„¶åé€šè¿‡ç®¡é“å°†å…¶ä¼ é€’ç»™`csvstat`ä»¥è·å¾—ç»Ÿè®¡æ•°æ®:

```
csvcut -c total_cost,ship_date new_file.csv | csvstat**Output:**1\. "total_cost"
Type of data:          Number
Contains null values:  False
Unique values:         92
Smallest value:        0
Largest value:         412000
Sum:                   5553135.17
Mean:                  5360.169
Median:                6000
StDev:                 13352.139
Most common values:    6800 (304x)
                       10747 (195x)
                       6000 (105x)
                       499 (98x)
                       0 (81x)2\. "ship_date"
Type of data:          Date
Contains null values:  False
Unique values:         84
Smallest value:        2006-03-07
Largest value:         2014-01-30
Most common values:    2013-04-25 (495x)
                       2013-04-26 (160x)
                       2008-05-20 (28x)
                       2012-04-16 (26x)
                       2006-11-17 (20x)Row count: 1036
```

# 7 â€”æ™ºèƒ½æœç´¢(csvgrep)

æˆ‘æåŠ›æ¨èçš„æœ€åä¸€ä¸ªå‘½ä»¤æ˜¯`csvgrep`å‘½ä»¤ã€‚å‘½ä»¤`csvgrep`å…è®¸æ‚¨æœç´¢ CSV æ–‡ä»¶ä»¥æ‰¾åˆ°ç‰¹å®šçš„è®°å½•ã€‚å¦‚æœä½ ä¹ æƒ¯äº†ç»ˆç«¯å‘½ä»¤`grep`ï¼Œé‚£ä¹ˆ`csvgrep`å‘½ä»¤ä¹Ÿå·®ä¸å¤šã€‚

è¦æŸ¥çœ‹å®ƒçš„è¿è¡Œæƒ…å†µï¼Œè®©æˆ‘ä»¬åœ¨ CSV æ–‡ä»¶ä¸­æœç´¢ county **HOLT** :

```
csvgrep -c county -m "HOLT" new_file.csv**Output:** NE,HOLT,31089.0,1005-00-073-9421,"RIFLE,5.56 MILLIMETER",1.0,Each,499.0,499.0,2008-05-19,10.0,WEAPONS,1005.0,"Guns, through 30 mm"NE,HOLT,31089.0,1005-00-589-1271,"RIFLE,7.62 MILLIMETER",1.0,Each,138.0,138.0,2006-03-08,10.0,WEAPONS,1005.0,"Guns, through 30 mm"NE,HOLT,31089.0,1005-00-589-1271,"RIFLE,7.62 MILLIMETER",1.0,Each,138.0,138.0,2006-03-08,10.0,WEAPONS,1005.0,"Guns, through 30 mm"
...
```

æˆåŠŸäº†ï¼ç°åœ¨ä½ åªèƒ½å¾—åˆ°å¿**éœå°”ç‰¹**çš„è®°å½•ã€‚

*   å‚æ•°`-c`ç”¨äºé€‰æ‹©*åˆ—ã€‚*
*   å‚æ•°`-m`ç”¨äºæŸ¥æ‰¾ä¸åŒ¹é…çš„å­—ç¬¦ä¸²*ã€‚*

> **Pro æç¤º:**`csvgrep`å‘½ä»¤ä¹Ÿå…è®¸ä½¿ç”¨å¯é€‰å‚æ•°`-r`è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼æœç´¢ã€‚æŸ¥çœ‹ [csvgrep æ–‡æ¡£](https://csvkit.readthedocs.io/en/latest/scripts/csvgrep.html)äº†è§£æ›´å¤šç›¸å…³ä¿¡æ¯ï¼

æˆ‘ç»™ä½ çš„æœ€åä¸€ä¸ªå»ºè®®æ˜¯ï¼Œè¯•ç€ç»„åˆå‡ ä¸ª csvkit å‘½ä»¤æ¥è·å¾—å¾ˆé…·çš„ç»“æœã€‚çœ‹çœ‹è¿™ä¸ªã€‚

```
csvcut -c county,total_cost new_file.csv | csvgrep -c county -m "HOLT" | csvlook**Output:**
| county | total_cost |
| ------ | ---------- |
| HOLT   |     499.00 |
| HOLT   |     138.00 |
| HOLT   |     138.00 |
| HOLT   |     138.00 |
| HOLT   |     138.00 |
| HOLT   |     138.00 |
| HOLT   |     138.00 |
| HOLT   |      58.71 |
```

é¦–å…ˆï¼Œæˆ‘åªé€‰æ‹©äº†å¸¦æœ‰`csvcut`çš„ä¸¤åˆ—`county`å’Œ`total_cost`ã€‚ç„¶åæˆ‘ç”¨å‘½ä»¤`csvgrep`æœç´¢å¿ **HOLT** ã€‚æœ€åï¼Œæˆ‘ç”¨å‘½ä»¤`csvlook`å¾ˆå¥½åœ°æ˜¾ç¤ºäº†ç»“æœã€‚ç°åœ¨è½®åˆ°ä½ å’ŒâœŒï¸æ­æ¡£äº†

# 8 â€”æ€»ç»“

![](img/6784561c6caed537e147ff1a6283d163.png)

ç…§ç‰‡ç”±[æ–¯æ½˜å¡Â·ä¼¯æ ¹](https://unsplash.com/@spencerbergen?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„

å¸Œæœ›ä½ å¼€å§‹åƒæˆ‘ä¸€æ ·å–œæ¬¢ csvkitã€‚åŒæ ·ï¼Œå¦‚æœä½ æƒ³å­¦ä¹ ä¸€äº›æ›´é…·çš„æŠ€å·§å’Œè¯€çªï¼Œé‚£ä¹ˆæŸ¥çœ‹ csvkit æ–‡æ¡£[æˆ– csvkit](https://csvkit.readthedocs.io/en/latest/) ä¸Šæˆ‘çš„ youtube è§†é¢‘[ã€‚](https://www.youtube.com/playlist?list=PLSE7WKf_qqo1Dl9C2HuegYp0aK7SbZ3Jx)

**å–œæ¬¢æˆ‘å†™çš„ï¼Ÿ**æŸ¥çœ‹æˆ‘çš„å…¶ä»–å¸–å­ï¼Œäº†è§£æ›´å¤š Python å†…å®¹:

*   [ä½œä¸ºæ•°æ®ç§‘å­¦å®¶å¦‚ä½•å†™å‡ºé«˜è´¨é‡çš„ Python](/how-to-write-high-quality-python-as-a-data-scientist-cde99f582675)
*   [ç”¨æ¼‚äº®çš„ç±»å‹æç¤ºä½¿ä½ ç½ªæ¶çš„ Python ä»£ç ç°ä»£åŒ–](/modernize-your-sinful-python-code-with-beautiful-type-hints-4e72e98f6bf1)
*   [ç”¨ Python å¯è§†åŒ–ç¼ºå¤±å€¼éå¸¸ç®€å•](/visualizing-missing-values-in-python-is-shockingly-easy-56ed5bc2e7ea)
*   [ä½¿ç”¨ PyOD åœ¨ Python ä¸­å¼•å…¥å¼‚å¸¸/ç¦»ç¾¤ç‚¹æ£€æµ‹ğŸ”¥](/introducing-anomaly-outlier-detection-in-python-with-pyod-40afcccee9ff)
*   5 ä¸ªä¸“å®¶å»ºè®®è®©ä½ çš„ Python å­—å…¸æŠ€èƒ½çªé£çŒ›è¿›ğŸš€

å¦‚æœä½ å¯¹æ•°æ®ç§‘å­¦ã€ç¼–ç¨‹æˆ–ä»»ä½•ä»‹äºä¸¤è€…ä¹‹é—´çš„ä¸œè¥¿æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆè¯·éšæ„åœ¨ LinkedIn ä¸ŠåŠ æˆ‘ï¼Œå¹¶å‘âœ‹é—®å¥½