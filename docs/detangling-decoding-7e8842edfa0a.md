# è§£ç¼ ç»“è§£ç 

> åŸæ–‡ï¼š<https://towardsdatascience.com/detangling-decoding-7e8842edfa0a>

## åå¤„ç†æ˜¯ä»‹äºç®—æ³•è¾“å‡ºå’Œæ´å¯ŸåŠ›ä¹‹é—´çš„æ•°æ®äº‰è®ºã€‚

![](img/5393bde47d76f9a0c94303dc37e200ba.png)

ç”µå”±æœºâ€”â€”å›¾ç‰‡æ¥æº:([unsplash.com/photos/-iKrBACW3lQ](https://unsplash.com/photos/-iKrBACW3lQ))

# è§£ç å™¨æ¨¡æ‹Ÿ

å¦‚æœä½ æŠŠä¸€å¼ é»‘èƒ¶å”±ç‰‡æ”¾åœ¨è€³è¾¹ï¼Œæ— è®ºä½ å¹æ‰å¤šå°‘ç°å°˜ï¼Œä½ éƒ½ä¸ä¼šå¬åˆ°éŸ³ä¹ã€‚è®°å½•åŒ…å«çš„ä¿¡æ¯ä»¥æœºå™¨å¯è¯»çš„æ ¼å¼ç¼–ç ã€‚ç±»ä¼¼åœ°ï¼Œå½“æœºå™¨å­¦ä¹ ç®—æ³•è¿”å›é¢„æµ‹æ—¶ï¼Œå®ƒä»¬é€šå¸¸ä»¥ä¸‹åˆ—æ ¼å¼ä¹‹ä¸€ç¼–ç :

*   ***äºŒè¿›åˆ¶****â€”â€”*0(s)å’Œ 1(s)çš„ç»„åˆã€‚
*   ***æŒ‰æ¯”ä¾‹ç¼©æ”¾*** â€”å°æ•°åœ¨-1:0:1 ä¹‹é—´ã€‚

æˆ‘ä»¬ä¸èƒ½å‘Šè¯‰æˆ‘ä»¬çš„æœ€ç»ˆç”¨æˆ·ä»–ä»¬çš„æœè£…å°ºå¯¸æ˜¯ *FloatTensor(-0.139374)* æˆ–è€…ä»–ä»¬çš„è¯Šæ–­æ˜¯ *ndarray([0ï¼Œ0ï¼Œ0ï¼Œ1ï¼Œ0ï¼Œ0])* ã€‚è¿™äº›é¢„æµ‹éœ€è¦é¦–å…ˆé€šè¿‡**è§£ç **çš„è¿‡ç¨‹å˜å¾—å¯è¯»ã€‚

[åœ¨ä¹‹å‰çš„æ–‡ç« ](/data-leakage-5dfc2e0127d4)ä¸­ï¼Œæˆ‘ä»¬ç®€è¦åœ°æåˆ°äº† *fit()/transform()* ç¼–ç æ¨¡å¼ï¼Œå…¶ä¸­ *inverse_transform()* æ–¹æ³•ç¨åç”¨äºè§£ç ã€‚ä¹ä¸€çœ‹ï¼Œè§£ç è¿‡ç¨‹ä¼¼ä¹å¾ˆå®¹æ˜“ï¼Œâ€œåªéœ€è¿è¡Œ *inverse_transform()* å³å¯ï¼Œå¯¹å—ï¼Ÿâ€æœç„¶ï¼Œå½“æ‰§è¡Œ*ç›‘ç£çš„*åˆ†ææ—¶ï¼Œè§£ç é¢„æµ‹ç›¸å½“ç®€å•ï¼Œå› ä¸º*æ ‡ç­¾*é€šå¸¸æ˜¯ä¸å•ä¸ªç¼–ç å™¨ç›¸å…³è”çš„å•ä¸ªåˆ—ã€‚

# è¶…è¶ŠåŸºç¡€ã€‚

![](img/f3da6f88c4872f987b4f42d8bb6fcb63.png)

å¯è§†åŒ–é˜µåˆ—ä¸æ–­å¢åŠ çš„ç»´åº¦(ä½œè€…çš„[å›¾ç‰‡)](https://docs.google.com/drawings/d/1R6fae0-Os2Z1aEnlRAnl1T2VK46Y5tk0atQ_Qfx-mLw/edit?usp=sharing)

ç„¶è€Œï¼Œå½“ä½¿ç”¨*ç”Ÿæˆ*ç®—æ³•æ—¶ï¼Œäº‹æƒ…å˜å¾—æ›´åŠ å¤æ‚ã€‚ç”±äºè‡ªæˆ‘ç›‘ç£æ—¨åœ¨å†ç°åŸå§‹*ç‰¹å¾*çš„ä¿®æ”¹ç‰ˆæœ¬ï¼Œè§£ç è¿™äº›é¢„æµ‹éœ€è¦è·Ÿè¸ªè®¸å¤šé€‚åˆæ··åˆåˆ—çš„ç¼–ç å™¨ã€‚è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥åœ°äº†è§£åœ¨è§£ç *(æ ·æœ¬*æ—¶é—´æ­¥é•¿*ç‰¹å¾)*çš„ 3D å½¢çŠ¶é¢„æµ‹æ—¶å¯èƒ½ä¼šé‡åˆ°çš„æŒ‘æˆ˜ã€‚éšç€è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œæˆ‘ä»¬å°†å¾ˆå¿«çœ‹åˆ°å¯¹è§£ç æ•°æ®çš„ç³»ç»Ÿæ–¹æ³•çš„éœ€æ±‚â€”â€”å°±åƒæˆ‘ä»¬çš„å”±æœºå¦‚ä½•æœºæ¢°åœ°ç¿»è¯‘éŸ³ä¹ä¸€æ ·ã€‚

ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹[](https://github.com/aiqc/aiqc)**(è¿™ç¯‡åšæ–‡çš„ä½œè€…å¼€å‘çš„ MLOps å¼€æºæ¡†æ¶)å¦‚ä½•åº”å¯¹è¿™äº›æŒ‘æˆ˜ã€‚**

> **[](https://github.com/aiqc/aiqc)**(åˆ«å¿˜äº†â­ )****

# ***äº‹æƒ…å˜å¾—æ”¯ç¦»ç ´ç¢***

***![](img/225cfc447faf26a28418ba19996b46a6.png)***

***ä½¿ç”¨æ··åˆç¼–ç æ–¹æ³•çš„ 3D ç”Ÿæˆå¼é¢„æµ‹çš„åˆ—[(ä½œè€…å›¾ç‰‡)](https://docs.google.com/drawings/d/1m2YXR2pg5FqQw2BG23GGpK1q9WvDKbr2Bd0zNM7gWgc/edit?usp=sharing)***

## ***[ğŸ’¾](https://emojipedia.org/floppy-disk/) (1) **å…ƒæ•°æ®è¦æ±‚ã€‚*****

*   ***å¦‚æœæˆ‘ä»¬ä¸€å¼€å§‹å°±æ²¡æœ‰åšæŒæˆ‘ä»¬çš„ *fit()* ï¼Œé‚£ä¹ˆæˆ‘ä»¬åŸºæœ¬ä¸Šå°±ä¸èµ°è¿äº†ã€‚æˆ‘ä»¬æ— æ³•è§£ç æˆ‘ä»¬çš„é¢„æµ‹ï¼Œé™¤éæˆ‘ä»¬èƒ½ä»¥æŸç§æ–¹å¼é‡ç°åˆ†è£‚/æŠ˜å ï¼Œå¹¶é‡æ–°*æ‹Ÿåˆ()ã€‚*è®°å½•â€œå“ªä¸ªæ ·æœ¬è¿›å…¥å“ªä¸ªåˆ†å‰²â€å¹¶ä¸æ˜¯å¸¸è§çš„åšæ³•ï¼Œå› æ­¤è¿™ç§å˜é€šåŠæ³•ä¸å¤ªå¯èƒ½ã€‚***
*   ***éœ€è¦æ³¨æ„çš„ä¸€ä¸ªä¸»è¦ç¼ºé™·æ˜¯ï¼Œä¸€äº›ç¼–ç å™¨ç±»æ ¹æœ¬æ²¡æœ‰ *inverse_transform()* æ–¹æ³•ï¼æœ€å¥½åœ¨ä¸€å¼€å§‹å°±é˜»æ­¢å®ƒä»¬çš„ä½¿ç”¨ã€‚***
*   ***ç”±äºä¸€ä¸ª *fit()* å¯ä»¥å±äºä¸€ä¸ªæˆ–å¤šä¸ªåˆ—ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªâ€œå“ªäº›åˆ—å±äºå“ªäº›ç¼–ç å™¨â€çš„æ˜ å°„ç¼–ç å™¨é€šå¸¸ä¸ä¼šä¿ç•™è¿™äº›å…ƒæ•°æ®ã€‚***

```
***class FittedEncoderset():**
    fitted_encoders      = PickleField()
    job                  = ForeignKeyField(Job, ...)
    encoderset           = ForeignKeyField(Encoderset, ...) **class Featurecoder():**
    sklearn_preprocess   = PickleField()
    matching_columns     = JSONField()
    encoded_column_names = JSONField()
    leftover_columns     = JSONField()
    leftover_dtypes      = JSONField()
    original_filter      = JSONField()
    encoding_dimension   = CharField()
    only_fit_train       = BooleanField()
    is_categorical       = BooleanField()
    index                = IntegerField()
    encoderset           = ForeignKeyField(Encoderset, ...)*
```

***çœ‹ä¸€ä¸‹ AIQC æ•°æ®åº“æ¨¡å¼çš„æºä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯ä¸ª *Featurecoder* éƒ½ä¿ç•™äº†åœ¨åå¤„ç†æœŸé—´å¯¹æˆ‘ä»¬çš„é¢„æµ‹è¿›è¡Œåå‘å·¥ç¨‹æ‰€éœ€çš„å…ƒæ•°æ®ã€‚å½“*ç¼–ç å™¨é›†*é€‚åˆåˆ†å‰²/æŠ˜å æ—¶ï¼Œä¸€ä¸ª*fitdencoderset*ç³»ç»Ÿåœ°æ•è· *fit()* ã€‚***

## ***ğŸ¶â‘¡**æ‰§è¡Œè§£ç ã€‚*****

*   ***ä¸€æ—¦æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬éœ€è¦åšä»€ä¹ˆæ ·çš„åå˜æ¢ï¼Œæˆ‘ä»¬ä»ç„¶ä¼šè¢«å¡ä½ï¼Œå› ä¸ºç¼–ç å™¨ä¸æ”¯æŒé«˜äº 2 çš„ç»´åº¦ã€‚åœ¨åº”ç”¨ *inverse_transform()* ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„å®½ 3D é˜µåˆ—é‡æ–°æ•´å½¢ä¸ºä¸€ä¸ªé«˜ 2D é˜µåˆ—ã€‚***
*   ***è§£ç å™¨ä¸ä¼šå°±åœ°è¦†ç›–åˆ—ï¼Œè€Œæ˜¯ç”Ÿæˆç‹¬ç«‹çš„æ•°æ®å­é›†ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨è¿æ¥å®ƒä»¬ä¹‹å‰å•ç‹¬è§£ç æ¯ä¸ªå­é›†ã€‚***
*   ***å¦‚æœä½¿ç”¨äº† OneHotEncoder() sï¼Œäº‹æƒ…å°±ä¼šå˜å¾—éå¸¸æ£˜æ‰‹ã€‚è¿™ç±»ç¼–ç å™¨æ ¹æ®å…¶è§‚å¯Ÿçš„ç±»åˆ«æ•°é‡äº§ç”Ÿ 3+ä¸ªç¼–ç åˆ—ã€‚å®ƒæœ‰ä¸€ä¸ª *categories_* å±æ€§ï¼ŒåŒ…å« 1+åˆ—åæ•°ç»„ï¼Œè¿™å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®å®šæˆ‘ä»¬çš„è§£ç å™¨åº”è¯¥åˆ‡æ‰å¤šå°‘åˆ—ã€‚***

```
*import numpy as np
arr = np.array([[â€˜aâ€™,1],[â€˜bâ€™,2],[â€˜aâ€™,4],[â€˜câ€™,3]])from sklearn.preprocessing import OneHotEncoder
OneHotEncoder().fit(arr).categories_"""
# Contains an array of discrete classes for each column.
[
    array(['a', 'b', 'c'], dtype='<U1'), 
    array(['1', '2', '3', '4'], dtype='<U1')
]
"""*
```

## ***ğŸ“(3) **å¯¹è§£ç åçš„æ•°æ®è¿›è¡Œæ•´å½¢ã€‚*****

*   ***å°½ç®¡å·²ç»æ‰§è¡Œäº† *inverse_transform()* ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦å°†æ•°æ®é‡æ–°å¡‘é€ æˆæ­£ç¡®çš„å½¢çŠ¶ã€‚æ‰€ä»¥æˆ‘ä»¬å°†æŠŠé‚£ä¸ªé«˜å¤§çš„ 2D é˜µåˆ—åˆ†æˆä¸€ä¸ªå®½é˜”çš„ä¸‰ç»´é˜µåˆ—ã€‚***
*   ***ç”±äºç¼–ç å™¨åˆ†åˆ«åº”ç”¨äºå­é›†ï¼Œè§£ç åçš„åˆ—é¡ºåºå¯èƒ½ä¸åŸå§‹æ•°æ®ä¸­çš„åˆ—é¡ºåºä¸åŒ¹é…ã€‚å› æ­¤ï¼Œåœ¨å°†åˆ—ç§»å›åŸä½ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å¯¹åˆ—æ˜ å°„è¿›è¡Œé€†å‘å·¥ç¨‹ã€‚***

> ***å‚è€ƒ [aiqcã€‚Jobs.predict()](https://github.com/aiqc/AIQC/blob/main/aiqc/__init__.py#L6330) æ–¹æ³•æ¥æŸ¥çœ‹åŠ¨æ€è§£ç çš„æ•ˆæœã€‚***

***![](img/eb2be7e7a73d3a70ca69a521847523dd.png)***

***è®¡ç®—å°ºâ€”ç…§ç‰‡æ¥æº:([unsplash.com/photos/e6pPIcJ05Jg](https://unsplash.com/photos/e6pPIcJ05Jg))***

# ***è‡ªåŠ¨åŒ–è¿˜æ˜¯ä¸è‡ªåŠ¨åŒ–***

***å¯¹äºè¯„ä¼°çš„æ¯ä¸ªåˆ†è£‚/æŠ˜å ä»¥åŠæ•°æ®é›†ä¸­åŒ…æ‹¬çš„ä»»ä½•å…¶ä»–å¤šæ¨¡æ€ç‰¹å¾ï¼Œå¿…é¡»é‡å¤æ•´ä¸ªè§£ç è¿‡ç¨‹ã€‚***

> ****åœ¨å®è·µä¸­ï¼Œè§£ç å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œå› ä¸ºå®ƒéœ€è¦å…³äºåŸå§‹æ ·æœ¬çš„å…ƒæ•°æ®ï¼Œå¹¶ä¸”ç‰¹å¾å¾€å¾€ä¼šåœ¨ç¼–ç æœŸé—´æ”¹å˜é¡ºåºå¹¶æ‰©å±•ã€‚****

***å‘è‡ªåŠ¨åŒ– *MLOps* è¿ˆè¿›ä¸€æ­¥æ˜¯ä¸æ˜¯å¾ˆå¯æ€•ï¼Ÿæ˜¯çš„ï¼Œå°¤å…¶æ˜¯å¯¹æ•°æ®ç§‘å­¦å®¶æ¥è¯´ï¼›ä¸€ä¸ªå¦‚æ­¤ä¹ æƒ¯äºæ‰¹åˆ¤æ€§æ€è€ƒä»–ä»¬å¯¹æ•°æ®é‡‡å–çš„æ¯ä¸€ä¸ªè¡ŒåŠ¨çš„å«ä¹‰çš„ç¾¤ä½“ã€‚ç„¶è€Œï¼Œåœ¨é¢å¯¹ä¸Šè¿°é—®é¢˜å¹¶å°†å…¶è§£å†³åˆ° 5D(å½©è‰²å›¾åƒæ—¶é—´åºåˆ—æ•°æ®é›†æˆ–å¤šç«™ç‚¹å¤šåºåˆ—æ•°æ®é›†)åï¼Œæˆ‘å¯ä»¥å‘æ‚¨ä¿è¯è¿™æ˜¯ä¸€é¡¹ä¹å‘³ä¸”å®¹æ˜“å‡ºé”™çš„å·¥ä½œã€‚æœ€å¥½ç”¨ä¸€ä¸ªåŠ¨æ€çš„ã€ç»è¿‡è‰¯å¥½æµ‹è¯•çš„ç³»ç»Ÿä¸€æ¬¡æ€§è§£å†³è¿™ç±»é—®é¢˜ï¼Œè€Œä¸æ˜¯é’ˆå¯¹æ¯ä¸ªç‰¹å®šçš„åˆ†æä»å¤´å¼€å§‹è§£å†³å®ƒä»¬ã€‚***

> ***æœºå™¨å­¦ä¹ æ˜¯æ—¶å€™è¶…è¶Šäº’è”ç½‘ä»£ç ç‰‡æ®µçš„å£è¿°å†å²ï¼Œè¿›å…¥ä¸€ä¸ªå®šä¹‰è‰¯å¥½çš„æ¡†æ¶ã€‚***